var PR=Object.defineProperty;var J1=d=>{throw TypeError(d)};var BR=(d,t,e)=>t in d?PR(d,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):d[t]=e;var J=(d,t,e)=>BR(d,typeof t!="symbol"?t+"":t,e),Yb=(d,t,e)=>t.has(d)||J1("Cannot "+e);var c=(d,t,e)=>(Yb(d,t,"read from private field"),e?e.call(d):t.get(d)),w=(d,t,e)=>t.has(d)?J1("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(d):t.set(d,e),A=(d,t,e,s)=>(Yb(d,t,"write to private field"),s?s.call(d,e):t.set(d,e),e),E=(d,t,e)=>(Yb(d,t,"access private method"),e);var mi=(d,t,e,s)=>({set _(r){A(d,t,r,e)},get _(){return c(d,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function e(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=e(r);fetch(r.href,l)}})();var $b={exports:{}},kh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tw;function HR(){if(tw)return kh;tw=1;var d=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(s,r,l){var u=null;if(l!==void 0&&(u=""+l),r.key!==void 0&&(u=""+r.key),"key"in r){l={};for(var h in r)h!=="key"&&(l[h]=r[h])}else l=r;return r=l.ref,{$$typeof:d,type:s,key:u,ref:r!==void 0?r:null,props:l}}return kh.Fragment=t,kh.jsx=e,kh.jsxs=e,kh}var ew;function UR(){return ew||(ew=1,$b.exports=HR()),$b.exports}var Mt=UR(),Kb={exports:{}},Et={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iw;function IR(){if(iw)return Et;iw=1;var d=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),b=Symbol.iterator;function v(z){return z===null||typeof z!="object"?null:(z=b&&z[b]||z["@@iterator"],typeof z=="function"?z:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,T={};function R(z,$,tt){this.props=z,this.context=$,this.refs=T,this.updater=tt||S}R.prototype.isReactComponent={},R.prototype.setState=function(z,$){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,$,"setState")},R.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function M(){}M.prototype=R.prototype;function D(z,$,tt){this.props=z,this.context=$,this.refs=T,this.updater=tt||S}var N=D.prototype=new M;N.constructor=D,x(N,R.prototype),N.isPureReactComponent=!0;var k=Array.isArray,O={H:null,A:null,T:null,S:null,V:null},B=Object.prototype.hasOwnProperty;function G(z,$,tt,Z,ct,wt){return tt=wt.ref,{$$typeof:d,type:z,key:$,ref:tt!==void 0?tt:null,props:wt}}function Q(z,$){return G(z.type,$,void 0,void 0,void 0,z.props)}function W(z){return typeof z=="object"&&z!==null&&z.$$typeof===d}function nt(z){var $={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(tt){return $[tt]})}var et=/\/+/g;function yt(z,$){return typeof z=="object"&&z!==null&&z.key!=null?nt(""+z.key):$.toString(36)}function Lt(){}function vt(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(Lt,Lt):(z.status="pending",z.then(function($){z.status==="pending"&&(z.status="fulfilled",z.value=$)},function($){z.status==="pending"&&(z.status="rejected",z.reason=$)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function Ft(z,$,tt,Z,ct){var wt=typeof z;(wt==="undefined"||wt==="boolean")&&(z=null);var ft=!1;if(z===null)ft=!0;else switch(wt){case"bigint":case"string":case"number":ft=!0;break;case"object":switch(z.$$typeof){case d:case t:ft=!0;break;case m:return ft=z._init,Ft(ft(z._payload),$,tt,Z,ct)}}if(ft)return ct=ct(z),ft=Z===""?"."+yt(z,0):Z,k(ct)?(tt="",ft!=null&&(tt=ft.replace(et,"$&/")+"/"),Ft(ct,$,tt,"",function(ts){return ts})):ct!=null&&(W(ct)&&(ct=Q(ct,tt+(ct.key==null||z&&z.key===ct.key?"":(""+ct.key).replace(et,"$&/")+"/")+ft)),$.push(ct)),1;ft=0;var kt=Z===""?".":Z+":";if(k(z))for(var Vt=0;Vt<z.length;Vt++)Z=z[Vt],wt=kt+yt(Z,Vt),ft+=Ft(Z,$,tt,wt,ct);else if(Vt=v(z),typeof Vt=="function")for(z=Vt.call(z),Vt=0;!(Z=z.next()).done;)Z=Z.value,wt=kt+yt(Z,Vt++),ft+=Ft(Z,$,tt,wt,ct);else if(wt==="object"){if(typeof z.then=="function")return Ft(vt(z),$,tt,Z,ct);throw $=String(z),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return ft}function H(z,$,tt){if(z==null)return z;var Z=[],ct=0;return Ft(z,Z,"","",function(wt){return $.call(tt,wt,ct++)}),Z}function V(z){if(z._status===-1){var $=z._result;$=$(),$.then(function(tt){(z._status===0||z._status===-1)&&(z._status=1,z._result=tt)},function(tt){(z._status===0||z._status===-1)&&(z._status=2,z._result=tt)}),z._status===-1&&(z._status=0,z._result=$)}if(z._status===1)return z._result.default;throw z._result}var ot=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function Dt(){}return Et.Children={map:H,forEach:function(z,$,tt){H(z,function(){$.apply(this,arguments)},tt)},count:function(z){var $=0;return H(z,function(){$++}),$},toArray:function(z){return H(z,function($){return $})||[]},only:function(z){if(!W(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Et.Component=R,Et.Fragment=e,Et.Profiler=r,Et.PureComponent=D,Et.StrictMode=s,Et.Suspense=f,Et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,Et.__COMPILER_RUNTIME={__proto__:null,c:function(z){return O.H.useMemoCache(z)}},Et.cache=function(z){return function(){return z.apply(null,arguments)}},Et.cloneElement=function(z,$,tt){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var Z=x({},z.props),ct=z.key,wt=void 0;if($!=null)for(ft in $.ref!==void 0&&(wt=void 0),$.key!==void 0&&(ct=""+$.key),$)!B.call($,ft)||ft==="key"||ft==="__self"||ft==="__source"||ft==="ref"&&$.ref===void 0||(Z[ft]=$[ft]);var ft=arguments.length-2;if(ft===1)Z.children=tt;else if(1<ft){for(var kt=Array(ft),Vt=0;Vt<ft;Vt++)kt[Vt]=arguments[Vt+2];Z.children=kt}return G(z.type,ct,void 0,void 0,wt,Z)},Et.createContext=function(z){return z={$$typeof:u,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:l,_context:z},z},Et.createElement=function(z,$,tt){var Z,ct={},wt=null;if($!=null)for(Z in $.key!==void 0&&(wt=""+$.key),$)B.call($,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(ct[Z]=$[Z]);var ft=arguments.length-2;if(ft===1)ct.children=tt;else if(1<ft){for(var kt=Array(ft),Vt=0;Vt<ft;Vt++)kt[Vt]=arguments[Vt+2];ct.children=kt}if(z&&z.defaultProps)for(Z in ft=z.defaultProps,ft)ct[Z]===void 0&&(ct[Z]=ft[Z]);return G(z,wt,void 0,void 0,null,ct)},Et.createRef=function(){return{current:null}},Et.forwardRef=function(z){return{$$typeof:h,render:z}},Et.isValidElement=W,Et.lazy=function(z){return{$$typeof:m,_payload:{_status:-1,_result:z},_init:V}},Et.memo=function(z,$){return{$$typeof:p,type:z,compare:$===void 0?null:$}},Et.startTransition=function(z){var $=O.T,tt={};O.T=tt;try{var Z=z(),ct=O.S;ct!==null&&ct(tt,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(Dt,ot)}catch(wt){ot(wt)}finally{O.T=$}},Et.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},Et.use=function(z){return O.H.use(z)},Et.useActionState=function(z,$,tt){return O.H.useActionState(z,$,tt)},Et.useCallback=function(z,$){return O.H.useCallback(z,$)},Et.useContext=function(z){return O.H.useContext(z)},Et.useDebugValue=function(){},Et.useDeferredValue=function(z,$){return O.H.useDeferredValue(z,$)},Et.useEffect=function(z,$,tt){var Z=O.H;if(typeof tt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Z.useEffect(z,$)},Et.useId=function(){return O.H.useId()},Et.useImperativeHandle=function(z,$,tt){return O.H.useImperativeHandle(z,$,tt)},Et.useInsertionEffect=function(z,$){return O.H.useInsertionEffect(z,$)},Et.useLayoutEffect=function(z,$){return O.H.useLayoutEffect(z,$)},Et.useMemo=function(z,$){return O.H.useMemo(z,$)},Et.useOptimistic=function(z,$){return O.H.useOptimistic(z,$)},Et.useReducer=function(z,$,tt){return O.H.useReducer(z,$,tt)},Et.useRef=function(z){return O.H.useRef(z)},Et.useState=function(z){return O.H.useState(z)},Et.useSyncExternalStore=function(z,$,tt){return O.H.useSyncExternalStore(z,$,tt)},Et.useTransition=function(){return O.H.useTransition()},Et.version="19.1.0",Et}var nw;function Tm(){return nw||(nw=1,Kb.exports=IR()),Kb.exports}var Ht=Tm(),Qb={exports:{}},zh={},Wb={exports:{}},Zb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sw;function FR(){return sw||(sw=1,function(d){function t(H,V){var ot=H.length;H.push(V);t:for(;0<ot;){var Dt=ot-1>>>1,z=H[Dt];if(0<r(z,V))H[Dt]=V,H[ot]=z,ot=Dt;else break t}}function e(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var V=H[0],ot=H.pop();if(ot!==V){H[0]=ot;t:for(var Dt=0,z=H.length,$=z>>>1;Dt<$;){var tt=2*(Dt+1)-1,Z=H[tt],ct=tt+1,wt=H[ct];if(0>r(Z,ot))ct<z&&0>r(wt,Z)?(H[Dt]=wt,H[ct]=ot,Dt=ct):(H[Dt]=Z,H[tt]=ot,Dt=tt);else if(ct<z&&0>r(wt,ot))H[Dt]=wt,H[ct]=ot,Dt=ct;else break t}}return V}function r(H,V){var ot=H.sortIndex-V.sortIndex;return ot!==0?ot:H.id-V.id}if(d.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;d.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();d.unstable_now=function(){return u.now()-h}}var f=[],p=[],m=1,b=null,v=3,S=!1,x=!1,T=!1,R=!1,M=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function k(H){for(var V=e(p);V!==null;){if(V.callback===null)s(p);else if(V.startTime<=H)s(p),V.sortIndex=V.expirationTime,t(f,V);else break;V=e(p)}}function O(H){if(T=!1,k(H),!x)if(e(f)!==null)x=!0,B||(B=!0,yt());else{var V=e(p);V!==null&&Ft(O,V.startTime-H)}}var B=!1,G=-1,Q=5,W=-1;function nt(){return R?!0:!(d.unstable_now()-W<Q)}function et(){if(R=!1,B){var H=d.unstable_now();W=H;var V=!0;try{t:{x=!1,T&&(T=!1,D(G),G=-1),S=!0;var ot=v;try{e:{for(k(H),b=e(f);b!==null&&!(b.expirationTime>H&&nt());){var Dt=b.callback;if(typeof Dt=="function"){b.callback=null,v=b.priorityLevel;var z=Dt(b.expirationTime<=H);if(H=d.unstable_now(),typeof z=="function"){b.callback=z,k(H),V=!0;break e}b===e(f)&&s(f),k(H)}else s(f);b=e(f)}if(b!==null)V=!0;else{var $=e(p);$!==null&&Ft(O,$.startTime-H),V=!1}}break t}finally{b=null,v=ot,S=!1}V=void 0}}finally{V?yt():B=!1}}}var yt;if(typeof N=="function")yt=function(){N(et)};else if(typeof MessageChannel<"u"){var Lt=new MessageChannel,vt=Lt.port2;Lt.port1.onmessage=et,yt=function(){vt.postMessage(null)}}else yt=function(){M(et,0)};function Ft(H,V){G=M(function(){H(d.unstable_now())},V)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(H){H.callback=null},d.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<H?Math.floor(1e3/H):5},d.unstable_getCurrentPriorityLevel=function(){return v},d.unstable_next=function(H){switch(v){case 1:case 2:case 3:var V=3;break;default:V=v}var ot=v;v=V;try{return H()}finally{v=ot}},d.unstable_requestPaint=function(){R=!0},d.unstable_runWithPriority=function(H,V){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ot=v;v=H;try{return V()}finally{v=ot}},d.unstable_scheduleCallback=function(H,V,ot){var Dt=d.unstable_now();switch(typeof ot=="object"&&ot!==null?(ot=ot.delay,ot=typeof ot=="number"&&0<ot?Dt+ot:Dt):ot=Dt,H){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=ot+z,H={id:m++,callback:V,priorityLevel:H,startTime:ot,expirationTime:z,sortIndex:-1},ot>Dt?(H.sortIndex=ot,t(p,H),e(f)===null&&H===e(p)&&(T?(D(G),G=-1):T=!0,Ft(O,ot-Dt))):(H.sortIndex=z,t(f,H),x||S||(x=!0,B||(B=!0,yt()))),H},d.unstable_shouldYield=nt,d.unstable_wrapCallback=function(H){var V=v;return function(){var ot=v;v=V;try{return H.apply(this,arguments)}finally{v=ot}}}}(Zb)),Zb}var aw;function GR(){return aw||(aw=1,Wb.exports=FR()),Wb.exports}var Jb={exports:{}},oi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rw;function jR(){if(rw)return oi;rw=1;var d=Tm();function t(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)p+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var s={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(f,p,m){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:b==null?null:""+b,children:f,containerInfo:p,implementation:m}}var u=d.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return oi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,oi.createPortal=function(f,p){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return l(f,p,null,m)},oi.flushSync=function(f){var p=u.T,m=s.p;try{if(u.T=null,s.p=2,f)return f()}finally{u.T=p,s.p=m,s.d.f()}},oi.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(f,p))},oi.prefetchDNS=function(f){typeof f=="string"&&s.d.D(f)},oi.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var m=p.as,b=h(m,p.crossOrigin),v=typeof p.integrity=="string"?p.integrity:void 0,S=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;m==="style"?s.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:v,fetchPriority:S}):m==="script"&&s.d.X(f,{crossOrigin:b,integrity:v,fetchPriority:S,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},oi.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var m=h(p.as,p.crossOrigin);s.d.M(f,{crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(f)},oi.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var m=p.as,b=h(m,p.crossOrigin);s.d.L(f,m,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},oi.preloadModule=function(f,p){if(typeof f=="string")if(p){var m=h(p.as,p.crossOrigin);s.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(f)},oi.requestFormReset=function(f){s.d.r(f)},oi.unstable_batchedUpdates=function(f,p){return f(p)},oi.useFormState=function(f,p,m){return u.H.useFormState(f,p,m)},oi.useFormStatus=function(){return u.H.useHostTransitionStatus()},oi.version="19.1.0",oi}var lw;function qR(){if(lw)return Jb.exports;lw=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(t){console.error(t)}}return d(),Jb.exports=jR(),Jb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ow;function VR(){if(ow)return zh;ow=1;var d=GR(),t=Tm(),e=qR();function s(i){var n="https://react.dev/errors/"+i;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var n=i,a=i;if(i.alternate)for(;n.return;)n=n.return;else{i=n;do n=i,(n.flags&4098)!==0&&(a=n.return),i=n.return;while(i)}return n.tag===3?a:null}function u(i){if(i.tag===13){var n=i.memoizedState;if(n===null&&(i=i.alternate,i!==null&&(n=i.memoizedState)),n!==null)return n.dehydrated}return null}function h(i){if(l(i)!==i)throw Error(s(188))}function f(i){var n=i.alternate;if(!n){if(n=l(i),n===null)throw Error(s(188));return n!==i?null:i}for(var a=i,o=n;;){var g=a.return;if(g===null)break;var y=g.alternate;if(y===null){if(o=g.return,o!==null){a=o;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===a)return h(g),i;if(y===o)return h(g),n;y=y.sibling}throw Error(s(188))}if(a.return!==o.return)a=g,o=y;else{for(var _=!1,C=g.child;C;){if(C===a){_=!0,a=g,o=y;break}if(C===o){_=!0,o=g,a=y;break}C=C.sibling}if(!_){for(C=y.child;C;){if(C===a){_=!0,a=y,o=g;break}if(C===o){_=!0,o=y,a=g;break}C=C.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:n}function p(i){var n=i.tag;if(n===5||n===26||n===27||n===6)return i;for(i=i.child;i!==null;){if(n=p(i),n!==null)return n;i=i.sibling}return null}var m=Object.assign,b=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),D=Symbol.for("react.consumer"),N=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),nt=Symbol.for("react.memo_cache_sentinel"),et=Symbol.iterator;function yt(i){return i===null||typeof i!="object"?null:(i=et&&i[et]||i["@@iterator"],typeof i=="function"?i:null)}var Lt=Symbol.for("react.client.reference");function vt(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===Lt?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case x:return"Fragment";case R:return"Profiler";case T:return"StrictMode";case O:return"Suspense";case B:return"SuspenseList";case W:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case S:return"Portal";case N:return(i.displayName||"Context")+".Provider";case D:return(i._context.displayName||"Context")+".Consumer";case k:var n=i.render;return i=i.displayName,i||(i=n.displayName||n.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case G:return n=i.displayName||null,n!==null?n:vt(i.type)||"Memo";case Q:n=i._payload,i=i._init;try{return vt(i(n))}catch{}}return null}var Ft=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ot={pending:!1,data:null,method:null,action:null},Dt=[],z=-1;function $(i){return{current:i}}function tt(i){0>z||(i.current=Dt[z],Dt[z]=null,z--)}function Z(i,n){z++,Dt[z]=i.current,i.current=n}var ct=$(null),wt=$(null),ft=$(null),kt=$(null);function Vt(i,n){switch(Z(ft,n),Z(wt,i),Z(ct,null),n.nodeType){case 9:case 11:i=(i=n.documentElement)&&(i=i.namespaceURI)?C1(i):0;break;default:if(i=n.tagName,n=n.namespaceURI)n=C1(n),i=R1(n,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}tt(ct),Z(ct,i)}function ts(){tt(ct),tt(wt),tt(ft)}function zu(i){i.memoizedState!==null&&Z(kt,i);var n=ct.current,a=R1(n,i.type);n!==a&&(Z(wt,i),Z(ct,a))}function Da(i){wt.current===i&&(tt(ct),tt(wt)),kt.current===i&&(tt(kt),Mh._currentValue=ot)}var Xr=Object.prototype.hasOwnProperty,Oo=d.unstable_scheduleCallback,Pu=d.unstable_cancelCallback,gx=d.unstable_shouldYield,px=d.unstable_requestPaint,es=d.unstable_now,mx=d.unstable_getCurrentPriorityLevel,lA=d.unstable_ImmediatePriority,oA=d.unstable_UserBlockingPriority,Xf=d.unstable_NormalPriority,yx=d.unstable_LowPriority,cA=d.unstable_IdlePriority,bx=d.log,vx=d.unstable_setDisableYieldValue,Bu=null,Bi=null;function Oa(i){if(typeof bx=="function"&&vx(i),Bi&&typeof Bi.setStrictMode=="function")try{Bi.setStrictMode(Bu,i)}catch{}}var Hi=Math.clz32?Math.clz32:_x,Ax=Math.log,Sx=Math.LN2;function _x(i){return i>>>=0,i===0?32:31-(Ax(i)/Sx|0)|0}var Yf=256,$f=4194304;function Yr(i){var n=i&42;if(n!==0)return n;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Kf(i,n,a){var o=i.pendingLanes;if(o===0)return 0;var g=0,y=i.suspendedLanes,_=i.pingedLanes;i=i.warmLanes;var C=o&134217727;return C!==0?(o=C&~y,o!==0?g=Yr(o):(_&=C,_!==0?g=Yr(_):a||(a=C&~i,a!==0&&(g=Yr(a))))):(C=o&~y,C!==0?g=Yr(C):_!==0?g=Yr(_):a||(a=o&~i,a!==0&&(g=Yr(a)))),g===0?0:n!==0&&n!==g&&(n&y)===0&&(y=g&-g,a=n&-n,y>=a||y===32&&(a&4194048)!==0)?n:g}function Hu(i,n){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&n)===0}function wx(i,n){switch(i){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uA(){var i=Yf;return Yf<<=1,(Yf&4194048)===0&&(Yf=256),i}function hA(){var i=$f;return $f<<=1,($f&62914560)===0&&($f=4194304),i}function Pm(i){for(var n=[],a=0;31>a;a++)n.push(i);return n}function Uu(i,n){i.pendingLanes|=n,n!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Ex(i,n,a,o,g,y){var _=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var C=i.entanglements,L=i.expirationTimes,F=i.hiddenUpdates;for(a=_&~a;0<a;){var X=31-Hi(a),K=1<<X;C[X]=0,L[X]=-1;var j=F[X];if(j!==null)for(F[X]=null,X=0;X<j.length;X++){var q=j[X];q!==null&&(q.lane&=-536870913)}a&=~K}o!==0&&dA(i,o,0),y!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=y&~(_&~n))}function dA(i,n,a){i.pendingLanes|=n,i.suspendedLanes&=~n;var o=31-Hi(n);i.entangledLanes|=n,i.entanglements[o]=i.entanglements[o]|1073741824|a&4194090}function fA(i,n){var a=i.entangledLanes|=n;for(i=i.entanglements;a;){var o=31-Hi(a),g=1<<o;g&n|i[o]&n&&(i[o]|=n),a&=~g}}function Bm(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Hm(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function gA(){var i=V.p;return i!==0?i:(i=window.event,i===void 0?32:Y1(i.type))}function Tx(i,n){var a=V.p;try{return V.p=i,n()}finally{V.p=a}}var Na=Math.random().toString(36).slice(2),ri="__reactFiber$"+Na,xi="__reactProps$"+Na,No="__reactContainer$"+Na,Um="__reactEvents$"+Na,xx="__reactListeners$"+Na,Cx="__reactHandles$"+Na,pA="__reactResources$"+Na,Iu="__reactMarker$"+Na;function Im(i){delete i[ri],delete i[xi],delete i[Um],delete i[xx],delete i[Cx]}function Lo(i){var n=i[ri];if(n)return n;for(var a=i.parentNode;a;){if(n=a[No]||a[ri]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(i=N1(i);i!==null;){if(a=i[ri])return a;i=N1(i)}return n}i=a,a=i.parentNode}return null}function ko(i){if(i=i[ri]||i[No]){var n=i.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return i}return null}function Fu(i){var n=i.tag;if(n===5||n===26||n===27||n===6)return i.stateNode;throw Error(s(33))}function zo(i){var n=i[pA];return n||(n=i[pA]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Be(i){i[Iu]=!0}var mA=new Set,yA={};function $r(i,n){Po(i,n),Po(i+"Capture",n)}function Po(i,n){for(yA[i]=n,i=0;i<n.length;i++)mA.add(n[i])}var Rx=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bA={},vA={};function Mx(i){return Xr.call(vA,i)?!0:Xr.call(bA,i)?!1:Rx.test(i)?vA[i]=!0:(bA[i]=!0,!1)}function Qf(i,n,a){if(Mx(n))if(a===null)i.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){i.removeAttribute(n);return}}i.setAttribute(n,""+a)}}function Wf(i,n,a){if(a===null)i.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(n);return}i.setAttribute(n,""+a)}}function Ms(i,n,a,o){if(o===null)i.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(n,a,""+o)}}var Fm,AA;function Bo(i){if(Fm===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);Fm=n&&n[1]||"",AA=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fm+i+AA}var Gm=!1;function jm(i,n){if(!i||Gm)return"";Gm=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(q){var j=q}Reflect.construct(i,[],K)}else{try{K.call()}catch(q){j=q}i.call(K.prototype)}}else{try{throw Error()}catch(q){j=q}(K=i())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(q){if(q&&j&&typeof q.stack=="string")return[q.stack,j.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=o.DetermineComponentFrameRoot(),_=y[0],C=y[1];if(_&&C){var L=_.split(`
`),F=C.split(`
`);for(g=o=0;o<L.length&&!L[o].includes("DetermineComponentFrameRoot");)o++;for(;g<F.length&&!F[g].includes("DetermineComponentFrameRoot");)g++;if(o===L.length||g===F.length)for(o=L.length-1,g=F.length-1;1<=o&&0<=g&&L[o]!==F[g];)g--;for(;1<=o&&0<=g;o--,g--)if(L[o]!==F[g]){if(o!==1||g!==1)do if(o--,g--,0>g||L[o]!==F[g]){var X=`
`+L[o].replace(" at new "," at ");return i.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",i.displayName)),X}while(1<=o&&0<=g);break}}}finally{Gm=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?Bo(a):""}function Dx(i){switch(i.tag){case 26:case 27:case 5:return Bo(i.type);case 16:return Bo("Lazy");case 13:return Bo("Suspense");case 19:return Bo("SuspenseList");case 0:case 15:return jm(i.type,!1);case 11:return jm(i.type.render,!1);case 1:return jm(i.type,!0);case 31:return Bo("Activity");default:return""}}function SA(i){try{var n="";do n+=Dx(i),i=i.return;while(i);return n}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function fn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function _A(i){var n=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Ox(i){var n=_A(i)?"checked":"value",a=Object.getOwnPropertyDescriptor(i.constructor.prototype,n),o=""+i[n];if(!i.hasOwnProperty(n)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var g=a.get,y=a.set;return Object.defineProperty(i,n,{configurable:!0,get:function(){return g.call(this)},set:function(_){o=""+_,y.call(this,_)}}),Object.defineProperty(i,n,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){i._valueTracker=null,delete i[n]}}}}function Zf(i){i._valueTracker||(i._valueTracker=Ox(i))}function wA(i){if(!i)return!1;var n=i._valueTracker;if(!n)return!0;var a=n.getValue(),o="";return i&&(o=_A(i)?i.checked?"true":"false":i.value),i=o,i!==a?(n.setValue(i),!0):!1}function Jf(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Nx=/[\n"\\]/g;function gn(i){return i.replace(Nx,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function qm(i,n,a,o,g,y,_,C){i.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?i.type=_:i.removeAttribute("type"),n!=null?_==="number"?(n===0&&i.value===""||i.value!=n)&&(i.value=""+fn(n)):i.value!==""+fn(n)&&(i.value=""+fn(n)):_!=="submit"&&_!=="reset"||i.removeAttribute("value"),n!=null?Vm(i,_,fn(n)):a!=null?Vm(i,_,fn(a)):o!=null&&i.removeAttribute("value"),g==null&&y!=null&&(i.defaultChecked=!!y),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.name=""+fn(C):i.removeAttribute("name")}function EA(i,n,a,o,g,y,_,C){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),n!=null||a!=null){if(!(y!=="submit"&&y!=="reset"||n!=null))return;a=a!=null?""+fn(a):"",n=n!=null?""+fn(n):a,C||n===i.value||(i.value=n),i.defaultValue=n}o=o??g,o=typeof o!="function"&&typeof o!="symbol"&&!!o,i.checked=C?i.checked:!!o,i.defaultChecked=!!o,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.name=_)}function Vm(i,n,a){n==="number"&&Jf(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function Ho(i,n,a,o){if(i=i.options,n){n={};for(var g=0;g<a.length;g++)n["$"+a[g]]=!0;for(a=0;a<i.length;a++)g=n.hasOwnProperty("$"+i[a].value),i[a].selected!==g&&(i[a].selected=g),g&&o&&(i[a].defaultSelected=!0)}else{for(a=""+fn(a),n=null,g=0;g<i.length;g++){if(i[g].value===a){i[g].selected=!0,o&&(i[g].defaultSelected=!0);return}n!==null||i[g].disabled||(n=i[g])}n!==null&&(n.selected=!0)}}function TA(i,n,a){if(n!=null&&(n=""+fn(n),n!==i.value&&(i.value=n),a==null)){i.defaultValue!==n&&(i.defaultValue=n);return}i.defaultValue=a!=null?""+fn(a):""}function xA(i,n,a,o){if(n==null){if(o!=null){if(a!=null)throw Error(s(92));if(Ft(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),n=a}a=fn(n),i.defaultValue=a,o=i.textContent,o===a&&o!==""&&o!==null&&(i.value=o)}function Uo(i,n){if(n){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=n;return}}i.textContent=n}var Lx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function CA(i,n,a){var o=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?i.setProperty(n,""):n==="float"?i.cssFloat="":i[n]="":o?i.setProperty(n,a):typeof a!="number"||a===0||Lx.has(n)?n==="float"?i.cssFloat=a:i[n]=(""+a).trim():i[n]=a+"px"}function RA(i,n,a){if(n!=null&&typeof n!="object")throw Error(s(62));if(i=i.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="");for(var g in n)o=n[g],n.hasOwnProperty(g)&&a[g]!==o&&CA(i,g,o)}else for(var y in n)n.hasOwnProperty(y)&&CA(i,y,n[y])}function Xm(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kx=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function tg(i){return zx.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Ym=null;function $m(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Io=null,Fo=null;function MA(i){var n=ko(i);if(n&&(i=n.stateNode)){var a=i[xi]||null;t:switch(i=n.stateNode,n.type){case"input":if(qm(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+gn(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var o=a[n];if(o!==i&&o.form===i.form){var g=o[xi]||null;if(!g)throw Error(s(90));qm(o,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(n=0;n<a.length;n++)o=a[n],o.form===i.form&&wA(o)}break t;case"textarea":TA(i,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&Ho(i,!!a.multiple,n,!1)}}}var Km=!1;function DA(i,n,a){if(Km)return i(n,a);Km=!0;try{var o=i(n);return o}finally{if(Km=!1,(Io!==null||Fo!==null)&&(Ug(),Io&&(n=Io,i=Fo,Fo=Io=null,MA(n),i)))for(n=0;n<i.length;n++)MA(i[n])}}function Gu(i,n){var a=i.stateNode;if(a===null)return null;var o=a[xi]||null;if(o===null)return null;a=o[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(i=i.type,o=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!o;break t;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,n,typeof a));return a}var Ds=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qm=!1;if(Ds)try{var ju={};Object.defineProperty(ju,"passive",{get:function(){Qm=!0}}),window.addEventListener("test",ju,ju),window.removeEventListener("test",ju,ju)}catch{Qm=!1}var La=null,Wm=null,eg=null;function OA(){if(eg)return eg;var i,n=Wm,a=n.length,o,g="value"in La?La.value:La.textContent,y=g.length;for(i=0;i<a&&n[i]===g[i];i++);var _=a-i;for(o=1;o<=_&&n[a-o]===g[y-o];o++);return eg=g.slice(i,1<o?1-o:void 0)}function ig(i){var n=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&n===13&&(i=13)):i=n,i===10&&(i=13),32<=i||i===13?i:0}function ng(){return!0}function NA(){return!1}function Ci(i){function n(a,o,g,y,_){this._reactName=a,this._targetInst=g,this.type=o,this.nativeEvent=y,this.target=_,this.currentTarget=null;for(var C in i)i.hasOwnProperty(C)&&(a=i[C],this[C]=a?a(y):y[C]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?ng:NA,this.isPropagationStopped=NA,this}return m(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ng)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ng)},persist:function(){},isPersistent:ng}),n}var Kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sg=Ci(Kr),qu=m({},Kr,{view:0,detail:0}),Px=Ci(qu),Zm,Jm,Vu,ag=m({},qu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ey,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Vu&&(Vu&&i.type==="mousemove"?(Zm=i.screenX-Vu.screenX,Jm=i.screenY-Vu.screenY):Jm=Zm=0,Vu=i),Zm)},movementY:function(i){return"movementY"in i?i.movementY:Jm}}),LA=Ci(ag),Bx=m({},ag,{dataTransfer:0}),Hx=Ci(Bx),Ux=m({},qu,{relatedTarget:0}),ty=Ci(Ux),Ix=m({},Kr,{animationName:0,elapsedTime:0,pseudoElement:0}),Fx=Ci(Ix),Gx=m({},Kr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),jx=Ci(Gx),qx=m({},Kr,{data:0}),kA=Ci(qx),Vx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $x(i){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(i):(i=Yx[i])?!!n[i]:!1}function ey(){return $x}var Kx=m({},qu,{key:function(i){if(i.key){var n=Vx[i.key]||i.key;if(n!=="Unidentified")return n}return i.type==="keypress"?(i=ig(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Xx[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ey,charCode:function(i){return i.type==="keypress"?ig(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ig(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Qx=Ci(Kx),Wx=m({},ag,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zA=Ci(Wx),Zx=m({},qu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ey}),Jx=Ci(Zx),tC=m({},Kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),eC=Ci(tC),iC=m({},ag,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),nC=Ci(iC),sC=m({},Kr,{newState:0,oldState:0}),aC=Ci(sC),rC=[9,13,27,32],iy=Ds&&"CompositionEvent"in window,Xu=null;Ds&&"documentMode"in document&&(Xu=document.documentMode);var lC=Ds&&"TextEvent"in window&&!Xu,PA=Ds&&(!iy||Xu&&8<Xu&&11>=Xu),BA=" ",HA=!1;function UA(i,n){switch(i){case"keyup":return rC.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function IA(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Go=!1;function oC(i,n){switch(i){case"compositionend":return IA(n);case"keypress":return n.which!==32?null:(HA=!0,BA);case"textInput":return i=n.data,i===BA&&HA?null:i;default:return null}}function cC(i,n){if(Go)return i==="compositionend"||!iy&&UA(i,n)?(i=OA(),eg=Wm=La=null,Go=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return PA&&n.locale!=="ko"?null:n.data;default:return null}}var uC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function FA(i){var n=i&&i.nodeName&&i.nodeName.toLowerCase();return n==="input"?!!uC[i.type]:n==="textarea"}function GA(i,n,a,o){Io?Fo?Fo.push(o):Fo=[o]:Io=o,n=Vg(n,"onChange"),0<n.length&&(a=new sg("onChange","change",null,a,o),i.push({event:a,listeners:n}))}var Yu=null,$u=null;function hC(i){_1(i,0)}function rg(i){var n=Fu(i);if(wA(n))return i}function jA(i,n){if(i==="change")return n}var qA=!1;if(Ds){var ny;if(Ds){var sy="oninput"in document;if(!sy){var VA=document.createElement("div");VA.setAttribute("oninput","return;"),sy=typeof VA.oninput=="function"}ny=sy}else ny=!1;qA=ny&&(!document.documentMode||9<document.documentMode)}function XA(){Yu&&(Yu.detachEvent("onpropertychange",YA),$u=Yu=null)}function YA(i){if(i.propertyName==="value"&&rg($u)){var n=[];GA(n,$u,i,$m(i)),DA(hC,n)}}function dC(i,n,a){i==="focusin"?(XA(),Yu=n,$u=a,Yu.attachEvent("onpropertychange",YA)):i==="focusout"&&XA()}function fC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return rg($u)}function gC(i,n){if(i==="click")return rg(n)}function pC(i,n){if(i==="input"||i==="change")return rg(n)}function mC(i,n){return i===n&&(i!==0||1/i===1/n)||i!==i&&n!==n}var Ui=typeof Object.is=="function"?Object.is:mC;function Ku(i,n){if(Ui(i,n))return!0;if(typeof i!="object"||i===null||typeof n!="object"||n===null)return!1;var a=Object.keys(i),o=Object.keys(n);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var g=a[o];if(!Xr.call(n,g)||!Ui(i[g],n[g]))return!1}return!0}function $A(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function KA(i,n){var a=$A(i);i=0;for(var o;a;){if(a.nodeType===3){if(o=i+a.textContent.length,i<=n&&o>=n)return{node:a,offset:n-i};i=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=$A(a)}}function QA(i,n){return i&&n?i===n?!0:i&&i.nodeType===3?!1:n&&n.nodeType===3?QA(i,n.parentNode):"contains"in i?i.contains(n):i.compareDocumentPosition?!!(i.compareDocumentPosition(n)&16):!1:!1}function WA(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var n=Jf(i.document);n instanceof i.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)i=n.contentWindow;else break;n=Jf(i.document)}return n}function ay(i){var n=i&&i.nodeName&&i.nodeName.toLowerCase();return n&&(n==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||n==="textarea"||i.contentEditable==="true")}var yC=Ds&&"documentMode"in document&&11>=document.documentMode,jo=null,ry=null,Qu=null,ly=!1;function ZA(i,n,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ly||jo==null||jo!==Jf(o)||(o=jo,"selectionStart"in o&&ay(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Qu&&Ku(Qu,o)||(Qu=o,o=Vg(ry,"onSelect"),0<o.length&&(n=new sg("onSelect","select",null,n,a),i.push({event:n,listeners:o}),n.target=jo)))}function Qr(i,n){var a={};return a[i.toLowerCase()]=n.toLowerCase(),a["Webkit"+i]="webkit"+n,a["Moz"+i]="moz"+n,a}var qo={animationend:Qr("Animation","AnimationEnd"),animationiteration:Qr("Animation","AnimationIteration"),animationstart:Qr("Animation","AnimationStart"),transitionrun:Qr("Transition","TransitionRun"),transitionstart:Qr("Transition","TransitionStart"),transitioncancel:Qr("Transition","TransitionCancel"),transitionend:Qr("Transition","TransitionEnd")},oy={},JA={};Ds&&(JA=document.createElement("div").style,"AnimationEvent"in window||(delete qo.animationend.animation,delete qo.animationiteration.animation,delete qo.animationstart.animation),"TransitionEvent"in window||delete qo.transitionend.transition);function Wr(i){if(oy[i])return oy[i];if(!qo[i])return i;var n=qo[i],a;for(a in n)if(n.hasOwnProperty(a)&&a in JA)return oy[i]=n[a];return i}var tS=Wr("animationend"),eS=Wr("animationiteration"),iS=Wr("animationstart"),bC=Wr("transitionrun"),vC=Wr("transitionstart"),AC=Wr("transitioncancel"),nS=Wr("transitionend"),sS=new Map,cy="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");cy.push("scrollEnd");function Ln(i,n){sS.set(i,n),$r(n,[i])}var aS=new WeakMap;function pn(i,n){if(typeof i=="object"&&i!==null){var a=aS.get(i);return a!==void 0?a:(n={value:i,source:n,stack:SA(n)},aS.set(i,n),n)}return{value:i,source:n,stack:SA(n)}}var mn=[],Vo=0,uy=0;function lg(){for(var i=Vo,n=uy=Vo=0;n<i;){var a=mn[n];mn[n++]=null;var o=mn[n];mn[n++]=null;var g=mn[n];mn[n++]=null;var y=mn[n];if(mn[n++]=null,o!==null&&g!==null){var _=o.pending;_===null?g.next=g:(g.next=_.next,_.next=g),o.pending=g}y!==0&&rS(a,g,y)}}function og(i,n,a,o){mn[Vo++]=i,mn[Vo++]=n,mn[Vo++]=a,mn[Vo++]=o,uy|=o,i.lanes|=o,i=i.alternate,i!==null&&(i.lanes|=o)}function hy(i,n,a,o){return og(i,n,a,o),cg(i)}function Xo(i,n){return og(i,null,null,n),cg(i)}function rS(i,n,a){i.lanes|=a;var o=i.alternate;o!==null&&(o.lanes|=a);for(var g=!1,y=i.return;y!==null;)y.childLanes|=a,o=y.alternate,o!==null&&(o.childLanes|=a),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(g=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,g&&n!==null&&(g=31-Hi(a),i=y.hiddenUpdates,o=i[g],o===null?i[g]=[n]:o.push(n),n.lane=a|536870912),y):null}function cg(i){if(50<Sh)throw Sh=0,yb=null,Error(s(185));for(var n=i.return;n!==null;)i=n,n=i.return;return i.tag===3?i.stateNode:null}var Yo={};function SC(i,n,a,o){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ii(i,n,a,o){return new SC(i,n,a,o)}function dy(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Os(i,n){var a=i.alternate;return a===null?(a=Ii(i.tag,n,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=n,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,n=i.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function lS(i,n){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,n=a.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),i}function ug(i,n,a,o,g,y){var _=0;if(o=i,typeof i=="function")dy(i)&&(_=1);else if(typeof i=="string")_=wR(i,a,ct.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case W:return i=Ii(31,a,n,g),i.elementType=W,i.lanes=y,i;case x:return Zr(a.children,g,y,n);case T:_=8,g|=24;break;case R:return i=Ii(12,a,n,g|2),i.elementType=R,i.lanes=y,i;case O:return i=Ii(13,a,n,g),i.elementType=O,i.lanes=y,i;case B:return i=Ii(19,a,n,g),i.elementType=B,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case M:case N:_=10;break t;case D:_=9;break t;case k:_=11;break t;case G:_=14;break t;case Q:_=16,o=null;break t}_=29,a=Error(s(130,i===null?"null":typeof i,"")),o=null}return n=Ii(_,a,n,g),n.elementType=i,n.type=o,n.lanes=y,n}function Zr(i,n,a,o){return i=Ii(7,i,o,n),i.lanes=a,i}function fy(i,n,a){return i=Ii(6,i,null,n),i.lanes=a,i}function gy(i,n,a){return n=Ii(4,i.children!==null?i.children:[],i.key,n),n.lanes=a,n.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},n}var $o=[],Ko=0,hg=null,dg=0,yn=[],bn=0,Jr=null,Ns=1,Ls="";function tl(i,n){$o[Ko++]=dg,$o[Ko++]=hg,hg=i,dg=n}function oS(i,n,a){yn[bn++]=Ns,yn[bn++]=Ls,yn[bn++]=Jr,Jr=i;var o=Ns;i=Ls;var g=32-Hi(o)-1;o&=~(1<<g),a+=1;var y=32-Hi(n)+g;if(30<y){var _=g-g%5;y=(o&(1<<_)-1).toString(32),o>>=_,g-=_,Ns=1<<32-Hi(n)+g|a<<g|o,Ls=y+i}else Ns=1<<y|a<<g|o,Ls=i}function py(i){i.return!==null&&(tl(i,1),oS(i,1,0))}function my(i){for(;i===hg;)hg=$o[--Ko],$o[Ko]=null,dg=$o[--Ko],$o[Ko]=null;for(;i===Jr;)Jr=yn[--bn],yn[bn]=null,Ls=yn[--bn],yn[bn]=null,Ns=yn[--bn],yn[bn]=null}var pi=null,pe=null,jt=!1,el=null,is=!1,yy=Error(s(519));function il(i){var n=Error(s(418,""));throw Ju(pn(n,i)),yy}function cS(i){var n=i.stateNode,a=i.type,o=i.memoizedProps;switch(n[ri]=i,n[xi]=o,a){case"dialog":Nt("cancel",n),Nt("close",n);break;case"iframe":case"object":case"embed":Nt("load",n);break;case"video":case"audio":for(a=0;a<wh.length;a++)Nt(wh[a],n);break;case"source":Nt("error",n);break;case"img":case"image":case"link":Nt("error",n),Nt("load",n);break;case"details":Nt("toggle",n);break;case"input":Nt("invalid",n),EA(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),Zf(n);break;case"select":Nt("invalid",n);break;case"textarea":Nt("invalid",n),xA(n,o.value,o.defaultValue,o.children),Zf(n)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||o.suppressHydrationWarning===!0||x1(n.textContent,a)?(o.popover!=null&&(Nt("beforetoggle",n),Nt("toggle",n)),o.onScroll!=null&&Nt("scroll",n),o.onScrollEnd!=null&&Nt("scrollend",n),o.onClick!=null&&(n.onclick=Xg),n=!0):n=!1,n||il(i)}function uS(i){for(pi=i.return;pi;)switch(pi.tag){case 5:case 13:is=!1;return;case 27:case 3:is=!0;return;default:pi=pi.return}}function Wu(i){if(i!==pi)return!1;if(!jt)return uS(i),jt=!0,!1;var n=i.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||Lb(i.type,i.memoizedProps)),a=!a),a&&pe&&il(i),uS(i),n===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));t:{for(i=i.nextSibling,n=0;i;){if(i.nodeType===8)if(a=i.data,a==="/$"){if(n===0){pe=zn(i.nextSibling);break t}n--}else a!=="$"&&a!=="$!"&&a!=="$?"||n++;i=i.nextSibling}pe=null}}else n===27?(n=pe,Ka(i.type)?(i=Bb,Bb=null,pe=i):pe=n):pe=pi?zn(i.stateNode.nextSibling):null;return!0}function Zu(){pe=pi=null,jt=!1}function hS(){var i=el;return i!==null&&(Di===null?Di=i:Di.push.apply(Di,i),el=null),i}function Ju(i){el===null?el=[i]:el.push(i)}var by=$(null),nl=null,ks=null;function ka(i,n,a){Z(by,n._currentValue),n._currentValue=a}function zs(i){i._currentValue=by.current,tt(by)}function vy(i,n,a){for(;i!==null;){var o=i.alternate;if((i.childLanes&n)!==n?(i.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),i===a)break;i=i.return}}function Ay(i,n,a,o){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var y=g.dependencies;if(y!==null){var _=g.child;y=y.firstContext;t:for(;y!==null;){var C=y;y=g;for(var L=0;L<n.length;L++)if(C.context===n[L]){y.lanes|=a,C=y.alternate,C!==null&&(C.lanes|=a),vy(y.return,a,i),o||(_=null);break t}y=C.next}}else if(g.tag===18){if(_=g.return,_===null)throw Error(s(341));_.lanes|=a,y=_.alternate,y!==null&&(y.lanes|=a),vy(_,a,i),_=null}else _=g.child;if(_!==null)_.return=g;else for(_=g;_!==null;){if(_===i){_=null;break}if(g=_.sibling,g!==null){g.return=_.return,_=g;break}_=_.return}g=_}}function th(i,n,a,o){i=null;for(var g=n,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var _=g.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var C=g.type;Ui(g.pendingProps.value,_.value)||(i!==null?i.push(C):i=[C])}}else if(g===kt.current){if(_=g.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(Mh):i=[Mh])}g=g.return}i!==null&&Ay(n,i,a,o),n.flags|=262144}function fg(i){for(i=i.firstContext;i!==null;){if(!Ui(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function sl(i){nl=i,ks=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function li(i){return dS(nl,i)}function gg(i,n){return nl===null&&sl(i),dS(i,n)}function dS(i,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},ks===null){if(i===null)throw Error(s(308));ks=n,i.dependencies={lanes:0,firstContext:n},i.flags|=524288}else ks=ks.next=n;return a}var _C=typeof AbortController<"u"?AbortController:function(){var i=[],n=this.signal={aborted:!1,addEventListener:function(a,o){i.push(o)}};this.abort=function(){n.aborted=!0,i.forEach(function(a){return a()})}},wC=d.unstable_scheduleCallback,EC=d.unstable_NormalPriority,De={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sy(){return{controller:new _C,data:new Map,refCount:0}}function eh(i){i.refCount--,i.refCount===0&&wC(EC,function(){i.controller.abort()})}var ih=null,_y=0,Qo=0,Wo=null;function TC(i,n){if(ih===null){var a=ih=[];_y=0,Qo=Eb(),Wo={status:"pending",value:void 0,then:function(o){a.push(o)}}}return _y++,n.then(fS,fS),n}function fS(){if(--_y===0&&ih!==null){Wo!==null&&(Wo.status="fulfilled");var i=ih;ih=null,Qo=0,Wo=null;for(var n=0;n<i.length;n++)(0,i[n])()}}function xC(i,n){var a=[],o={status:"pending",value:null,reason:null,then:function(g){a.push(g)}};return i.then(function(){o.status="fulfilled",o.value=n;for(var g=0;g<a.length;g++)(0,a[g])(n)},function(g){for(o.status="rejected",o.reason=g,g=0;g<a.length;g++)(0,a[g])(void 0)}),o}var gS=H.S;H.S=function(i,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&TC(i,n),gS!==null&&gS(i,n)};var al=$(null);function wy(){var i=al.current;return i!==null?i:se.pooledCache}function pg(i,n){n===null?Z(al,al.current):Z(al,n.pool)}function pS(){var i=wy();return i===null?null:{parent:De._currentValue,pool:i}}var nh=Error(s(460)),mS=Error(s(474)),mg=Error(s(542)),Ey={then:function(){}};function yS(i){return i=i.status,i==="fulfilled"||i==="rejected"}function yg(){}function bS(i,n,a){switch(a=i[a],a===void 0?i.push(n):a!==n&&(n.then(yg,yg),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw i=n.reason,AS(i),i;default:if(typeof n.status=="string")n.then(yg,yg);else{if(i=se,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=n,i.status="pending",i.then(function(o){if(n.status==="pending"){var g=n;g.status="fulfilled",g.value=o}},function(o){if(n.status==="pending"){var g=n;g.status="rejected",g.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw i=n.reason,AS(i),i}throw sh=n,nh}}var sh=null;function vS(){if(sh===null)throw Error(s(459));var i=sh;return sh=null,i}function AS(i){if(i===nh||i===mg)throw Error(s(483))}var za=!1;function Ty(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xy(i,n){i=i.updateQueue,n.updateQueue===i&&(n.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Pa(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ba(i,n,a){var o=i.updateQueue;if(o===null)return null;if(o=o.shared,(Yt&2)!==0){var g=o.pending;return g===null?n.next=n:(n.next=g.next,g.next=n),o.pending=n,n=cg(i),rS(i,null,a),n}return og(i,o,n,a),cg(i)}function ah(i,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var o=n.lanes;o&=i.pendingLanes,a|=o,n.lanes=a,fA(i,a)}}function Cy(i,n){var a=i.updateQueue,o=i.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var g=null,y=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};y===null?g=y=_:y=y.next=_,a=a.next}while(a!==null);y===null?g=y=n:y=y.next=n}else g=y=n;a={baseState:o.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:o.shared,callbacks:o.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=n:i.next=n,a.lastBaseUpdate=n}var Ry=!1;function rh(){if(Ry){var i=Wo;if(i!==null)throw i}}function lh(i,n,a,o){Ry=!1;var g=i.updateQueue;za=!1;var y=g.firstBaseUpdate,_=g.lastBaseUpdate,C=g.shared.pending;if(C!==null){g.shared.pending=null;var L=C,F=L.next;L.next=null,_===null?y=F:_.next=F,_=L;var X=i.alternate;X!==null&&(X=X.updateQueue,C=X.lastBaseUpdate,C!==_&&(C===null?X.firstBaseUpdate=F:C.next=F,X.lastBaseUpdate=L))}if(y!==null){var K=g.baseState;_=0,X=F=L=null,C=y;do{var j=C.lane&-536870913,q=j!==C.lane;if(q?(Bt&j)===j:(o&j)===j){j!==0&&j===Qo&&(Ry=!0),X!==null&&(X=X.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});t:{var bt=i,gt=C;j=n;var Zt=a;switch(gt.tag){case 1:if(bt=gt.payload,typeof bt=="function"){K=bt.call(Zt,K,j);break t}K=bt;break t;case 3:bt.flags=bt.flags&-65537|128;case 0:if(bt=gt.payload,j=typeof bt=="function"?bt.call(Zt,K,j):bt,j==null)break t;K=m({},K,j);break t;case 2:za=!0}}j=C.callback,j!==null&&(i.flags|=64,q&&(i.flags|=8192),q=g.callbacks,q===null?g.callbacks=[j]:q.push(j))}else q={lane:j,tag:C.tag,payload:C.payload,callback:C.callback,next:null},X===null?(F=X=q,L=K):X=X.next=q,_|=j;if(C=C.next,C===null){if(C=g.shared.pending,C===null)break;q=C,C=q.next,q.next=null,g.lastBaseUpdate=q,g.shared.pending=null}}while(!0);X===null&&(L=K),g.baseState=L,g.firstBaseUpdate=F,g.lastBaseUpdate=X,y===null&&(g.shared.lanes=0),Va|=_,i.lanes=_,i.memoizedState=K}}function SS(i,n){if(typeof i!="function")throw Error(s(191,i));i.call(n)}function _S(i,n){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)SS(a[i],n)}var Zo=$(null),bg=$(0);function wS(i,n){i=Gs,Z(bg,i),Z(Zo,n),Gs=i|n.baseLanes}function My(){Z(bg,Gs),Z(Zo,Zo.current)}function Dy(){Gs=bg.current,tt(Zo),tt(bg)}var Ha=0,xt=null,Qt=null,we=null,vg=!1,Jo=!1,rl=!1,Ag=0,oh=0,tc=null,CC=0;function be(){throw Error(s(321))}function Oy(i,n){if(n===null)return!1;for(var a=0;a<n.length&&a<i.length;a++)if(!Ui(i[a],n[a]))return!1;return!0}function Ny(i,n,a,o,g,y){return Ha=y,xt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,H.H=i===null||i.memoizedState===null?r_:l_,rl=!1,y=a(o,g),rl=!1,Jo&&(y=TS(n,a,o,g)),ES(i),y}function ES(i){H.H=xg;var n=Qt!==null&&Qt.next!==null;if(Ha=0,we=Qt=xt=null,vg=!1,oh=0,tc=null,n)throw Error(s(300));i===null||He||(i=i.dependencies,i!==null&&fg(i)&&(He=!0))}function TS(i,n,a,o){xt=i;var g=0;do{if(Jo&&(tc=null),oh=0,Jo=!1,25<=g)throw Error(s(301));if(g+=1,we=Qt=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}H.H=kC,y=n(a,o)}while(Jo);return y}function RC(){var i=H.H,n=i.useState()[0];return n=typeof n.then=="function"?ch(n):n,i=i.useState()[0],(Qt!==null?Qt.memoizedState:null)!==i&&(xt.flags|=1024),n}function Ly(){var i=Ag!==0;return Ag=0,i}function ky(i,n,a){n.updateQueue=i.updateQueue,n.flags&=-2053,i.lanes&=~a}function zy(i){if(vg){for(i=i.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}vg=!1}Ha=0,we=Qt=xt=null,Jo=!1,oh=Ag=0,tc=null}function Ri(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return we===null?xt.memoizedState=we=i:we=we.next=i,we}function Ee(){if(Qt===null){var i=xt.alternate;i=i!==null?i.memoizedState:null}else i=Qt.next;var n=we===null?xt.memoizedState:we.next;if(n!==null)we=n,Qt=i;else{if(i===null)throw xt.alternate===null?Error(s(467)):Error(s(310));Qt=i,i={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},we===null?xt.memoizedState=we=i:we=we.next=i}return we}function Py(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ch(i){var n=oh;return oh+=1,tc===null&&(tc=[]),i=bS(tc,i,n),n=xt,(we===null?n.memoizedState:we.next)===null&&(n=n.alternate,H.H=n===null||n.memoizedState===null?r_:l_),i}function Sg(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ch(i);if(i.$$typeof===N)return li(i)}throw Error(s(438,String(i)))}function By(i){var n=null,a=xt.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var o=xt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(g){return g.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=Py(),xt.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(i),o=0;o<i;o++)a[o]=nt;return n.index++,a}function Ps(i,n){return typeof n=="function"?n(i):n}function _g(i){var n=Ee();return Hy(n,Qt,i)}function Hy(i,n,a){var o=i.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var g=i.baseQueue,y=o.pending;if(y!==null){if(g!==null){var _=g.next;g.next=y.next,y.next=_}n.baseQueue=g=y,o.pending=null}if(y=i.baseState,g===null)i.memoizedState=y;else{n=g.next;var C=_=null,L=null,F=n,X=!1;do{var K=F.lane&-536870913;if(K!==F.lane?(Bt&K)===K:(Ha&K)===K){var j=F.revertLane;if(j===0)L!==null&&(L=L.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),K===Qo&&(X=!0);else if((Ha&j)===j){F=F.next,j===Qo&&(X=!0);continue}else K={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},L===null?(C=L=K,_=y):L=L.next=K,xt.lanes|=j,Va|=j;K=F.action,rl&&a(y,K),y=F.hasEagerState?F.eagerState:a(y,K)}else j={lane:K,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},L===null?(C=L=j,_=y):L=L.next=j,xt.lanes|=K,Va|=K;F=F.next}while(F!==null&&F!==n);if(L===null?_=y:L.next=C,!Ui(y,i.memoizedState)&&(He=!0,X&&(a=Wo,a!==null)))throw a;i.memoizedState=y,i.baseState=_,i.baseQueue=L,o.lastRenderedState=y}return g===null&&(o.lanes=0),[i.memoizedState,o.dispatch]}function Uy(i){var n=Ee(),a=n.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var o=a.dispatch,g=a.pending,y=n.memoizedState;if(g!==null){a.pending=null;var _=g=g.next;do y=i(y,_.action),_=_.next;while(_!==g);Ui(y,n.memoizedState)||(He=!0),n.memoizedState=y,n.baseQueue===null&&(n.baseState=y),a.lastRenderedState=y}return[y,o]}function xS(i,n,a){var o=xt,g=Ee(),y=jt;if(y){if(a===void 0)throw Error(s(407));a=a()}else a=n();var _=!Ui((Qt||g).memoizedState,a);_&&(g.memoizedState=a,He=!0),g=g.queue;var C=MS.bind(null,o,g,i);if(uh(2048,8,C,[i]),g.getSnapshot!==n||_||we!==null&&we.memoizedState.tag&1){if(o.flags|=2048,ec(9,wg(),RS.bind(null,o,g,a,n),null),se===null)throw Error(s(349));y||(Ha&124)!==0||CS(o,n,a)}return a}function CS(i,n,a){i.flags|=16384,i={getSnapshot:n,value:a},n=xt.updateQueue,n===null?(n=Py(),xt.updateQueue=n,n.stores=[i]):(a=n.stores,a===null?n.stores=[i]:a.push(i))}function RS(i,n,a,o){n.value=a,n.getSnapshot=o,DS(n)&&OS(i)}function MS(i,n,a){return a(function(){DS(n)&&OS(i)})}function DS(i){var n=i.getSnapshot;i=i.value;try{var a=n();return!Ui(i,a)}catch{return!0}}function OS(i){var n=Xo(i,2);n!==null&&Vi(n,i,2)}function Iy(i){var n=Ri();if(typeof i=="function"){var a=i;if(i=a(),rl){Oa(!0);try{a()}finally{Oa(!1)}}}return n.memoizedState=n.baseState=i,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:i},n}function NS(i,n,a,o){return i.baseState=a,Hy(i,Qt,typeof o=="function"?o:Ps)}function MC(i,n,a,o,g){if(Tg(i))throw Error(s(485));if(i=n.action,i!==null){var y={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){y.listeners.push(_)}};H.T!==null?a(!0):y.isTransition=!1,o(y),a=n.pending,a===null?(y.next=n.pending=y,LS(n,y)):(y.next=a.next,n.pending=a.next=y)}}function LS(i,n){var a=n.action,o=n.payload,g=i.state;if(n.isTransition){var y=H.T,_={};H.T=_;try{var C=a(g,o),L=H.S;L!==null&&L(_,C),kS(i,n,C)}catch(F){Fy(i,n,F)}finally{H.T=y}}else try{y=a(g,o),kS(i,n,y)}catch(F){Fy(i,n,F)}}function kS(i,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){zS(i,n,o)},function(o){return Fy(i,n,o)}):zS(i,n,a)}function zS(i,n,a){n.status="fulfilled",n.value=a,PS(n),i.state=a,n=i.pending,n!==null&&(a=n.next,a===n?i.pending=null:(a=a.next,n.next=a,LS(i,a)))}function Fy(i,n,a){var o=i.pending;if(i.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=a,PS(n),n=n.next;while(n!==o)}i.action=null}function PS(i){i=i.listeners;for(var n=0;n<i.length;n++)(0,i[n])()}function BS(i,n){return n}function HS(i,n){if(jt){var a=se.formState;if(a!==null){t:{var o=xt;if(jt){if(pe){e:{for(var g=pe,y=is;g.nodeType!==8;){if(!y){g=null;break e}if(g=zn(g.nextSibling),g===null){g=null;break e}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){pe=zn(g.nextSibling),o=g.data==="F!";break t}}il(o)}o=!1}o&&(n=a[0])}}return a=Ri(),a.memoizedState=a.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:BS,lastRenderedState:n},a.queue=o,a=n_.bind(null,xt,o),o.dispatch=a,o=Iy(!1),y=Xy.bind(null,xt,!1,o.queue),o=Ri(),g={state:n,dispatch:null,action:i,pending:null},o.queue=g,a=MC.bind(null,xt,g,y,a),g.dispatch=a,o.memoizedState=i,[n,a,!1]}function US(i){var n=Ee();return IS(n,Qt,i)}function IS(i,n,a){if(n=Hy(i,n,BS)[0],i=_g(Ps)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=ch(n)}catch(_){throw _===nh?mg:_}else o=n;n=Ee();var g=n.queue,y=g.dispatch;return a!==n.memoizedState&&(xt.flags|=2048,ec(9,wg(),DC.bind(null,g,a),null)),[o,y,i]}function DC(i,n){i.action=n}function FS(i){var n=Ee(),a=Qt;if(a!==null)return IS(n,a,i);Ee(),n=n.memoizedState,a=Ee();var o=a.queue.dispatch;return a.memoizedState=i,[n,o,!1]}function ec(i,n,a,o){return i={tag:i,create:a,deps:o,inst:n,next:null},n=xt.updateQueue,n===null&&(n=Py(),xt.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=i.next=i:(o=a.next,a.next=i,i.next=o,n.lastEffect=i),i}function wg(){return{destroy:void 0,resource:void 0}}function GS(){return Ee().memoizedState}function Eg(i,n,a,o){var g=Ri();o=o===void 0?null:o,xt.flags|=i,g.memoizedState=ec(1|n,wg(),a,o)}function uh(i,n,a,o){var g=Ee();o=o===void 0?null:o;var y=g.memoizedState.inst;Qt!==null&&o!==null&&Oy(o,Qt.memoizedState.deps)?g.memoizedState=ec(n,y,a,o):(xt.flags|=i,g.memoizedState=ec(1|n,y,a,o))}function jS(i,n){Eg(8390656,8,i,n)}function qS(i,n){uh(2048,8,i,n)}function VS(i,n){return uh(4,2,i,n)}function XS(i,n){return uh(4,4,i,n)}function YS(i,n){if(typeof n=="function"){i=i();var a=n(i);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return i=i(),n.current=i,function(){n.current=null}}function $S(i,n,a){a=a!=null?a.concat([i]):null,uh(4,4,YS.bind(null,n,i),a)}function Gy(){}function KS(i,n){var a=Ee();n=n===void 0?null:n;var o=a.memoizedState;return n!==null&&Oy(n,o[1])?o[0]:(a.memoizedState=[i,n],i)}function QS(i,n){var a=Ee();n=n===void 0?null:n;var o=a.memoizedState;if(n!==null&&Oy(n,o[1]))return o[0];if(o=i(),rl){Oa(!0);try{i()}finally{Oa(!1)}}return a.memoizedState=[o,n],o}function jy(i,n,a){return a===void 0||(Ha&1073741824)!==0?i.memoizedState=n:(i.memoizedState=a,i=J_(),xt.lanes|=i,Va|=i,a)}function WS(i,n,a,o){return Ui(a,n)?a:Zo.current!==null?(i=jy(i,a,o),Ui(i,n)||(He=!0),i):(Ha&42)===0?(He=!0,i.memoizedState=a):(i=J_(),xt.lanes|=i,Va|=i,n)}function ZS(i,n,a,o,g){var y=V.p;V.p=y!==0&&8>y?y:8;var _=H.T,C={};H.T=C,Xy(i,!1,n,a);try{var L=g(),F=H.S;if(F!==null&&F(C,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var X=xC(L,o);hh(i,n,X,qi(i))}else hh(i,n,o,qi(i))}catch(K){hh(i,n,{then:function(){},status:"rejected",reason:K},qi())}finally{V.p=y,H.T=_}}function OC(){}function qy(i,n,a,o){if(i.tag!==5)throw Error(s(476));var g=JS(i).queue;ZS(i,g,n,ot,a===null?OC:function(){return t_(i),a(o)})}function JS(i){var n=i.memoizedState;if(n!==null)return n;n={memoizedState:ot,baseState:ot,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:ot},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:a},next:null},i.memoizedState=n,i=i.alternate,i!==null&&(i.memoizedState=n),n}function t_(i){var n=JS(i).next.queue;hh(i,n,{},qi())}function Vy(){return li(Mh)}function e_(){return Ee().memoizedState}function i_(){return Ee().memoizedState}function NC(i){for(var n=i.return;n!==null;){switch(n.tag){case 24:case 3:var a=qi();i=Pa(a);var o=Ba(n,i,a);o!==null&&(Vi(o,n,a),ah(o,n,a)),n={cache:Sy()},i.payload=n;return}n=n.return}}function LC(i,n,a){var o=qi();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Tg(i)?s_(n,a):(a=hy(i,n,a,o),a!==null&&(Vi(a,i,o),a_(a,n,o)))}function n_(i,n,a){var o=qi();hh(i,n,a,o)}function hh(i,n,a,o){var g={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Tg(i))s_(n,g);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=n.lastRenderedReducer,y!==null))try{var _=n.lastRenderedState,C=y(_,a);if(g.hasEagerState=!0,g.eagerState=C,Ui(C,_))return og(i,n,g,0),se===null&&lg(),!1}catch{}finally{}if(a=hy(i,n,g,o),a!==null)return Vi(a,i,o),a_(a,n,o),!0}return!1}function Xy(i,n,a,o){if(o={lane:2,revertLane:Eb(),action:o,hasEagerState:!1,eagerState:null,next:null},Tg(i)){if(n)throw Error(s(479))}else n=hy(i,a,o,2),n!==null&&Vi(n,i,2)}function Tg(i){var n=i.alternate;return i===xt||n!==null&&n===xt}function s_(i,n){Jo=vg=!0;var a=i.pending;a===null?n.next=n:(n.next=a.next,a.next=n),i.pending=n}function a_(i,n,a){if((a&4194048)!==0){var o=n.lanes;o&=i.pendingLanes,a|=o,n.lanes=a,fA(i,a)}}var xg={readContext:li,use:Sg,useCallback:be,useContext:be,useEffect:be,useImperativeHandle:be,useLayoutEffect:be,useInsertionEffect:be,useMemo:be,useReducer:be,useRef:be,useState:be,useDebugValue:be,useDeferredValue:be,useTransition:be,useSyncExternalStore:be,useId:be,useHostTransitionStatus:be,useFormState:be,useActionState:be,useOptimistic:be,useMemoCache:be,useCacheRefresh:be},r_={readContext:li,use:Sg,useCallback:function(i,n){return Ri().memoizedState=[i,n===void 0?null:n],i},useContext:li,useEffect:jS,useImperativeHandle:function(i,n,a){a=a!=null?a.concat([i]):null,Eg(4194308,4,YS.bind(null,n,i),a)},useLayoutEffect:function(i,n){return Eg(4194308,4,i,n)},useInsertionEffect:function(i,n){Eg(4,2,i,n)},useMemo:function(i,n){var a=Ri();n=n===void 0?null:n;var o=i();if(rl){Oa(!0);try{i()}finally{Oa(!1)}}return a.memoizedState=[o,n],o},useReducer:function(i,n,a){var o=Ri();if(a!==void 0){var g=a(n);if(rl){Oa(!0);try{a(n)}finally{Oa(!1)}}}else g=n;return o.memoizedState=o.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},o.queue=i,i=i.dispatch=LC.bind(null,xt,i),[o.memoizedState,i]},useRef:function(i){var n=Ri();return i={current:i},n.memoizedState=i},useState:function(i){i=Iy(i);var n=i.queue,a=n_.bind(null,xt,n);return n.dispatch=a,[i.memoizedState,a]},useDebugValue:Gy,useDeferredValue:function(i,n){var a=Ri();return jy(a,i,n)},useTransition:function(){var i=Iy(!1);return i=ZS.bind(null,xt,i.queue,!0,!1),Ri().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,n,a){var o=xt,g=Ri();if(jt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=n(),se===null)throw Error(s(349));(Bt&124)!==0||CS(o,n,a)}g.memoizedState=a;var y={value:a,getSnapshot:n};return g.queue=y,jS(MS.bind(null,o,y,i),[i]),o.flags|=2048,ec(9,wg(),RS.bind(null,o,y,a,n),null),a},useId:function(){var i=Ri(),n=se.identifierPrefix;if(jt){var a=Ls,o=Ns;a=(o&~(1<<32-Hi(o)-1)).toString(32)+a,n="«"+n+"R"+a,a=Ag++,0<a&&(n+="H"+a.toString(32)),n+="»"}else a=CC++,n="«"+n+"r"+a.toString(32)+"»";return i.memoizedState=n},useHostTransitionStatus:Vy,useFormState:HS,useActionState:HS,useOptimistic:function(i){var n=Ri();n.memoizedState=n.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Xy.bind(null,xt,!0,a),a.dispatch=n,[i,n]},useMemoCache:By,useCacheRefresh:function(){return Ri().memoizedState=NC.bind(null,xt)}},l_={readContext:li,use:Sg,useCallback:KS,useContext:li,useEffect:qS,useImperativeHandle:$S,useInsertionEffect:VS,useLayoutEffect:XS,useMemo:QS,useReducer:_g,useRef:GS,useState:function(){return _g(Ps)},useDebugValue:Gy,useDeferredValue:function(i,n){var a=Ee();return WS(a,Qt.memoizedState,i,n)},useTransition:function(){var i=_g(Ps)[0],n=Ee().memoizedState;return[typeof i=="boolean"?i:ch(i),n]},useSyncExternalStore:xS,useId:e_,useHostTransitionStatus:Vy,useFormState:US,useActionState:US,useOptimistic:function(i,n){var a=Ee();return NS(a,Qt,i,n)},useMemoCache:By,useCacheRefresh:i_},kC={readContext:li,use:Sg,useCallback:KS,useContext:li,useEffect:qS,useImperativeHandle:$S,useInsertionEffect:VS,useLayoutEffect:XS,useMemo:QS,useReducer:Uy,useRef:GS,useState:function(){return Uy(Ps)},useDebugValue:Gy,useDeferredValue:function(i,n){var a=Ee();return Qt===null?jy(a,i,n):WS(a,Qt.memoizedState,i,n)},useTransition:function(){var i=Uy(Ps)[0],n=Ee().memoizedState;return[typeof i=="boolean"?i:ch(i),n]},useSyncExternalStore:xS,useId:e_,useHostTransitionStatus:Vy,useFormState:FS,useActionState:FS,useOptimistic:function(i,n){var a=Ee();return Qt!==null?NS(a,Qt,i,n):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:By,useCacheRefresh:i_},ic=null,dh=0;function Cg(i){var n=dh;return dh+=1,ic===null&&(ic=[]),bS(ic,i,n)}function fh(i,n){n=n.props.ref,i.ref=n!==void 0?n:null}function Rg(i,n){throw n.$$typeof===b?Error(s(525)):(i=Object.prototype.toString.call(n),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":i)))}function o_(i){var n=i._init;return n(i._payload)}function c_(i){function n(U,P){if(i){var I=U.deletions;I===null?(U.deletions=[P],U.flags|=16):I.push(P)}}function a(U,P){if(!i)return null;for(;P!==null;)n(U,P),P=P.sibling;return null}function o(U){for(var P=new Map;U!==null;)U.key!==null?P.set(U.key,U):P.set(U.index,U),U=U.sibling;return P}function g(U,P){return U=Os(U,P),U.index=0,U.sibling=null,U}function y(U,P,I){return U.index=I,i?(I=U.alternate,I!==null?(I=I.index,I<P?(U.flags|=67108866,P):I):(U.flags|=67108866,P)):(U.flags|=1048576,P)}function _(U){return i&&U.alternate===null&&(U.flags|=67108866),U}function C(U,P,I,Y){return P===null||P.tag!==6?(P=fy(I,U.mode,Y),P.return=U,P):(P=g(P,I),P.return=U,P)}function L(U,P,I,Y){var lt=I.type;return lt===x?X(U,P,I.props.children,Y,I.key):P!==null&&(P.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===Q&&o_(lt)===P.type)?(P=g(P,I.props),fh(P,I),P.return=U,P):(P=ug(I.type,I.key,I.props,null,U.mode,Y),fh(P,I),P.return=U,P)}function F(U,P,I,Y){return P===null||P.tag!==4||P.stateNode.containerInfo!==I.containerInfo||P.stateNode.implementation!==I.implementation?(P=gy(I,U.mode,Y),P.return=U,P):(P=g(P,I.children||[]),P.return=U,P)}function X(U,P,I,Y,lt){return P===null||P.tag!==7?(P=Zr(I,U.mode,Y,lt),P.return=U,P):(P=g(P,I),P.return=U,P)}function K(U,P,I){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=fy(""+P,U.mode,I),P.return=U,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case v:return I=ug(P.type,P.key,P.props,null,U.mode,I),fh(I,P),I.return=U,I;case S:return P=gy(P,U.mode,I),P.return=U,P;case Q:var Y=P._init;return P=Y(P._payload),K(U,P,I)}if(Ft(P)||yt(P))return P=Zr(P,U.mode,I,null),P.return=U,P;if(typeof P.then=="function")return K(U,Cg(P),I);if(P.$$typeof===N)return K(U,gg(U,P),I);Rg(U,P)}return null}function j(U,P,I,Y){var lt=P!==null?P.key:null;if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return lt!==null?null:C(U,P,""+I,Y);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case v:return I.key===lt?L(U,P,I,Y):null;case S:return I.key===lt?F(U,P,I,Y):null;case Q:return lt=I._init,I=lt(I._payload),j(U,P,I,Y)}if(Ft(I)||yt(I))return lt!==null?null:X(U,P,I,Y,null);if(typeof I.then=="function")return j(U,P,Cg(I),Y);if(I.$$typeof===N)return j(U,P,gg(U,I),Y);Rg(U,I)}return null}function q(U,P,I,Y,lt){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return U=U.get(I)||null,C(P,U,""+Y,lt);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case v:return U=U.get(Y.key===null?I:Y.key)||null,L(P,U,Y,lt);case S:return U=U.get(Y.key===null?I:Y.key)||null,F(P,U,Y,lt);case Q:var Ct=Y._init;return Y=Ct(Y._payload),q(U,P,I,Y,lt)}if(Ft(Y)||yt(Y))return U=U.get(I)||null,X(P,U,Y,lt,null);if(typeof Y.then=="function")return q(U,P,I,Cg(Y),lt);if(Y.$$typeof===N)return q(U,P,I,gg(P,Y),lt);Rg(P,Y)}return null}function bt(U,P,I,Y){for(var lt=null,Ct=null,ht=P,mt=P=0,Ie=null;ht!==null&&mt<I.length;mt++){ht.index>mt?(Ie=ht,ht=null):Ie=ht.sibling;var Gt=j(U,ht,I[mt],Y);if(Gt===null){ht===null&&(ht=Ie);break}i&&ht&&Gt.alternate===null&&n(U,ht),P=y(Gt,P,mt),Ct===null?lt=Gt:Ct.sibling=Gt,Ct=Gt,ht=Ie}if(mt===I.length)return a(U,ht),jt&&tl(U,mt),lt;if(ht===null){for(;mt<I.length;mt++)ht=K(U,I[mt],Y),ht!==null&&(P=y(ht,P,mt),Ct===null?lt=ht:Ct.sibling=ht,Ct=ht);return jt&&tl(U,mt),lt}for(ht=o(ht);mt<I.length;mt++)Ie=q(ht,U,mt,I[mt],Y),Ie!==null&&(i&&Ie.alternate!==null&&ht.delete(Ie.key===null?mt:Ie.key),P=y(Ie,P,mt),Ct===null?lt=Ie:Ct.sibling=Ie,Ct=Ie);return i&&ht.forEach(function(tr){return n(U,tr)}),jt&&tl(U,mt),lt}function gt(U,P,I,Y){if(I==null)throw Error(s(151));for(var lt=null,Ct=null,ht=P,mt=P=0,Ie=null,Gt=I.next();ht!==null&&!Gt.done;mt++,Gt=I.next()){ht.index>mt?(Ie=ht,ht=null):Ie=ht.sibling;var tr=j(U,ht,Gt.value,Y);if(tr===null){ht===null&&(ht=Ie);break}i&&ht&&tr.alternate===null&&n(U,ht),P=y(tr,P,mt),Ct===null?lt=tr:Ct.sibling=tr,Ct=tr,ht=Ie}if(Gt.done)return a(U,ht),jt&&tl(U,mt),lt;if(ht===null){for(;!Gt.done;mt++,Gt=I.next())Gt=K(U,Gt.value,Y),Gt!==null&&(P=y(Gt,P,mt),Ct===null?lt=Gt:Ct.sibling=Gt,Ct=Gt);return jt&&tl(U,mt),lt}for(ht=o(ht);!Gt.done;mt++,Gt=I.next())Gt=q(ht,U,mt,Gt.value,Y),Gt!==null&&(i&&Gt.alternate!==null&&ht.delete(Gt.key===null?mt:Gt.key),P=y(Gt,P,mt),Ct===null?lt=Gt:Ct.sibling=Gt,Ct=Gt);return i&&ht.forEach(function(zR){return n(U,zR)}),jt&&tl(U,mt),lt}function Zt(U,P,I,Y){if(typeof I=="object"&&I!==null&&I.type===x&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case v:t:{for(var lt=I.key;P!==null;){if(P.key===lt){if(lt=I.type,lt===x){if(P.tag===7){a(U,P.sibling),Y=g(P,I.props.children),Y.return=U,U=Y;break t}}else if(P.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===Q&&o_(lt)===P.type){a(U,P.sibling),Y=g(P,I.props),fh(Y,I),Y.return=U,U=Y;break t}a(U,P);break}else n(U,P);P=P.sibling}I.type===x?(Y=Zr(I.props.children,U.mode,Y,I.key),Y.return=U,U=Y):(Y=ug(I.type,I.key,I.props,null,U.mode,Y),fh(Y,I),Y.return=U,U=Y)}return _(U);case S:t:{for(lt=I.key;P!==null;){if(P.key===lt)if(P.tag===4&&P.stateNode.containerInfo===I.containerInfo&&P.stateNode.implementation===I.implementation){a(U,P.sibling),Y=g(P,I.children||[]),Y.return=U,U=Y;break t}else{a(U,P);break}else n(U,P);P=P.sibling}Y=gy(I,U.mode,Y),Y.return=U,U=Y}return _(U);case Q:return lt=I._init,I=lt(I._payload),Zt(U,P,I,Y)}if(Ft(I))return bt(U,P,I,Y);if(yt(I)){if(lt=yt(I),typeof lt!="function")throw Error(s(150));return I=lt.call(I),gt(U,P,I,Y)}if(typeof I.then=="function")return Zt(U,P,Cg(I),Y);if(I.$$typeof===N)return Zt(U,P,gg(U,I),Y);Rg(U,I)}return typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint"?(I=""+I,P!==null&&P.tag===6?(a(U,P.sibling),Y=g(P,I),Y.return=U,U=Y):(a(U,P),Y=fy(I,U.mode,Y),Y.return=U,U=Y),_(U)):a(U,P)}return function(U,P,I,Y){try{dh=0;var lt=Zt(U,P,I,Y);return ic=null,lt}catch(ht){if(ht===nh||ht===mg)throw ht;var Ct=Ii(29,ht,null,U.mode);return Ct.lanes=Y,Ct.return=U,Ct}finally{}}}var nc=c_(!0),u_=c_(!1),vn=$(null),ns=null;function Ua(i){var n=i.alternate;Z(Oe,Oe.current&1),Z(vn,i),ns===null&&(n===null||Zo.current!==null||n.memoizedState!==null)&&(ns=i)}function h_(i){if(i.tag===22){if(Z(Oe,Oe.current),Z(vn,i),ns===null){var n=i.alternate;n!==null&&n.memoizedState!==null&&(ns=i)}}else Ia()}function Ia(){Z(Oe,Oe.current),Z(vn,vn.current)}function Bs(i){tt(vn),ns===i&&(ns=null),tt(Oe)}var Oe=$(0);function Mg(i){for(var n=i;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Pb(a)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break;for(;n.sibling===null;){if(n.return===null||n.return===i)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function Yy(i,n,a,o){n=i.memoizedState,a=a(o,n),a=a==null?n:m({},n,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var $y={enqueueSetState:function(i,n,a){i=i._reactInternals;var o=qi(),g=Pa(o);g.payload=n,a!=null&&(g.callback=a),n=Ba(i,g,o),n!==null&&(Vi(n,i,o),ah(n,i,o))},enqueueReplaceState:function(i,n,a){i=i._reactInternals;var o=qi(),g=Pa(o);g.tag=1,g.payload=n,a!=null&&(g.callback=a),n=Ba(i,g,o),n!==null&&(Vi(n,i,o),ah(n,i,o))},enqueueForceUpdate:function(i,n){i=i._reactInternals;var a=qi(),o=Pa(a);o.tag=2,n!=null&&(o.callback=n),n=Ba(i,o,a),n!==null&&(Vi(n,i,a),ah(n,i,a))}};function d_(i,n,a,o,g,y,_){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(o,y,_):n.prototype&&n.prototype.isPureReactComponent?!Ku(a,o)||!Ku(g,y):!0}function f_(i,n,a,o){i=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,o),n.state!==i&&$y.enqueueReplaceState(n,n.state,null)}function ll(i,n){var a=n;if("ref"in n){a={};for(var o in n)o!=="ref"&&(a[o]=n[o])}if(i=i.defaultProps){a===n&&(a=m({},a));for(var g in i)a[g]===void 0&&(a[g]=i[g])}return a}var Dg=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function g_(i){Dg(i)}function p_(i){console.error(i)}function m_(i){Dg(i)}function Og(i,n){try{var a=i.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function y_(i,n,a){try{var o=i.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Ky(i,n,a){return a=Pa(a),a.tag=3,a.payload={element:null},a.callback=function(){Og(i,n)},a}function b_(i){return i=Pa(i),i.tag=3,i}function v_(i,n,a,o){var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var y=o.value;i.payload=function(){return g(y)},i.callback=function(){y_(n,a,o)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(i.callback=function(){y_(n,a,o),typeof g!="function"&&(Xa===null?Xa=new Set([this]):Xa.add(this));var C=o.stack;this.componentDidCatch(o.value,{componentStack:C!==null?C:""})})}function zC(i,n,a,o,g){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=a.alternate,n!==null&&th(n,a,g,!0),a=vn.current,a!==null){switch(a.tag){case 13:return ns===null?vb():a.alternate===null&&me===0&&(me=3),a.flags&=-257,a.flags|=65536,a.lanes=g,o===Ey?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([o]):n.add(o),Sb(i,o,g)),!1;case 22:return a.flags|=65536,o===Ey?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([o]):a.add(o)),Sb(i,o,g)),!1}throw Error(s(435,a.tag))}return Sb(i,o,g),vb(),!1}if(jt)return n=vn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=g,o!==yy&&(i=Error(s(422),{cause:o}),Ju(pn(i,a)))):(o!==yy&&(n=Error(s(423),{cause:o}),Ju(pn(n,a))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,o=pn(o,a),g=Ky(i.stateNode,o,g),Cy(i,g),me!==4&&(me=2)),!1;var y=Error(s(520),{cause:o});if(y=pn(y,a),Ah===null?Ah=[y]:Ah.push(y),me!==4&&(me=2),n===null)return!0;o=pn(o,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,i=g&-g,a.lanes|=i,i=Ky(a.stateNode,o,i),Cy(a,i),!1;case 1:if(n=a.type,y=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Xa===null||!Xa.has(y))))return a.flags|=65536,g&=-g,a.lanes|=g,g=b_(g),v_(g,i,a,o),Cy(a,g),!1}a=a.return}while(a!==null);return!1}var A_=Error(s(461)),He=!1;function Ye(i,n,a,o){n.child=i===null?u_(n,null,a,o):nc(n,i.child,a,o)}function S_(i,n,a,o,g){a=a.render;var y=n.ref;if("ref"in o){var _={};for(var C in o)C!=="ref"&&(_[C]=o[C])}else _=o;return sl(n),o=Ny(i,n,a,_,y,g),C=Ly(),i!==null&&!He?(ky(i,n,g),Hs(i,n,g)):(jt&&C&&py(n),n.flags|=1,Ye(i,n,o,g),n.child)}function __(i,n,a,o,g){if(i===null){var y=a.type;return typeof y=="function"&&!dy(y)&&y.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=y,w_(i,n,y,o,g)):(i=ug(a.type,null,o,n,n.mode,g),i.ref=n.ref,i.return=n,n.child=i)}if(y=i.child,!nb(i,g)){var _=y.memoizedProps;if(a=a.compare,a=a!==null?a:Ku,a(_,o)&&i.ref===n.ref)return Hs(i,n,g)}return n.flags|=1,i=Os(y,o),i.ref=n.ref,i.return=n,n.child=i}function w_(i,n,a,o,g){if(i!==null){var y=i.memoizedProps;if(Ku(y,o)&&i.ref===n.ref)if(He=!1,n.pendingProps=o=y,nb(i,g))(i.flags&131072)!==0&&(He=!0);else return n.lanes=i.lanes,Hs(i,n,g)}return Qy(i,n,a,o,g)}function E_(i,n,a){var o=n.pendingProps,g=o.children,y=i!==null?i.memoizedState:null;if(o.mode==="hidden"){if((n.flags&128)!==0){if(o=y!==null?y.baseLanes|a:a,i!==null){for(g=n.child=i.child,y=0;g!==null;)y=y|g.lanes|g.childLanes,g=g.sibling;n.childLanes=y&~o}else n.childLanes=0,n.child=null;return T_(i,n,o,a)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},i!==null&&pg(n,y!==null?y.cachePool:null),y!==null?wS(n,y):My(),h_(n);else return n.lanes=n.childLanes=536870912,T_(i,n,y!==null?y.baseLanes|a:a,a)}else y!==null?(pg(n,y.cachePool),wS(n,y),Ia(),n.memoizedState=null):(i!==null&&pg(n,null),My(),Ia());return Ye(i,n,g,a),n.child}function T_(i,n,a,o){var g=wy();return g=g===null?null:{parent:De._currentValue,pool:g},n.memoizedState={baseLanes:a,cachePool:g},i!==null&&pg(n,null),My(),h_(n),i!==null&&th(i,n,o,!0),null}function Ng(i,n){var a=n.ref;if(a===null)i!==null&&i.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(n.flags|=4194816)}}function Qy(i,n,a,o,g){return sl(n),a=Ny(i,n,a,o,void 0,g),o=Ly(),i!==null&&!He?(ky(i,n,g),Hs(i,n,g)):(jt&&o&&py(n),n.flags|=1,Ye(i,n,a,g),n.child)}function x_(i,n,a,o,g,y){return sl(n),n.updateQueue=null,a=TS(n,o,a,g),ES(i),o=Ly(),i!==null&&!He?(ky(i,n,y),Hs(i,n,y)):(jt&&o&&py(n),n.flags|=1,Ye(i,n,a,y),n.child)}function C_(i,n,a,o,g){if(sl(n),n.stateNode===null){var y=Yo,_=a.contextType;typeof _=="object"&&_!==null&&(y=li(_)),y=new a(o,y),n.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=$y,n.stateNode=y,y._reactInternals=n,y=n.stateNode,y.props=o,y.state=n.memoizedState,y.refs={},Ty(n),_=a.contextType,y.context=typeof _=="object"&&_!==null?li(_):Yo,y.state=n.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Yy(n,a,_,o),y.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(_=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),_!==y.state&&$y.enqueueReplaceState(y,y.state,null),lh(n,o,y,g),rh(),y.state=n.memoizedState),typeof y.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(i===null){y=n.stateNode;var C=n.memoizedProps,L=ll(a,C);y.props=L;var F=y.context,X=a.contextType;_=Yo,typeof X=="object"&&X!==null&&(_=li(X));var K=a.getDerivedStateFromProps;X=typeof K=="function"||typeof y.getSnapshotBeforeUpdate=="function",C=n.pendingProps!==C,X||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C||F!==_)&&f_(n,y,o,_),za=!1;var j=n.memoizedState;y.state=j,lh(n,o,y,g),rh(),F=n.memoizedState,C||j!==F||za?(typeof K=="function"&&(Yy(n,a,K,o),F=n.memoizedState),(L=za||d_(n,a,L,o,j,F,_))?(X||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(n.flags|=4194308)):(typeof y.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=F),y.props=o,y.state=F,y.context=_,o=L):(typeof y.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{y=n.stateNode,xy(i,n),_=n.memoizedProps,X=ll(a,_),y.props=X,K=n.pendingProps,j=y.context,F=a.contextType,L=Yo,typeof F=="object"&&F!==null&&(L=li(F)),C=a.getDerivedStateFromProps,(F=typeof C=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(_!==K||j!==L)&&f_(n,y,o,L),za=!1,j=n.memoizedState,y.state=j,lh(n,o,y,g),rh();var q=n.memoizedState;_!==K||j!==q||za||i!==null&&i.dependencies!==null&&fg(i.dependencies)?(typeof C=="function"&&(Yy(n,a,C,o),q=n.memoizedState),(X=za||d_(n,a,X,o,j,q,L)||i!==null&&i.dependencies!==null&&fg(i.dependencies))?(F||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(o,q,L),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(o,q,L)),typeof y.componentDidUpdate=="function"&&(n.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof y.componentDidUpdate!="function"||_===i.memoizedProps&&j===i.memoizedState||(n.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&j===i.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=q),y.props=o,y.state=q,y.context=L,o=X):(typeof y.componentDidUpdate!="function"||_===i.memoizedProps&&j===i.memoizedState||(n.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&j===i.memoizedState||(n.flags|=1024),o=!1)}return y=o,Ng(i,n),o=(n.flags&128)!==0,y||o?(y=n.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:y.render(),n.flags|=1,i!==null&&o?(n.child=nc(n,i.child,null,g),n.child=nc(n,null,a,g)):Ye(i,n,a,g),n.memoizedState=y.state,i=n.child):i=Hs(i,n,g),i}function R_(i,n,a,o){return Zu(),n.flags|=256,Ye(i,n,a,o),n.child}var Wy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zy(i){return{baseLanes:i,cachePool:pS()}}function Jy(i,n,a){return i=i!==null?i.childLanes&~a:0,n&&(i|=An),i}function M_(i,n,a){var o=n.pendingProps,g=!1,y=(n.flags&128)!==0,_;if((_=y)||(_=i!==null&&i.memoizedState===null?!1:(Oe.current&2)!==0),_&&(g=!0,n.flags&=-129),_=(n.flags&32)!==0,n.flags&=-33,i===null){if(jt){if(g?Ua(n):Ia(),jt){var C=pe,L;if(L=C){t:{for(L=C,C=is;L.nodeType!==8;){if(!C){C=null;break t}if(L=zn(L.nextSibling),L===null){C=null;break t}}C=L}C!==null?(n.memoizedState={dehydrated:C,treeContext:Jr!==null?{id:Ns,overflow:Ls}:null,retryLane:536870912,hydrationErrors:null},L=Ii(18,null,null,0),L.stateNode=C,L.return=n,n.child=L,pi=n,pe=null,L=!0):L=!1}L||il(n)}if(C=n.memoizedState,C!==null&&(C=C.dehydrated,C!==null))return Pb(C)?n.lanes=32:n.lanes=536870912,null;Bs(n)}return C=o.children,o=o.fallback,g?(Ia(),g=n.mode,C=Lg({mode:"hidden",children:C},g),o=Zr(o,g,a,null),C.return=n,o.return=n,C.sibling=o,n.child=C,g=n.child,g.memoizedState=Zy(a),g.childLanes=Jy(i,_,a),n.memoizedState=Wy,o):(Ua(n),tb(n,C))}if(L=i.memoizedState,L!==null&&(C=L.dehydrated,C!==null)){if(y)n.flags&256?(Ua(n),n.flags&=-257,n=eb(i,n,a)):n.memoizedState!==null?(Ia(),n.child=i.child,n.flags|=128,n=null):(Ia(),g=o.fallback,C=n.mode,o=Lg({mode:"visible",children:o.children},C),g=Zr(g,C,a,null),g.flags|=2,o.return=n,g.return=n,o.sibling=g,n.child=o,nc(n,i.child,null,a),o=n.child,o.memoizedState=Zy(a),o.childLanes=Jy(i,_,a),n.memoizedState=Wy,n=g);else if(Ua(n),Pb(C)){if(_=C.nextSibling&&C.nextSibling.dataset,_)var F=_.dgst;_=F,o=Error(s(419)),o.stack="",o.digest=_,Ju({value:o,source:null,stack:null}),n=eb(i,n,a)}else if(He||th(i,n,a,!1),_=(a&i.childLanes)!==0,He||_){if(_=se,_!==null&&(o=a&-a,o=(o&42)!==0?1:Bm(o),o=(o&(_.suspendedLanes|a))!==0?0:o,o!==0&&o!==L.retryLane))throw L.retryLane=o,Xo(i,o),Vi(_,i,o),A_;C.data==="$?"||vb(),n=eb(i,n,a)}else C.data==="$?"?(n.flags|=192,n.child=i.child,n=null):(i=L.treeContext,pe=zn(C.nextSibling),pi=n,jt=!0,el=null,is=!1,i!==null&&(yn[bn++]=Ns,yn[bn++]=Ls,yn[bn++]=Jr,Ns=i.id,Ls=i.overflow,Jr=n),n=tb(n,o.children),n.flags|=4096);return n}return g?(Ia(),g=o.fallback,C=n.mode,L=i.child,F=L.sibling,o=Os(L,{mode:"hidden",children:o.children}),o.subtreeFlags=L.subtreeFlags&65011712,F!==null?g=Os(F,g):(g=Zr(g,C,a,null),g.flags|=2),g.return=n,o.return=n,o.sibling=g,n.child=o,o=g,g=n.child,C=i.child.memoizedState,C===null?C=Zy(a):(L=C.cachePool,L!==null?(F=De._currentValue,L=L.parent!==F?{parent:F,pool:F}:L):L=pS(),C={baseLanes:C.baseLanes|a,cachePool:L}),g.memoizedState=C,g.childLanes=Jy(i,_,a),n.memoizedState=Wy,o):(Ua(n),a=i.child,i=a.sibling,a=Os(a,{mode:"visible",children:o.children}),a.return=n,a.sibling=null,i!==null&&(_=n.deletions,_===null?(n.deletions=[i],n.flags|=16):_.push(i)),n.child=a,n.memoizedState=null,a)}function tb(i,n){return n=Lg({mode:"visible",children:n},i.mode),n.return=i,i.child=n}function Lg(i,n){return i=Ii(22,i,null,n),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function eb(i,n,a){return nc(n,i.child,null,a),i=tb(n,n.pendingProps.children),i.flags|=2,n.memoizedState=null,i}function D_(i,n,a){i.lanes|=n;var o=i.alternate;o!==null&&(o.lanes|=n),vy(i.return,n,a)}function ib(i,n,a,o,g){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:g}:(y.isBackwards=n,y.rendering=null,y.renderingStartTime=0,y.last=o,y.tail=a,y.tailMode=g)}function O_(i,n,a){var o=n.pendingProps,g=o.revealOrder,y=o.tail;if(Ye(i,n,o.children,a),o=Oe.current,(o&2)!==0)o=o&1|2,n.flags|=128;else{if(i!==null&&(i.flags&128)!==0)t:for(i=n.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&D_(i,a,n);else if(i.tag===19)D_(i,a,n);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break t;for(;i.sibling===null;){if(i.return===null||i.return===n)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}o&=1}switch(Z(Oe,o),g){case"forwards":for(a=n.child,g=null;a!==null;)i=a.alternate,i!==null&&Mg(i)===null&&(g=a),a=a.sibling;a=g,a===null?(g=n.child,n.child=null):(g=a.sibling,a.sibling=null),ib(n,!1,g,a,y);break;case"backwards":for(a=null,g=n.child,n.child=null;g!==null;){if(i=g.alternate,i!==null&&Mg(i)===null){n.child=g;break}i=g.sibling,g.sibling=a,a=g,g=i}ib(n,!0,a,null,y);break;case"together":ib(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Hs(i,n,a){if(i!==null&&(n.dependencies=i.dependencies),Va|=n.lanes,(a&n.childLanes)===0)if(i!==null){if(th(i,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(i!==null&&n.child!==i.child)throw Error(s(153));if(n.child!==null){for(i=n.child,a=Os(i,i.pendingProps),n.child=a,a.return=n;i.sibling!==null;)i=i.sibling,a=a.sibling=Os(i,i.pendingProps),a.return=n;a.sibling=null}return n.child}function nb(i,n){return(i.lanes&n)!==0?!0:(i=i.dependencies,!!(i!==null&&fg(i)))}function PC(i,n,a){switch(n.tag){case 3:Vt(n,n.stateNode.containerInfo),ka(n,De,i.memoizedState.cache),Zu();break;case 27:case 5:zu(n);break;case 4:Vt(n,n.stateNode.containerInfo);break;case 10:ka(n,n.type,n.memoizedProps.value);break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Ua(n),n.flags|=128,null):(a&n.child.childLanes)!==0?M_(i,n,a):(Ua(n),i=Hs(i,n,a),i!==null?i.sibling:null);Ua(n);break;case 19:var g=(i.flags&128)!==0;if(o=(a&n.childLanes)!==0,o||(th(i,n,a,!1),o=(a&n.childLanes)!==0),g){if(o)return O_(i,n,a);n.flags|=128}if(g=n.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Z(Oe,Oe.current),o)break;return null;case 22:case 23:return n.lanes=0,E_(i,n,a);case 24:ka(n,De,i.memoizedState.cache)}return Hs(i,n,a)}function N_(i,n,a){if(i!==null)if(i.memoizedProps!==n.pendingProps)He=!0;else{if(!nb(i,a)&&(n.flags&128)===0)return He=!1,PC(i,n,a);He=(i.flags&131072)!==0}else He=!1,jt&&(n.flags&1048576)!==0&&oS(n,dg,n.index);switch(n.lanes=0,n.tag){case 16:t:{i=n.pendingProps;var o=n.elementType,g=o._init;if(o=g(o._payload),n.type=o,typeof o=="function")dy(o)?(i=ll(o,i),n.tag=1,n=C_(null,n,o,i,a)):(n.tag=0,n=Qy(null,n,o,i,a));else{if(o!=null){if(g=o.$$typeof,g===k){n.tag=11,n=S_(null,n,o,i,a);break t}else if(g===G){n.tag=14,n=__(null,n,o,i,a);break t}}throw n=vt(o)||o,Error(s(306,n,""))}}return n;case 0:return Qy(i,n,n.type,n.pendingProps,a);case 1:return o=n.type,g=ll(o,n.pendingProps),C_(i,n,o,g,a);case 3:t:{if(Vt(n,n.stateNode.containerInfo),i===null)throw Error(s(387));o=n.pendingProps;var y=n.memoizedState;g=y.element,xy(i,n),lh(n,o,null,a);var _=n.memoizedState;if(o=_.cache,ka(n,De,o),o!==y.cache&&Ay(n,[De],a,!0),rh(),o=_.element,y.isDehydrated)if(y={element:o,isDehydrated:!1,cache:_.cache},n.updateQueue.baseState=y,n.memoizedState=y,n.flags&256){n=R_(i,n,o,a);break t}else if(o!==g){g=pn(Error(s(424)),n),Ju(g),n=R_(i,n,o,a);break t}else{switch(i=n.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(pe=zn(i.firstChild),pi=n,jt=!0,el=null,is=!0,a=u_(n,null,o,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Zu(),o===g){n=Hs(i,n,a);break t}Ye(i,n,o,a)}n=n.child}return n;case 26:return Ng(i,n),i===null?(a=P1(n.type,null,n.pendingProps,null))?n.memoizedState=a:jt||(a=n.type,i=n.pendingProps,o=Yg(ft.current).createElement(a),o[ri]=n,o[xi]=i,Ke(o,a,i),Be(o),n.stateNode=o):n.memoizedState=P1(n.type,i.memoizedProps,n.pendingProps,i.memoizedState),null;case 27:return zu(n),i===null&&jt&&(o=n.stateNode=L1(n.type,n.pendingProps,ft.current),pi=n,is=!0,g=pe,Ka(n.type)?(Bb=g,pe=zn(o.firstChild)):pe=g),Ye(i,n,n.pendingProps.children,a),Ng(i,n),i===null&&(n.flags|=4194304),n.child;case 5:return i===null&&jt&&((g=o=pe)&&(o=uR(o,n.type,n.pendingProps,is),o!==null?(n.stateNode=o,pi=n,pe=zn(o.firstChild),is=!1,g=!0):g=!1),g||il(n)),zu(n),g=n.type,y=n.pendingProps,_=i!==null?i.memoizedProps:null,o=y.children,Lb(g,y)?o=null:_!==null&&Lb(g,_)&&(n.flags|=32),n.memoizedState!==null&&(g=Ny(i,n,RC,null,null,a),Mh._currentValue=g),Ng(i,n),Ye(i,n,o,a),n.child;case 6:return i===null&&jt&&((i=a=pe)&&(a=hR(a,n.pendingProps,is),a!==null?(n.stateNode=a,pi=n,pe=null,i=!0):i=!1),i||il(n)),null;case 13:return M_(i,n,a);case 4:return Vt(n,n.stateNode.containerInfo),o=n.pendingProps,i===null?n.child=nc(n,null,o,a):Ye(i,n,o,a),n.child;case 11:return S_(i,n,n.type,n.pendingProps,a);case 7:return Ye(i,n,n.pendingProps,a),n.child;case 8:return Ye(i,n,n.pendingProps.children,a),n.child;case 12:return Ye(i,n,n.pendingProps.children,a),n.child;case 10:return o=n.pendingProps,ka(n,n.type,o.value),Ye(i,n,o.children,a),n.child;case 9:return g=n.type._context,o=n.pendingProps.children,sl(n),g=li(g),o=o(g),n.flags|=1,Ye(i,n,o,a),n.child;case 14:return __(i,n,n.type,n.pendingProps,a);case 15:return w_(i,n,n.type,n.pendingProps,a);case 19:return O_(i,n,a);case 31:return o=n.pendingProps,a=n.mode,o={mode:o.mode,children:o.children},i===null?(a=Lg(o,a),a.ref=n.ref,n.child=a,a.return=n,n=a):(a=Os(i.child,o),a.ref=n.ref,n.child=a,a.return=n,n=a),n;case 22:return E_(i,n,a);case 24:return sl(n),o=li(De),i===null?(g=wy(),g===null&&(g=se,y=Sy(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=a),g=y),n.memoizedState={parent:o,cache:g},Ty(n),ka(n,De,g)):((i.lanes&a)!==0&&(xy(i,n),lh(n,null,null,a),rh()),g=i.memoizedState,y=n.memoizedState,g.parent!==o?(g={parent:o,cache:o},n.memoizedState=g,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=g),ka(n,De,o)):(o=y.cache,ka(n,De,o),o!==g.cache&&Ay(n,[De],a,!0))),Ye(i,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function Us(i){i.flags|=4}function L_(i,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!F1(n)){if(n=vn.current,n!==null&&((Bt&4194048)===Bt?ns!==null:(Bt&62914560)!==Bt&&(Bt&536870912)===0||n!==ns))throw sh=Ey,mS;i.flags|=8192}}function kg(i,n){n!==null&&(i.flags|=4),i.flags&16384&&(n=i.tag!==22?hA():536870912,i.lanes|=n,lc|=n)}function gh(i,n){if(!jt)switch(i.tailMode){case"hidden":n=i.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n||i.tail===null?i.tail=null:i.tail.sibling=null:o.sibling=null}}function de(i){var n=i.alternate!==null&&i.alternate.child===i.child,a=0,o=0;if(n)for(var g=i.child;g!==null;)a|=g.lanes|g.childLanes,o|=g.subtreeFlags&65011712,o|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)a|=g.lanes|g.childLanes,o|=g.subtreeFlags,o|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=o,i.childLanes=a,n}function BC(i,n,a){var o=n.pendingProps;switch(my(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return de(n),null;case 1:return de(n),null;case 3:return a=n.stateNode,o=null,i!==null&&(o=i.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),zs(De),ts(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(Wu(n)?Us(n):i===null||i.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,hS())),de(n),null;case 26:return a=n.memoizedState,i===null?(Us(n),a!==null?(de(n),L_(n,a)):(de(n),n.flags&=-16777217)):a?a!==i.memoizedState?(Us(n),de(n),L_(n,a)):(de(n),n.flags&=-16777217):(i.memoizedProps!==o&&Us(n),de(n),n.flags&=-16777217),null;case 27:Da(n),a=ft.current;var g=n.type;if(i!==null&&n.stateNode!=null)i.memoizedProps!==o&&Us(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return de(n),null}i=ct.current,Wu(n)?cS(n):(i=L1(g,o,a),n.stateNode=i,Us(n))}return de(n),null;case 5:if(Da(n),a=n.type,i!==null&&n.stateNode!=null)i.memoizedProps!==o&&Us(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return de(n),null}if(i=ct.current,Wu(n))cS(n);else{switch(g=Yg(ft.current),i){case 1:i=g.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:i=g.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":i=g.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":i=g.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":i=g.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof o.is=="string"?g.createElement("select",{is:o.is}):g.createElement("select"),o.multiple?i.multiple=!0:o.size&&(i.size=o.size);break;default:i=typeof o.is=="string"?g.createElement(a,{is:o.is}):g.createElement(a)}}i[ri]=n,i[xi]=o;t:for(g=n.child;g!==null;){if(g.tag===5||g.tag===6)i.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===n)break t;for(;g.sibling===null;){if(g.return===null||g.return===n)break t;g=g.return}g.sibling.return=g.return,g=g.sibling}n.stateNode=i;t:switch(Ke(i,a,o),a){case"button":case"input":case"select":case"textarea":i=!!o.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&Us(n)}}return de(n),n.flags&=-16777217,null;case 6:if(i&&n.stateNode!=null)i.memoizedProps!==o&&Us(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(s(166));if(i=ft.current,Wu(n)){if(i=n.stateNode,a=n.memoizedProps,o=null,g=pi,g!==null)switch(g.tag){case 27:case 5:o=g.memoizedProps}i[ri]=n,i=!!(i.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||x1(i.nodeValue,a)),i||il(n)}else i=Yg(i).createTextNode(o),i[ri]=n,n.stateNode=i}return de(n),null;case 13:if(o=n.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=Wu(n),o!==null&&o.dehydrated!==null){if(i===null){if(!g)throw Error(s(318));if(g=n.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[ri]=n}else Zu(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;de(n),g=!1}else g=hS(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return n.flags&256?(Bs(n),n):(Bs(n),null)}if(Bs(n),(n.flags&128)!==0)return n.lanes=a,n;if(a=o!==null,i=i!==null&&i.memoizedState!==null,a){o=n.child,g=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(g=o.alternate.memoizedState.cachePool.pool);var y=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(y=o.memoizedState.cachePool.pool),y!==g&&(o.flags|=2048)}return a!==i&&a&&(n.child.flags|=8192),kg(n,n.updateQueue),de(n),null;case 4:return ts(),i===null&&Rb(n.stateNode.containerInfo),de(n),null;case 10:return zs(n.type),de(n),null;case 19:if(tt(Oe),g=n.memoizedState,g===null)return de(n),null;if(o=(n.flags&128)!==0,y=g.rendering,y===null)if(o)gh(g,!1);else{if(me!==0||i!==null&&(i.flags&128)!==0)for(i=n.child;i!==null;){if(y=Mg(i),y!==null){for(n.flags|=128,gh(g,!1),i=y.updateQueue,n.updateQueue=i,kg(n,i),n.subtreeFlags=0,i=a,a=n.child;a!==null;)lS(a,i),a=a.sibling;return Z(Oe,Oe.current&1|2),n.child}i=i.sibling}g.tail!==null&&es()>Bg&&(n.flags|=128,o=!0,gh(g,!1),n.lanes=4194304)}else{if(!o)if(i=Mg(y),i!==null){if(n.flags|=128,o=!0,i=i.updateQueue,n.updateQueue=i,kg(n,i),gh(g,!0),g.tail===null&&g.tailMode==="hidden"&&!y.alternate&&!jt)return de(n),null}else 2*es()-g.renderingStartTime>Bg&&a!==536870912&&(n.flags|=128,o=!0,gh(g,!1),n.lanes=4194304);g.isBackwards?(y.sibling=n.child,n.child=y):(i=g.last,i!==null?i.sibling=y:n.child=y,g.last=y)}return g.tail!==null?(n=g.tail,g.rendering=n,g.tail=n.sibling,g.renderingStartTime=es(),n.sibling=null,i=Oe.current,Z(Oe,o?i&1|2:i&1),n):(de(n),null);case 22:case 23:return Bs(n),Dy(),o=n.memoizedState!==null,i!==null?i.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(a&536870912)!==0&&(n.flags&128)===0&&(de(n),n.subtreeFlags&6&&(n.flags|=8192)):de(n),a=n.updateQueue,a!==null&&kg(n,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==a&&(n.flags|=2048),i!==null&&tt(al),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),zs(De),de(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function HC(i,n){switch(my(n),n.tag){case 1:return i=n.flags,i&65536?(n.flags=i&-65537|128,n):null;case 3:return zs(De),ts(),i=n.flags,(i&65536)!==0&&(i&128)===0?(n.flags=i&-65537|128,n):null;case 26:case 27:case 5:return Da(n),null;case 13:if(Bs(n),i=n.memoizedState,i!==null&&i.dehydrated!==null){if(n.alternate===null)throw Error(s(340));Zu()}return i=n.flags,i&65536?(n.flags=i&-65537|128,n):null;case 19:return tt(Oe),null;case 4:return ts(),null;case 10:return zs(n.type),null;case 22:case 23:return Bs(n),Dy(),i!==null&&tt(al),i=n.flags,i&65536?(n.flags=i&-65537|128,n):null;case 24:return zs(De),null;case 25:return null;default:return null}}function k_(i,n){switch(my(n),n.tag){case 3:zs(De),ts();break;case 26:case 27:case 5:Da(n);break;case 4:ts();break;case 13:Bs(n);break;case 19:tt(Oe);break;case 10:zs(n.type);break;case 22:case 23:Bs(n),Dy(),i!==null&&tt(al);break;case 24:zs(De)}}function ph(i,n){try{var a=n.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var g=o.next;a=g;do{if((a.tag&i)===i){o=void 0;var y=a.create,_=a.inst;o=y(),_.destroy=o}a=a.next}while(a!==g)}}catch(C){ne(n,n.return,C)}}function Fa(i,n,a){try{var o=n.updateQueue,g=o!==null?o.lastEffect:null;if(g!==null){var y=g.next;o=y;do{if((o.tag&i)===i){var _=o.inst,C=_.destroy;if(C!==void 0){_.destroy=void 0,g=n;var L=a,F=C;try{F()}catch(X){ne(g,L,X)}}}o=o.next}while(o!==y)}}catch(X){ne(n,n.return,X)}}function z_(i){var n=i.updateQueue;if(n!==null){var a=i.stateNode;try{_S(n,a)}catch(o){ne(i,i.return,o)}}}function P_(i,n,a){a.props=ll(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(o){ne(i,n,o)}}function mh(i,n){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var o=i.stateNode;break;case 30:o=i.stateNode;break;default:o=i.stateNode}typeof a=="function"?i.refCleanup=a(o):a.current=o}}catch(g){ne(i,n,g)}}function ss(i,n){var a=i.ref,o=i.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(g){ne(i,n,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(g){ne(i,n,g)}else a.current=null}function B_(i){var n=i.type,a=i.memoizedProps,o=i.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(g){ne(i,i.return,g)}}function sb(i,n,a){try{var o=i.stateNode;aR(o,i.type,a,n),o[xi]=n}catch(g){ne(i,i.return,g)}}function H_(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ka(i.type)||i.tag===4}function ab(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||H_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ka(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function rb(i,n,a){var o=i.tag;if(o===5||o===6)i=i.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(i),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=Xg));else if(o!==4&&(o===27&&Ka(i.type)&&(a=i.stateNode,n=null),i=i.child,i!==null))for(rb(i,n,a),i=i.sibling;i!==null;)rb(i,n,a),i=i.sibling}function zg(i,n,a){var o=i.tag;if(o===5||o===6)i=i.stateNode,n?a.insertBefore(i,n):a.appendChild(i);else if(o!==4&&(o===27&&Ka(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(zg(i,n,a),i=i.sibling;i!==null;)zg(i,n,a),i=i.sibling}function U_(i){var n=i.stateNode,a=i.memoizedProps;try{for(var o=i.type,g=n.attributes;g.length;)n.removeAttributeNode(g[0]);Ke(n,o,a),n[ri]=i,n[xi]=a}catch(y){ne(i,i.return,y)}}var Is=!1,ve=!1,lb=!1,I_=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function UC(i,n){if(i=i.containerInfo,Ob=Jg,i=WA(i),ay(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else t:{a=(a=i.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var g=o.anchorOffset,y=o.focusNode;o=o.focusOffset;try{a.nodeType,y.nodeType}catch{a=null;break t}var _=0,C=-1,L=-1,F=0,X=0,K=i,j=null;e:for(;;){for(var q;K!==a||g!==0&&K.nodeType!==3||(C=_+g),K!==y||o!==0&&K.nodeType!==3||(L=_+o),K.nodeType===3&&(_+=K.nodeValue.length),(q=K.firstChild)!==null;)j=K,K=q;for(;;){if(K===i)break e;if(j===a&&++F===g&&(C=_),j===y&&++X===o&&(L=_),(q=K.nextSibling)!==null)break;K=j,j=K.parentNode}K=q}a=C===-1||L===-1?null:{start:C,end:L}}else a=null}a=a||{start:0,end:0}}else a=null;for(Nb={focusedElem:i,selectionRange:a},Jg=!1,Ue=n;Ue!==null;)if(n=Ue,i=n.child,(n.subtreeFlags&1024)!==0&&i!==null)i.return=n,Ue=i;else for(;Ue!==null;){switch(n=Ue,y=n.alternate,i=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,a=n,g=y.memoizedProps,y=y.memoizedState,o=a.stateNode;try{var bt=ll(a.type,g,a.elementType===a.type);i=o.getSnapshotBeforeUpdate(bt,y),o.__reactInternalSnapshotBeforeUpdate=i}catch(gt){ne(a,a.return,gt)}}break;case 3:if((i&1024)!==0){if(i=n.stateNode.containerInfo,a=i.nodeType,a===9)zb(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":zb(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=n.sibling,i!==null){i.return=n.return,Ue=i;break}Ue=n.return}}function F_(i,n,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Ga(i,a),o&4&&ph(5,a);break;case 1:if(Ga(i,a),o&4)if(i=a.stateNode,n===null)try{i.componentDidMount()}catch(_){ne(a,a.return,_)}else{var g=ll(a.type,n.memoizedProps);n=n.memoizedState;try{i.componentDidUpdate(g,n,i.__reactInternalSnapshotBeforeUpdate)}catch(_){ne(a,a.return,_)}}o&64&&z_(a),o&512&&mh(a,a.return);break;case 3:if(Ga(i,a),o&64&&(i=a.updateQueue,i!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{_S(i,n)}catch(_){ne(a,a.return,_)}}break;case 27:n===null&&o&4&&U_(a);case 26:case 5:Ga(i,a),n===null&&o&4&&B_(a),o&512&&mh(a,a.return);break;case 12:Ga(i,a);break;case 13:Ga(i,a),o&4&&q_(i,a),o&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=$C.bind(null,a),dR(i,a))));break;case 22:if(o=a.memoizedState!==null||Is,!o){n=n!==null&&n.memoizedState!==null||ve,g=Is;var y=ve;Is=o,(ve=n)&&!y?ja(i,a,(a.subtreeFlags&8772)!==0):Ga(i,a),Is=g,ve=y}break;case 30:break;default:Ga(i,a)}}function G_(i){var n=i.alternate;n!==null&&(i.alternate=null,G_(n)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(n=i.stateNode,n!==null&&Im(n)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var oe=null,Mi=!1;function Fs(i,n,a){for(a=a.child;a!==null;)j_(i,n,a),a=a.sibling}function j_(i,n,a){if(Bi&&typeof Bi.onCommitFiberUnmount=="function")try{Bi.onCommitFiberUnmount(Bu,a)}catch{}switch(a.tag){case 26:ve||ss(a,n),Fs(i,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ve||ss(a,n);var o=oe,g=Mi;Ka(a.type)&&(oe=a.stateNode,Mi=!1),Fs(i,n,a),Th(a.stateNode),oe=o,Mi=g;break;case 5:ve||ss(a,n);case 6:if(o=oe,g=Mi,oe=null,Fs(i,n,a),oe=o,Mi=g,oe!==null)if(Mi)try{(oe.nodeType===9?oe.body:oe.nodeName==="HTML"?oe.ownerDocument.body:oe).removeChild(a.stateNode)}catch(y){ne(a,n,y)}else try{oe.removeChild(a.stateNode)}catch(y){ne(a,n,y)}break;case 18:oe!==null&&(Mi?(i=oe,O1(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Lh(i)):O1(oe,a.stateNode));break;case 4:o=oe,g=Mi,oe=a.stateNode.containerInfo,Mi=!0,Fs(i,n,a),oe=o,Mi=g;break;case 0:case 11:case 14:case 15:ve||Fa(2,a,n),ve||Fa(4,a,n),Fs(i,n,a);break;case 1:ve||(ss(a,n),o=a.stateNode,typeof o.componentWillUnmount=="function"&&P_(a,n,o)),Fs(i,n,a);break;case 21:Fs(i,n,a);break;case 22:ve=(o=ve)||a.memoizedState!==null,Fs(i,n,a),ve=o;break;default:Fs(i,n,a)}}function q_(i,n){if(n.memoizedState===null&&(i=n.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Lh(i)}catch(a){ne(n,n.return,a)}}function IC(i){switch(i.tag){case 13:case 19:var n=i.stateNode;return n===null&&(n=i.stateNode=new I_),n;case 22:return i=i.stateNode,n=i._retryCache,n===null&&(n=i._retryCache=new I_),n;default:throw Error(s(435,i.tag))}}function ob(i,n){var a=IC(i);n.forEach(function(o){var g=KC.bind(null,i,o);a.has(o)||(a.add(o),o.then(g,g))})}function Fi(i,n){var a=n.deletions;if(a!==null)for(var o=0;o<a.length;o++){var g=a[o],y=i,_=n,C=_;t:for(;C!==null;){switch(C.tag){case 27:if(Ka(C.type)){oe=C.stateNode,Mi=!1;break t}break;case 5:oe=C.stateNode,Mi=!1;break t;case 3:case 4:oe=C.stateNode.containerInfo,Mi=!0;break t}C=C.return}if(oe===null)throw Error(s(160));j_(y,_,g),oe=null,Mi=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)V_(n,i),n=n.sibling}var kn=null;function V_(i,n){var a=i.alternate,o=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Fi(n,i),Gi(i),o&4&&(Fa(3,i,i.return),ph(3,i),Fa(5,i,i.return));break;case 1:Fi(n,i),Gi(i),o&512&&(ve||a===null||ss(a,a.return)),o&64&&Is&&(i=i.updateQueue,i!==null&&(o=i.callbacks,o!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var g=kn;if(Fi(n,i),Gi(i),o&512&&(ve||a===null||ss(a,a.return)),o&4){var y=a!==null?a.memoizedState:null;if(o=i.memoizedState,a===null)if(o===null)if(i.stateNode===null){t:{o=i.type,a=i.memoizedProps,g=g.ownerDocument||g;e:switch(o){case"title":y=g.getElementsByTagName("title")[0],(!y||y[Iu]||y[ri]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(o),g.head.insertBefore(y,g.querySelector("head > title"))),Ke(y,o,a),y[ri]=i,Be(y),o=y;break t;case"link":var _=U1("link","href",g).get(o+(a.href||""));if(_){for(var C=0;C<_.length;C++)if(y=_[C],y.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&y.getAttribute("rel")===(a.rel==null?null:a.rel)&&y.getAttribute("title")===(a.title==null?null:a.title)&&y.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(C,1);break e}}y=g.createElement(o),Ke(y,o,a),g.head.appendChild(y);break;case"meta":if(_=U1("meta","content",g).get(o+(a.content||""))){for(C=0;C<_.length;C++)if(y=_[C],y.getAttribute("content")===(a.content==null?null:""+a.content)&&y.getAttribute("name")===(a.name==null?null:a.name)&&y.getAttribute("property")===(a.property==null?null:a.property)&&y.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&y.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(C,1);break e}}y=g.createElement(o),Ke(y,o,a),g.head.appendChild(y);break;default:throw Error(s(468,o))}y[ri]=i,Be(y),o=y}i.stateNode=o}else I1(g,i.type,i.stateNode);else i.stateNode=H1(g,o,i.memoizedProps);else y!==o?(y===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):y.count--,o===null?I1(g,i.type,i.stateNode):H1(g,o,i.memoizedProps)):o===null&&i.stateNode!==null&&sb(i,i.memoizedProps,a.memoizedProps)}break;case 27:Fi(n,i),Gi(i),o&512&&(ve||a===null||ss(a,a.return)),a!==null&&o&4&&sb(i,i.memoizedProps,a.memoizedProps);break;case 5:if(Fi(n,i),Gi(i),o&512&&(ve||a===null||ss(a,a.return)),i.flags&32){g=i.stateNode;try{Uo(g,"")}catch(q){ne(i,i.return,q)}}o&4&&i.stateNode!=null&&(g=i.memoizedProps,sb(i,g,a!==null?a.memoizedProps:g)),o&1024&&(lb=!0);break;case 6:if(Fi(n,i),Gi(i),o&4){if(i.stateNode===null)throw Error(s(162));o=i.memoizedProps,a=i.stateNode;try{a.nodeValue=o}catch(q){ne(i,i.return,q)}}break;case 3:if(Qg=null,g=kn,kn=$g(n.containerInfo),Fi(n,i),kn=g,Gi(i),o&4&&a!==null&&a.memoizedState.isDehydrated)try{Lh(n.containerInfo)}catch(q){ne(i,i.return,q)}lb&&(lb=!1,X_(i));break;case 4:o=kn,kn=$g(i.stateNode.containerInfo),Fi(n,i),Gi(i),kn=o;break;case 12:Fi(n,i),Gi(i);break;case 13:Fi(n,i),Gi(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(gb=es()),o&4&&(o=i.updateQueue,o!==null&&(i.updateQueue=null,ob(i,o)));break;case 22:g=i.memoizedState!==null;var L=a!==null&&a.memoizedState!==null,F=Is,X=ve;if(Is=F||g,ve=X||L,Fi(n,i),ve=X,Is=F,Gi(i),o&8192)t:for(n=i.stateNode,n._visibility=g?n._visibility&-2:n._visibility|1,g&&(a===null||L||Is||ve||ol(i)),a=null,n=i;;){if(n.tag===5||n.tag===26){if(a===null){L=a=n;try{if(y=L.stateNode,g)_=y.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{C=L.stateNode;var K=L.memoizedProps.style,j=K!=null&&K.hasOwnProperty("display")?K.display:null;C.style.display=j==null||typeof j=="boolean"?"":(""+j).trim()}}catch(q){ne(L,L.return,q)}}}else if(n.tag===6){if(a===null){L=n;try{L.stateNode.nodeValue=g?"":L.memoizedProps}catch(q){ne(L,L.return,q)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===i)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break t;for(;n.sibling===null;){if(n.return===null||n.return===i)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=i.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,ob(i,a))));break;case 19:Fi(n,i),Gi(i),o&4&&(o=i.updateQueue,o!==null&&(i.updateQueue=null,ob(i,o)));break;case 30:break;case 21:break;default:Fi(n,i),Gi(i)}}function Gi(i){var n=i.flags;if(n&2){try{for(var a,o=i.return;o!==null;){if(H_(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var g=a.stateNode,y=ab(i);zg(i,y,g);break;case 5:var _=a.stateNode;a.flags&32&&(Uo(_,""),a.flags&=-33);var C=ab(i);zg(i,C,_);break;case 3:case 4:var L=a.stateNode.containerInfo,F=ab(i);rb(i,F,L);break;default:throw Error(s(161))}}catch(X){ne(i,i.return,X)}i.flags&=-3}n&4096&&(i.flags&=-4097)}function X_(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var n=i;X_(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),i=i.sibling}}function Ga(i,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)F_(i,n.alternate,n),n=n.sibling}function ol(i){for(i=i.child;i!==null;){var n=i;switch(n.tag){case 0:case 11:case 14:case 15:Fa(4,n,n.return),ol(n);break;case 1:ss(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&P_(n,n.return,a),ol(n);break;case 27:Th(n.stateNode);case 26:case 5:ss(n,n.return),ol(n);break;case 22:n.memoizedState===null&&ol(n);break;case 30:ol(n);break;default:ol(n)}i=i.sibling}}function ja(i,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,g=i,y=n,_=y.flags;switch(y.tag){case 0:case 11:case 15:ja(g,y,a),ph(4,y);break;case 1:if(ja(g,y,a),o=y,g=o.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(F){ne(o,o.return,F)}if(o=y,g=o.updateQueue,g!==null){var C=o.stateNode;try{var L=g.shared.hiddenCallbacks;if(L!==null)for(g.shared.hiddenCallbacks=null,g=0;g<L.length;g++)SS(L[g],C)}catch(F){ne(o,o.return,F)}}a&&_&64&&z_(y),mh(y,y.return);break;case 27:U_(y);case 26:case 5:ja(g,y,a),a&&o===null&&_&4&&B_(y),mh(y,y.return);break;case 12:ja(g,y,a);break;case 13:ja(g,y,a),a&&_&4&&q_(g,y);break;case 22:y.memoizedState===null&&ja(g,y,a),mh(y,y.return);break;case 30:break;default:ja(g,y,a)}n=n.sibling}}function cb(i,n){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(i=n.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&eh(a))}function ub(i,n){i=null,n.alternate!==null&&(i=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==i&&(n.refCount++,i!=null&&eh(i))}function as(i,n,a,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Y_(i,n,a,o),n=n.sibling}function Y_(i,n,a,o){var g=n.flags;switch(n.tag){case 0:case 11:case 15:as(i,n,a,o),g&2048&&ph(9,n);break;case 1:as(i,n,a,o);break;case 3:as(i,n,a,o),g&2048&&(i=null,n.alternate!==null&&(i=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==i&&(n.refCount++,i!=null&&eh(i)));break;case 12:if(g&2048){as(i,n,a,o),i=n.stateNode;try{var y=n.memoizedProps,_=y.id,C=y.onPostCommit;typeof C=="function"&&C(_,n.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(L){ne(n,n.return,L)}}else as(i,n,a,o);break;case 13:as(i,n,a,o);break;case 23:break;case 22:y=n.stateNode,_=n.alternate,n.memoizedState!==null?y._visibility&2?as(i,n,a,o):yh(i,n):y._visibility&2?as(i,n,a,o):(y._visibility|=2,sc(i,n,a,o,(n.subtreeFlags&10256)!==0)),g&2048&&cb(_,n);break;case 24:as(i,n,a,o),g&2048&&ub(n.alternate,n);break;default:as(i,n,a,o)}}function sc(i,n,a,o,g){for(g=g&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var y=i,_=n,C=a,L=o,F=_.flags;switch(_.tag){case 0:case 11:case 15:sc(y,_,C,L,g),ph(8,_);break;case 23:break;case 22:var X=_.stateNode;_.memoizedState!==null?X._visibility&2?sc(y,_,C,L,g):yh(y,_):(X._visibility|=2,sc(y,_,C,L,g)),g&&F&2048&&cb(_.alternate,_);break;case 24:sc(y,_,C,L,g),g&&F&2048&&ub(_.alternate,_);break;default:sc(y,_,C,L,g)}n=n.sibling}}function yh(i,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=i,o=n,g=o.flags;switch(o.tag){case 22:yh(a,o),g&2048&&cb(o.alternate,o);break;case 24:yh(a,o),g&2048&&ub(o.alternate,o);break;default:yh(a,o)}n=n.sibling}}var bh=8192;function ac(i){if(i.subtreeFlags&bh)for(i=i.child;i!==null;)$_(i),i=i.sibling}function $_(i){switch(i.tag){case 26:ac(i),i.flags&bh&&i.memoizedState!==null&&TR(kn,i.memoizedState,i.memoizedProps);break;case 5:ac(i);break;case 3:case 4:var n=kn;kn=$g(i.stateNode.containerInfo),ac(i),kn=n;break;case 22:i.memoizedState===null&&(n=i.alternate,n!==null&&n.memoizedState!==null?(n=bh,bh=16777216,ac(i),bh=n):ac(i));break;default:ac(i)}}function K_(i){var n=i.alternate;if(n!==null&&(i=n.child,i!==null)){n.child=null;do n=i.sibling,i.sibling=null,i=n;while(i!==null)}}function vh(i){var n=i.deletions;if((i.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];Ue=o,W_(o,i)}K_(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Q_(i),i=i.sibling}function Q_(i){switch(i.tag){case 0:case 11:case 15:vh(i),i.flags&2048&&Fa(9,i,i.return);break;case 3:vh(i);break;case 12:vh(i);break;case 22:var n=i.stateNode;i.memoizedState!==null&&n._visibility&2&&(i.return===null||i.return.tag!==13)?(n._visibility&=-3,Pg(i)):vh(i);break;default:vh(i)}}function Pg(i){var n=i.deletions;if((i.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];Ue=o,W_(o,i)}K_(i)}for(i=i.child;i!==null;){switch(n=i,n.tag){case 0:case 11:case 15:Fa(8,n,n.return),Pg(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,Pg(n));break;default:Pg(n)}i=i.sibling}}function W_(i,n){for(;Ue!==null;){var a=Ue;switch(a.tag){case 0:case 11:case 15:Fa(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:eh(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Ue=o;else t:for(a=i;Ue!==null;){o=Ue;var g=o.sibling,y=o.return;if(G_(o),o===a){Ue=null;break t}if(g!==null){g.return=y,Ue=g;break t}Ue=y}}}var FC={getCacheForType:function(i){var n=li(De),a=n.data.get(i);return a===void 0&&(a=i(),n.data.set(i,a)),a}},GC=typeof WeakMap=="function"?WeakMap:Map,Yt=0,se=null,Ot=null,Bt=0,$t=0,ji=null,qa=!1,rc=!1,hb=!1,Gs=0,me=0,Va=0,cl=0,db=0,An=0,lc=0,Ah=null,Di=null,fb=!1,gb=0,Bg=1/0,Hg=null,Xa=null,$e=0,Ya=null,oc=null,cc=0,pb=0,mb=null,Z_=null,Sh=0,yb=null;function qi(){if((Yt&2)!==0&&Bt!==0)return Bt&-Bt;if(H.T!==null){var i=Qo;return i!==0?i:Eb()}return gA()}function J_(){An===0&&(An=(Bt&536870912)===0||jt?uA():536870912);var i=vn.current;return i!==null&&(i.flags|=32),An}function Vi(i,n,a){(i===se&&($t===2||$t===9)||i.cancelPendingCommit!==null)&&(uc(i,0),$a(i,Bt,An,!1)),Uu(i,a),((Yt&2)===0||i!==se)&&(i===se&&((Yt&2)===0&&(cl|=a),me===4&&$a(i,Bt,An,!1)),rs(i))}function t1(i,n,a){if((Yt&6)!==0)throw Error(s(327));var o=!a&&(n&124)===0&&(n&i.expiredLanes)===0||Hu(i,n),g=o?VC(i,n):Ab(i,n,!0),y=o;do{if(g===0){rc&&!o&&$a(i,n,0,!1);break}else{if(a=i.current.alternate,y&&!jC(a)){g=Ab(i,n,!1),y=!1;continue}if(g===2){if(y=n,i.errorRecoveryDisabledLanes&y)var _=0;else _=i.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){n=_;t:{var C=i;g=Ah;var L=C.current.memoizedState.isDehydrated;if(L&&(uc(C,_).flags|=256),_=Ab(C,_,!1),_!==2){if(hb&&!L){C.errorRecoveryDisabledLanes|=y,cl|=y,g=4;break t}y=Di,Di=g,y!==null&&(Di===null?Di=y:Di.push.apply(Di,y))}g=_}if(y=!1,g!==2)continue}}if(g===1){uc(i,0),$a(i,n,0,!0);break}t:{switch(o=i,y=g,y){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:$a(o,n,An,!qa);break t;case 2:Di=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(g=gb+300-es(),10<g)){if($a(o,n,An,!qa),Kf(o,0,!0)!==0)break t;o.timeoutHandle=M1(e1.bind(null,o,a,Di,Hg,fb,n,An,cl,lc,qa,y,2,-0,0),g);break t}e1(o,a,Di,Hg,fb,n,An,cl,lc,qa,y,0,-0,0)}}break}while(!0);rs(i)}function e1(i,n,a,o,g,y,_,C,L,F,X,K,j,q){if(i.timeoutHandle=-1,K=n.subtreeFlags,(K&8192||(K&16785408)===16785408)&&(Rh={stylesheets:null,count:0,unsuspend:ER},$_(n),K=xR(),K!==null)){i.cancelPendingCommit=K(o1.bind(null,i,n,y,a,o,g,_,C,L,X,1,j,q)),$a(i,y,_,!F);return}o1(i,n,y,a,o,g,_,C,L)}function jC(i){for(var n=i;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var g=a[o],y=g.getSnapshot;g=g.value;try{if(!Ui(y(),g))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===i)break;for(;n.sibling===null;){if(n.return===null||n.return===i)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function $a(i,n,a,o){n&=~db,n&=~cl,i.suspendedLanes|=n,i.pingedLanes&=~n,o&&(i.warmLanes|=n),o=i.expirationTimes;for(var g=n;0<g;){var y=31-Hi(g),_=1<<y;o[y]=-1,g&=~_}a!==0&&dA(i,a,n)}function Ug(){return(Yt&6)===0?(_h(0),!1):!0}function bb(){if(Ot!==null){if($t===0)var i=Ot.return;else i=Ot,ks=nl=null,zy(i),ic=null,dh=0,i=Ot;for(;i!==null;)k_(i.alternate,i),i=i.return;Ot=null}}function uc(i,n){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,lR(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),bb(),se=i,Ot=a=Os(i.current,null),Bt=n,$t=0,ji=null,qa=!1,rc=Hu(i,n),hb=!1,lc=An=db=cl=Va=me=0,Di=Ah=null,fb=!1,(n&8)!==0&&(n|=n&32);var o=i.entangledLanes;if(o!==0)for(i=i.entanglements,o&=n;0<o;){var g=31-Hi(o),y=1<<g;n|=i[g],o&=~y}return Gs=n,lg(),a}function i1(i,n){xt=null,H.H=xg,n===nh||n===mg?(n=vS(),$t=3):n===mS?(n=vS(),$t=4):$t=n===A_?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,ji=n,Ot===null&&(me=1,Og(i,pn(n,i.current)))}function n1(){var i=H.H;return H.H=xg,i===null?xg:i}function s1(){var i=H.A;return H.A=FC,i}function vb(){me=4,qa||(Bt&4194048)!==Bt&&vn.current!==null||(rc=!0),(Va&134217727)===0&&(cl&134217727)===0||se===null||$a(se,Bt,An,!1)}function Ab(i,n,a){var o=Yt;Yt|=2;var g=n1(),y=s1();(se!==i||Bt!==n)&&(Hg=null,uc(i,n)),n=!1;var _=me;t:do try{if($t!==0&&Ot!==null){var C=Ot,L=ji;switch($t){case 8:bb(),_=6;break t;case 3:case 2:case 9:case 6:vn.current===null&&(n=!0);var F=$t;if($t=0,ji=null,hc(i,C,L,F),a&&rc){_=0;break t}break;default:F=$t,$t=0,ji=null,hc(i,C,L,F)}}qC(),_=me;break}catch(X){i1(i,X)}while(!0);return n&&i.shellSuspendCounter++,ks=nl=null,Yt=o,H.H=g,H.A=y,Ot===null&&(se=null,Bt=0,lg()),_}function qC(){for(;Ot!==null;)a1(Ot)}function VC(i,n){var a=Yt;Yt|=2;var o=n1(),g=s1();se!==i||Bt!==n?(Hg=null,Bg=es()+500,uc(i,n)):rc=Hu(i,n);t:do try{if($t!==0&&Ot!==null){n=Ot;var y=ji;e:switch($t){case 1:$t=0,ji=null,hc(i,n,y,1);break;case 2:case 9:if(yS(y)){$t=0,ji=null,r1(n);break}n=function(){$t!==2&&$t!==9||se!==i||($t=7),rs(i)},y.then(n,n);break t;case 3:$t=7;break t;case 4:$t=5;break t;case 7:yS(y)?($t=0,ji=null,r1(n)):($t=0,ji=null,hc(i,n,y,7));break;case 5:var _=null;switch(Ot.tag){case 26:_=Ot.memoizedState;case 5:case 27:var C=Ot;if(!_||F1(_)){$t=0,ji=null;var L=C.sibling;if(L!==null)Ot=L;else{var F=C.return;F!==null?(Ot=F,Ig(F)):Ot=null}break e}}$t=0,ji=null,hc(i,n,y,5);break;case 6:$t=0,ji=null,hc(i,n,y,6);break;case 8:bb(),me=6;break t;default:throw Error(s(462))}}XC();break}catch(X){i1(i,X)}while(!0);return ks=nl=null,H.H=o,H.A=g,Yt=a,Ot!==null?0:(se=null,Bt=0,lg(),me)}function XC(){for(;Ot!==null&&!gx();)a1(Ot)}function a1(i){var n=N_(i.alternate,i,Gs);i.memoizedProps=i.pendingProps,n===null?Ig(i):Ot=n}function r1(i){var n=i,a=n.alternate;switch(n.tag){case 15:case 0:n=x_(a,n,n.pendingProps,n.type,void 0,Bt);break;case 11:n=x_(a,n,n.pendingProps,n.type.render,n.ref,Bt);break;case 5:zy(n);default:k_(a,n),n=Ot=lS(n,Gs),n=N_(a,n,Gs)}i.memoizedProps=i.pendingProps,n===null?Ig(i):Ot=n}function hc(i,n,a,o){ks=nl=null,zy(n),ic=null,dh=0;var g=n.return;try{if(zC(i,g,n,a,Bt)){me=1,Og(i,pn(a,i.current)),Ot=null;return}}catch(y){if(g!==null)throw Ot=g,y;me=1,Og(i,pn(a,i.current)),Ot=null;return}n.flags&32768?(jt||o===1?i=!0:rc||(Bt&536870912)!==0?i=!1:(qa=i=!0,(o===2||o===9||o===3||o===6)&&(o=vn.current,o!==null&&o.tag===13&&(o.flags|=16384))),l1(n,i)):Ig(n)}function Ig(i){var n=i;do{if((n.flags&32768)!==0){l1(n,qa);return}i=n.return;var a=BC(n.alternate,n,Gs);if(a!==null){Ot=a;return}if(n=n.sibling,n!==null){Ot=n;return}Ot=n=i}while(n!==null);me===0&&(me=5)}function l1(i,n){do{var a=HC(i.alternate,i);if(a!==null){a.flags&=32767,Ot=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(i=i.sibling,i!==null)){Ot=i;return}Ot=i=a}while(i!==null);me=6,Ot=null}function o1(i,n,a,o,g,y,_,C,L){i.cancelPendingCommit=null;do Fg();while($e!==0);if((Yt&6)!==0)throw Error(s(327));if(n!==null){if(n===i.current)throw Error(s(177));if(y=n.lanes|n.childLanes,y|=uy,Ex(i,a,y,_,C,L),i===se&&(Ot=se=null,Bt=0),oc=n,Ya=i,cc=a,pb=y,mb=g,Z_=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,QC(Xf,function(){return f1(),null})):(i.callbackNode=null,i.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=H.T,H.T=null,g=V.p,V.p=2,_=Yt,Yt|=4;try{UC(i,n,a)}finally{Yt=_,V.p=g,H.T=o}}$e=1,c1(),u1(),h1()}}function c1(){if($e===1){$e=0;var i=Ya,n=oc,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=H.T,H.T=null;var o=V.p;V.p=2;var g=Yt;Yt|=4;try{V_(n,i);var y=Nb,_=WA(i.containerInfo),C=y.focusedElem,L=y.selectionRange;if(_!==C&&C&&C.ownerDocument&&QA(C.ownerDocument.documentElement,C)){if(L!==null&&ay(C)){var F=L.start,X=L.end;if(X===void 0&&(X=F),"selectionStart"in C)C.selectionStart=F,C.selectionEnd=Math.min(X,C.value.length);else{var K=C.ownerDocument||document,j=K&&K.defaultView||window;if(j.getSelection){var q=j.getSelection(),bt=C.textContent.length,gt=Math.min(L.start,bt),Zt=L.end===void 0?gt:Math.min(L.end,bt);!q.extend&&gt>Zt&&(_=Zt,Zt=gt,gt=_);var U=KA(C,gt),P=KA(C,Zt);if(U&&P&&(q.rangeCount!==1||q.anchorNode!==U.node||q.anchorOffset!==U.offset||q.focusNode!==P.node||q.focusOffset!==P.offset)){var I=K.createRange();I.setStart(U.node,U.offset),q.removeAllRanges(),gt>Zt?(q.addRange(I),q.extend(P.node,P.offset)):(I.setEnd(P.node,P.offset),q.addRange(I))}}}}for(K=[],q=C;q=q.parentNode;)q.nodeType===1&&K.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<K.length;C++){var Y=K[C];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Jg=!!Ob,Nb=Ob=null}finally{Yt=g,V.p=o,H.T=a}}i.current=n,$e=2}}function u1(){if($e===2){$e=0;var i=Ya,n=oc,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=H.T,H.T=null;var o=V.p;V.p=2;var g=Yt;Yt|=4;try{F_(i,n.alternate,n)}finally{Yt=g,V.p=o,H.T=a}}$e=3}}function h1(){if($e===4||$e===3){$e=0,px();var i=Ya,n=oc,a=cc,o=Z_;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?$e=5:($e=0,oc=Ya=null,d1(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(Xa=null),Hm(a),n=n.stateNode,Bi&&typeof Bi.onCommitFiberRoot=="function")try{Bi.onCommitFiberRoot(Bu,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=H.T,g=V.p,V.p=2,H.T=null;try{for(var y=i.onRecoverableError,_=0;_<o.length;_++){var C=o[_];y(C.value,{componentStack:C.stack})}}finally{H.T=n,V.p=g}}(cc&3)!==0&&Fg(),rs(i),g=i.pendingLanes,(a&4194090)!==0&&(g&42)!==0?i===yb?Sh++:(Sh=0,yb=i):Sh=0,_h(0)}}function d1(i,n){(i.pooledCacheLanes&=n)===0&&(n=i.pooledCache,n!=null&&(i.pooledCache=null,eh(n)))}function Fg(i){return c1(),u1(),h1(),f1()}function f1(){if($e!==5)return!1;var i=Ya,n=pb;pb=0;var a=Hm(cc),o=H.T,g=V.p;try{V.p=32>a?32:a,H.T=null,a=mb,mb=null;var y=Ya,_=cc;if($e=0,oc=Ya=null,cc=0,(Yt&6)!==0)throw Error(s(331));var C=Yt;if(Yt|=4,Q_(y.current),Y_(y,y.current,_,a),Yt=C,_h(0,!1),Bi&&typeof Bi.onPostCommitFiberRoot=="function")try{Bi.onPostCommitFiberRoot(Bu,y)}catch{}return!0}finally{V.p=g,H.T=o,d1(i,n)}}function g1(i,n,a){n=pn(a,n),n=Ky(i.stateNode,n,2),i=Ba(i,n,2),i!==null&&(Uu(i,2),rs(i))}function ne(i,n,a){if(i.tag===3)g1(i,i,a);else for(;n!==null;){if(n.tag===3){g1(n,i,a);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Xa===null||!Xa.has(o))){i=pn(a,i),a=b_(2),o=Ba(n,a,2),o!==null&&(v_(a,o,n,i),Uu(o,2),rs(o));break}}n=n.return}}function Sb(i,n,a){var o=i.pingCache;if(o===null){o=i.pingCache=new GC;var g=new Set;o.set(n,g)}else g=o.get(n),g===void 0&&(g=new Set,o.set(n,g));g.has(a)||(hb=!0,g.add(a),i=YC.bind(null,i,n,a),n.then(i,i))}function YC(i,n,a){var o=i.pingCache;o!==null&&o.delete(n),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,se===i&&(Bt&a)===a&&(me===4||me===3&&(Bt&62914560)===Bt&&300>es()-gb?(Yt&2)===0&&uc(i,0):db|=a,lc===Bt&&(lc=0)),rs(i)}function p1(i,n){n===0&&(n=hA()),i=Xo(i,n),i!==null&&(Uu(i,n),rs(i))}function $C(i){var n=i.memoizedState,a=0;n!==null&&(a=n.retryLane),p1(i,a)}function KC(i,n){var a=0;switch(i.tag){case 13:var o=i.stateNode,g=i.memoizedState;g!==null&&(a=g.retryLane);break;case 19:o=i.stateNode;break;case 22:o=i.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(n),p1(i,a)}function QC(i,n){return Oo(i,n)}var Gg=null,dc=null,_b=!1,jg=!1,wb=!1,ul=0;function rs(i){i!==dc&&i.next===null&&(dc===null?Gg=dc=i:dc=dc.next=i),jg=!0,_b||(_b=!0,ZC())}function _h(i,n){if(!wb&&jg){wb=!0;do for(var a=!1,o=Gg;o!==null;){if(i!==0){var g=o.pendingLanes;if(g===0)var y=0;else{var _=o.suspendedLanes,C=o.pingedLanes;y=(1<<31-Hi(42|i)+1)-1,y&=g&~(_&~C),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(a=!0,v1(o,y))}else y=Bt,y=Kf(o,o===se?y:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(y&3)===0||Hu(o,y)||(a=!0,v1(o,y));o=o.next}while(a);wb=!1}}function WC(){m1()}function m1(){jg=_b=!1;var i=0;ul!==0&&(rR()&&(i=ul),ul=0);for(var n=es(),a=null,o=Gg;o!==null;){var g=o.next,y=y1(o,n);y===0?(o.next=null,a===null?Gg=g:a.next=g,g===null&&(dc=a)):(a=o,(i!==0||(y&3)!==0)&&(jg=!0)),o=g}_h(i)}function y1(i,n){for(var a=i.suspendedLanes,o=i.pingedLanes,g=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var _=31-Hi(y),C=1<<_,L=g[_];L===-1?((C&a)===0||(C&o)!==0)&&(g[_]=wx(C,n)):L<=n&&(i.expiredLanes|=C),y&=~C}if(n=se,a=Bt,a=Kf(i,i===n?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),o=i.callbackNode,a===0||i===n&&($t===2||$t===9)||i.cancelPendingCommit!==null)return o!==null&&o!==null&&Pu(o),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||Hu(i,a)){if(n=a&-a,n===i.callbackPriority)return n;switch(o!==null&&Pu(o),Hm(a)){case 2:case 8:a=oA;break;case 32:a=Xf;break;case 268435456:a=cA;break;default:a=Xf}return o=b1.bind(null,i),a=Oo(a,o),i.callbackPriority=n,i.callbackNode=a,n}return o!==null&&o!==null&&Pu(o),i.callbackPriority=2,i.callbackNode=null,2}function b1(i,n){if($e!==0&&$e!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(Fg()&&i.callbackNode!==a)return null;var o=Bt;return o=Kf(i,i===se?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),o===0?null:(t1(i,o,n),y1(i,es()),i.callbackNode!=null&&i.callbackNode===a?b1.bind(null,i):null)}function v1(i,n){if(Fg())return null;t1(i,n,!0)}function ZC(){oR(function(){(Yt&6)!==0?Oo(lA,WC):m1()})}function Eb(){return ul===0&&(ul=uA()),ul}function A1(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:tg(""+i)}function S1(i,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,i.id&&a.setAttribute("form",i.id),n.parentNode.insertBefore(a,n),i=new FormData(i),a.parentNode.removeChild(a),i}function JC(i,n,a,o,g){if(n==="submit"&&a&&a.stateNode===g){var y=A1((g[xi]||null).action),_=o.submitter;_&&(n=(n=_[xi]||null)?A1(n.formAction):_.getAttribute("formAction"),n!==null&&(y=n,_=null));var C=new sg("action","action",null,o,g);i.push({event:C,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(ul!==0){var L=_?S1(g,_):new FormData(g);qy(a,{pending:!0,data:L,method:g.method,action:y},null,L)}}else typeof y=="function"&&(C.preventDefault(),L=_?S1(g,_):new FormData(g),qy(a,{pending:!0,data:L,method:g.method,action:y},y,L))},currentTarget:g}]})}}for(var Tb=0;Tb<cy.length;Tb++){var xb=cy[Tb],tR=xb.toLowerCase(),eR=xb[0].toUpperCase()+xb.slice(1);Ln(tR,"on"+eR)}Ln(tS,"onAnimationEnd"),Ln(eS,"onAnimationIteration"),Ln(iS,"onAnimationStart"),Ln("dblclick","onDoubleClick"),Ln("focusin","onFocus"),Ln("focusout","onBlur"),Ln(bC,"onTransitionRun"),Ln(vC,"onTransitionStart"),Ln(AC,"onTransitionCancel"),Ln(nS,"onTransitionEnd"),Po("onMouseEnter",["mouseout","mouseover"]),Po("onMouseLeave",["mouseout","mouseover"]),Po("onPointerEnter",["pointerout","pointerover"]),Po("onPointerLeave",["pointerout","pointerover"]),$r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$r("onBeforeInput",["compositionend","keypress","textInput","paste"]),$r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wh));function _1(i,n){n=(n&4)!==0;for(var a=0;a<i.length;a++){var o=i[a],g=o.event;o=o.listeners;t:{var y=void 0;if(n)for(var _=o.length-1;0<=_;_--){var C=o[_],L=C.instance,F=C.currentTarget;if(C=C.listener,L!==y&&g.isPropagationStopped())break t;y=C,g.currentTarget=F;try{y(g)}catch(X){Dg(X)}g.currentTarget=null,y=L}else for(_=0;_<o.length;_++){if(C=o[_],L=C.instance,F=C.currentTarget,C=C.listener,L!==y&&g.isPropagationStopped())break t;y=C,g.currentTarget=F;try{y(g)}catch(X){Dg(X)}g.currentTarget=null,y=L}}}}function Nt(i,n){var a=n[Um];a===void 0&&(a=n[Um]=new Set);var o=i+"__bubble";a.has(o)||(w1(n,i,2,!1),a.add(o))}function Cb(i,n,a){var o=0;n&&(o|=4),w1(a,i,o,n)}var qg="_reactListening"+Math.random().toString(36).slice(2);function Rb(i){if(!i[qg]){i[qg]=!0,mA.forEach(function(a){a!=="selectionchange"&&(iR.has(a)||Cb(a,!1,i),Cb(a,!0,i))});var n=i.nodeType===9?i:i.ownerDocument;n===null||n[qg]||(n[qg]=!0,Cb("selectionchange",!1,n))}}function w1(i,n,a,o){switch(Y1(n)){case 2:var g=MR;break;case 8:g=DR;break;default:g=Gb}a=g.bind(null,n,a,i),g=void 0,!Qm||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(g=!0),o?g!==void 0?i.addEventListener(n,a,{capture:!0,passive:g}):i.addEventListener(n,a,!0):g!==void 0?i.addEventListener(n,a,{passive:g}):i.addEventListener(n,a,!1)}function Mb(i,n,a,o,g){var y=o;if((n&1)===0&&(n&2)===0&&o!==null)t:for(;;){if(o===null)return;var _=o.tag;if(_===3||_===4){var C=o.stateNode.containerInfo;if(C===g)break;if(_===4)for(_=o.return;_!==null;){var L=_.tag;if((L===3||L===4)&&_.stateNode.containerInfo===g)return;_=_.return}for(;C!==null;){if(_=Lo(C),_===null)return;if(L=_.tag,L===5||L===6||L===26||L===27){o=y=_;continue t}C=C.parentNode}}o=o.return}DA(function(){var F=y,X=$m(a),K=[];t:{var j=sS.get(i);if(j!==void 0){var q=sg,bt=i;switch(i){case"keypress":if(ig(a)===0)break t;case"keydown":case"keyup":q=Qx;break;case"focusin":bt="focus",q=ty;break;case"focusout":bt="blur",q=ty;break;case"beforeblur":case"afterblur":q=ty;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=LA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=Hx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=Jx;break;case tS:case eS:case iS:q=Fx;break;case nS:q=eC;break;case"scroll":case"scrollend":q=Px;break;case"wheel":q=nC;break;case"copy":case"cut":case"paste":q=jx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=zA;break;case"toggle":case"beforetoggle":q=aC}var gt=(n&4)!==0,Zt=!gt&&(i==="scroll"||i==="scrollend"),U=gt?j!==null?j+"Capture":null:j;gt=[];for(var P=F,I;P!==null;){var Y=P;if(I=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||I===null||U===null||(Y=Gu(P,U),Y!=null&&gt.push(Eh(P,Y,I))),Zt)break;P=P.return}0<gt.length&&(j=new q(j,bt,null,a,X),K.push({event:j,listeners:gt}))}}if((n&7)===0){t:{if(j=i==="mouseover"||i==="pointerover",q=i==="mouseout"||i==="pointerout",j&&a!==Ym&&(bt=a.relatedTarget||a.fromElement)&&(Lo(bt)||bt[No]))break t;if((q||j)&&(j=X.window===X?X:(j=X.ownerDocument)?j.defaultView||j.parentWindow:window,q?(bt=a.relatedTarget||a.toElement,q=F,bt=bt?Lo(bt):null,bt!==null&&(Zt=l(bt),gt=bt.tag,bt!==Zt||gt!==5&&gt!==27&&gt!==6)&&(bt=null)):(q=null,bt=F),q!==bt)){if(gt=LA,Y="onMouseLeave",U="onMouseEnter",P="mouse",(i==="pointerout"||i==="pointerover")&&(gt=zA,Y="onPointerLeave",U="onPointerEnter",P="pointer"),Zt=q==null?j:Fu(q),I=bt==null?j:Fu(bt),j=new gt(Y,P+"leave",q,a,X),j.target=Zt,j.relatedTarget=I,Y=null,Lo(X)===F&&(gt=new gt(U,P+"enter",bt,a,X),gt.target=I,gt.relatedTarget=Zt,Y=gt),Zt=Y,q&&bt)e:{for(gt=q,U=bt,P=0,I=gt;I;I=fc(I))P++;for(I=0,Y=U;Y;Y=fc(Y))I++;for(;0<P-I;)gt=fc(gt),P--;for(;0<I-P;)U=fc(U),I--;for(;P--;){if(gt===U||U!==null&&gt===U.alternate)break e;gt=fc(gt),U=fc(U)}gt=null}else gt=null;q!==null&&E1(K,j,q,gt,!1),bt!==null&&Zt!==null&&E1(K,Zt,bt,gt,!0)}}t:{if(j=F?Fu(F):window,q=j.nodeName&&j.nodeName.toLowerCase(),q==="select"||q==="input"&&j.type==="file")var lt=jA;else if(FA(j))if(qA)lt=pC;else{lt=fC;var Ct=dC}else q=j.nodeName,!q||q.toLowerCase()!=="input"||j.type!=="checkbox"&&j.type!=="radio"?F&&Xm(F.elementType)&&(lt=jA):lt=gC;if(lt&&(lt=lt(i,F))){GA(K,lt,a,X);break t}Ct&&Ct(i,j,F),i==="focusout"&&F&&j.type==="number"&&F.memoizedProps.value!=null&&Vm(j,"number",j.value)}switch(Ct=F?Fu(F):window,i){case"focusin":(FA(Ct)||Ct.contentEditable==="true")&&(jo=Ct,ry=F,Qu=null);break;case"focusout":Qu=ry=jo=null;break;case"mousedown":ly=!0;break;case"contextmenu":case"mouseup":case"dragend":ly=!1,ZA(K,a,X);break;case"selectionchange":if(yC)break;case"keydown":case"keyup":ZA(K,a,X)}var ht;if(iy)t:{switch(i){case"compositionstart":var mt="onCompositionStart";break t;case"compositionend":mt="onCompositionEnd";break t;case"compositionupdate":mt="onCompositionUpdate";break t}mt=void 0}else Go?UA(i,a)&&(mt="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(mt="onCompositionStart");mt&&(PA&&a.locale!=="ko"&&(Go||mt!=="onCompositionStart"?mt==="onCompositionEnd"&&Go&&(ht=OA()):(La=X,Wm="value"in La?La.value:La.textContent,Go=!0)),Ct=Vg(F,mt),0<Ct.length&&(mt=new kA(mt,i,null,a,X),K.push({event:mt,listeners:Ct}),ht?mt.data=ht:(ht=IA(a),ht!==null&&(mt.data=ht)))),(ht=lC?oC(i,a):cC(i,a))&&(mt=Vg(F,"onBeforeInput"),0<mt.length&&(Ct=new kA("onBeforeInput","beforeinput",null,a,X),K.push({event:Ct,listeners:mt}),Ct.data=ht)),JC(K,i,F,a,X)}_1(K,n)})}function Eh(i,n,a){return{instance:i,listener:n,currentTarget:a}}function Vg(i,n){for(var a=n+"Capture",o=[];i!==null;){var g=i,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=Gu(i,a),g!=null&&o.unshift(Eh(i,g,y)),g=Gu(i,n),g!=null&&o.push(Eh(i,g,y))),i.tag===3)return o;i=i.return}return[]}function fc(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function E1(i,n,a,o,g){for(var y=n._reactName,_=[];a!==null&&a!==o;){var C=a,L=C.alternate,F=C.stateNode;if(C=C.tag,L!==null&&L===o)break;C!==5&&C!==26&&C!==27||F===null||(L=F,g?(F=Gu(a,y),F!=null&&_.unshift(Eh(a,F,L))):g||(F=Gu(a,y),F!=null&&_.push(Eh(a,F,L)))),a=a.return}_.length!==0&&i.push({event:n,listeners:_})}var nR=/\r\n?/g,sR=/\u0000|\uFFFD/g;function T1(i){return(typeof i=="string"?i:""+i).replace(nR,`
`).replace(sR,"")}function x1(i,n){return n=T1(n),T1(i)===n}function Xg(){}function Wt(i,n,a,o,g,y){switch(a){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||Uo(i,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&Uo(i,""+o);break;case"className":Wf(i,"class",o);break;case"tabIndex":Wf(i,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Wf(i,a,o);break;case"style":RA(i,o,y);break;case"data":if(n!=="object"){Wf(i,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||a!=="href")){i.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){i.removeAttribute(a);break}o=tg(""+o),i.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(a==="formAction"?(n!=="input"&&Wt(i,n,"name",g.name,g,null),Wt(i,n,"formEncType",g.formEncType,g,null),Wt(i,n,"formMethod",g.formMethod,g,null),Wt(i,n,"formTarget",g.formTarget,g,null)):(Wt(i,n,"encType",g.encType,g,null),Wt(i,n,"method",g.method,g,null),Wt(i,n,"target",g.target,g,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){i.removeAttribute(a);break}o=tg(""+o),i.setAttribute(a,o);break;case"onClick":o!=null&&(i.onclick=Xg);break;case"onScroll":o!=null&&Nt("scroll",i);break;case"onScrollEnd":o!=null&&Nt("scrollend",i);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":i.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){i.removeAttribute("xlink:href");break}a=tg(""+o),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?i.setAttribute(a,""+o):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":o===!0?i.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?i.setAttribute(a,o):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?i.setAttribute(a,o):i.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?i.removeAttribute(a):i.setAttribute(a,o);break;case"popover":Nt("beforetoggle",i),Nt("toggle",i),Qf(i,"popover",o);break;case"xlinkActuate":Ms(i,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Ms(i,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Ms(i,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Ms(i,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Ms(i,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Ms(i,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Ms(i,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Ms(i,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Ms(i,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Qf(i,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=kx.get(a)||a,Qf(i,a,o))}}function Db(i,n,a,o,g,y){switch(a){case"style":RA(i,o,y);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof o=="string"?Uo(i,o):(typeof o=="number"||typeof o=="bigint")&&Uo(i,""+o);break;case"onScroll":o!=null&&Nt("scroll",i);break;case"onScrollEnd":o!=null&&Nt("scrollend",i);break;case"onClick":o!=null&&(i.onclick=Xg);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yA.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(g=a.endsWith("Capture"),n=a.slice(2,g?a.length-7:void 0),y=i[xi]||null,y=y!=null?y[a]:null,typeof y=="function"&&i.removeEventListener(n,y,g),typeof o=="function")){typeof y!="function"&&y!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(n,o,g);break t}a in i?i[a]=o:o===!0?i.setAttribute(a,""):Qf(i,a,o)}}}function Ke(i,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nt("error",i),Nt("load",i);var o=!1,g=!1,y;for(y in a)if(a.hasOwnProperty(y)){var _=a[y];if(_!=null)switch(y){case"src":o=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Wt(i,n,y,_,a,null)}}g&&Wt(i,n,"srcSet",a.srcSet,a,null),o&&Wt(i,n,"src",a.src,a,null);return;case"input":Nt("invalid",i);var C=y=_=g=null,L=null,F=null;for(o in a)if(a.hasOwnProperty(o)){var X=a[o];if(X!=null)switch(o){case"name":g=X;break;case"type":_=X;break;case"checked":L=X;break;case"defaultChecked":F=X;break;case"value":y=X;break;case"defaultValue":C=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,n));break;default:Wt(i,n,o,X,a,null)}}EA(i,y,C,L,F,_,g,!1),Zf(i);return;case"select":Nt("invalid",i),o=_=y=null;for(g in a)if(a.hasOwnProperty(g)&&(C=a[g],C!=null))switch(g){case"value":y=C;break;case"defaultValue":_=C;break;case"multiple":o=C;default:Wt(i,n,g,C,a,null)}n=y,a=_,i.multiple=!!o,n!=null?Ho(i,!!o,n,!1):a!=null&&Ho(i,!!o,a,!0);return;case"textarea":Nt("invalid",i),y=g=o=null;for(_ in a)if(a.hasOwnProperty(_)&&(C=a[_],C!=null))switch(_){case"value":o=C;break;case"defaultValue":g=C;break;case"children":y=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:Wt(i,n,_,C,a,null)}xA(i,o,g,y),Zf(i);return;case"option":for(L in a)if(a.hasOwnProperty(L)&&(o=a[L],o!=null))switch(L){case"selected":i.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Wt(i,n,L,o,a,null)}return;case"dialog":Nt("beforetoggle",i),Nt("toggle",i),Nt("cancel",i),Nt("close",i);break;case"iframe":case"object":Nt("load",i);break;case"video":case"audio":for(o=0;o<wh.length;o++)Nt(wh[o],i);break;case"image":Nt("error",i),Nt("load",i);break;case"details":Nt("toggle",i);break;case"embed":case"source":case"link":Nt("error",i),Nt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(o=a[F],o!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Wt(i,n,F,o,a,null)}return;default:if(Xm(n)){for(X in a)a.hasOwnProperty(X)&&(o=a[X],o!==void 0&&Db(i,n,X,o,a,void 0));return}}for(C in a)a.hasOwnProperty(C)&&(o=a[C],o!=null&&Wt(i,n,C,o,a,null))}function aR(i,n,a,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,_=null,C=null,L=null,F=null,X=null;for(q in a){var K=a[q];if(a.hasOwnProperty(q)&&K!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":L=K;default:o.hasOwnProperty(q)||Wt(i,n,q,null,o,K)}}for(var j in o){var q=o[j];if(K=a[j],o.hasOwnProperty(j)&&(q!=null||K!=null))switch(j){case"type":y=q;break;case"name":g=q;break;case"checked":F=q;break;case"defaultChecked":X=q;break;case"value":_=q;break;case"defaultValue":C=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,n));break;default:q!==K&&Wt(i,n,j,q,o,K)}}qm(i,_,C,L,F,X,y,g);return;case"select":q=_=C=j=null;for(y in a)if(L=a[y],a.hasOwnProperty(y)&&L!=null)switch(y){case"value":break;case"multiple":q=L;default:o.hasOwnProperty(y)||Wt(i,n,y,null,o,L)}for(g in o)if(y=o[g],L=a[g],o.hasOwnProperty(g)&&(y!=null||L!=null))switch(g){case"value":j=y;break;case"defaultValue":C=y;break;case"multiple":_=y;default:y!==L&&Wt(i,n,g,y,o,L)}n=C,a=_,o=q,j!=null?Ho(i,!!a,j,!1):!!o!=!!a&&(n!=null?Ho(i,!!a,n,!0):Ho(i,!!a,a?[]:"",!1));return;case"textarea":q=j=null;for(C in a)if(g=a[C],a.hasOwnProperty(C)&&g!=null&&!o.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Wt(i,n,C,null,o,g)}for(_ in o)if(g=o[_],y=a[_],o.hasOwnProperty(_)&&(g!=null||y!=null))switch(_){case"value":j=g;break;case"defaultValue":q=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==y&&Wt(i,n,_,g,o,y)}TA(i,j,q);return;case"option":for(var bt in a)if(j=a[bt],a.hasOwnProperty(bt)&&j!=null&&!o.hasOwnProperty(bt))switch(bt){case"selected":i.selected=!1;break;default:Wt(i,n,bt,null,o,j)}for(L in o)if(j=o[L],q=a[L],o.hasOwnProperty(L)&&j!==q&&(j!=null||q!=null))switch(L){case"selected":i.selected=j&&typeof j!="function"&&typeof j!="symbol";break;default:Wt(i,n,L,j,o,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var gt in a)j=a[gt],a.hasOwnProperty(gt)&&j!=null&&!o.hasOwnProperty(gt)&&Wt(i,n,gt,null,o,j);for(F in o)if(j=o[F],q=a[F],o.hasOwnProperty(F)&&j!==q&&(j!=null||q!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(137,n));break;default:Wt(i,n,F,j,o,q)}return;default:if(Xm(n)){for(var Zt in a)j=a[Zt],a.hasOwnProperty(Zt)&&j!==void 0&&!o.hasOwnProperty(Zt)&&Db(i,n,Zt,void 0,o,j);for(X in o)j=o[X],q=a[X],!o.hasOwnProperty(X)||j===q||j===void 0&&q===void 0||Db(i,n,X,j,o,q);return}}for(var U in a)j=a[U],a.hasOwnProperty(U)&&j!=null&&!o.hasOwnProperty(U)&&Wt(i,n,U,null,o,j);for(K in o)j=o[K],q=a[K],!o.hasOwnProperty(K)||j===q||j==null&&q==null||Wt(i,n,K,j,o,q)}var Ob=null,Nb=null;function Yg(i){return i.nodeType===9?i:i.ownerDocument}function C1(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function R1(i,n){if(i===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&n==="foreignObject"?0:i}function Lb(i,n){return i==="textarea"||i==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var kb=null;function rR(){var i=window.event;return i&&i.type==="popstate"?i===kb?!1:(kb=i,!0):(kb=null,!1)}var M1=typeof setTimeout=="function"?setTimeout:void 0,lR=typeof clearTimeout=="function"?clearTimeout:void 0,D1=typeof Promise=="function"?Promise:void 0,oR=typeof queueMicrotask=="function"?queueMicrotask:typeof D1<"u"?function(i){return D1.resolve(null).then(i).catch(cR)}:M1;function cR(i){setTimeout(function(){throw i})}function Ka(i){return i==="head"}function O1(i,n){var a=n,o=0,g=0;do{var y=a.nextSibling;if(i.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"){if(0<o&&8>o){a=o;var _=i.ownerDocument;if(a&1&&Th(_.documentElement),a&2&&Th(_.body),a&4)for(a=_.head,Th(a),_=a.firstChild;_;){var C=_.nextSibling,L=_.nodeName;_[Iu]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=C}}if(g===0){i.removeChild(y),Lh(n);return}g--}else a==="$"||a==="$?"||a==="$!"?g++:o=a.charCodeAt(0)-48;else o=0;a=y}while(a);Lh(n)}function zb(i){var n=i.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":zb(a),Im(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function uR(i,n,a,o){for(;i.nodeType===1;){var g=a;if(i.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(o){if(!i[Iu])switch(n){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(n==="input"&&i.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=zn(i.nextSibling),i===null)break}return null}function hR(i,n,a){if(n==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=zn(i.nextSibling),i===null))return null;return i}function Pb(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function dR(i,n){var a=i.ownerDocument;if(i.data!=="$?"||a.readyState==="complete")n();else{var o=function(){n(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),i._reactRetry=o}}function zn(i){for(;i!=null;i=i.nextSibling){var n=i.nodeType;if(n===1||n===3)break;if(n===8){if(n=i.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return i}var Bb=null;function N1(i){i=i.previousSibling;for(var n=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"){if(n===0)return i;n--}else a==="/$"&&n++}i=i.previousSibling}return null}function L1(i,n,a){switch(n=Yg(a),i){case"html":if(i=n.documentElement,!i)throw Error(s(452));return i;case"head":if(i=n.head,!i)throw Error(s(453));return i;case"body":if(i=n.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Th(i){for(var n=i.attributes;n.length;)i.removeAttributeNode(n[0]);Im(i)}var Sn=new Map,k1=new Set;function $g(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var js=V.d;V.d={f:fR,r:gR,D:pR,C:mR,L:yR,m:bR,X:AR,S:vR,M:SR};function fR(){var i=js.f(),n=Ug();return i||n}function gR(i){var n=ko(i);n!==null&&n.tag===5&&n.type==="form"?t_(n):js.r(i)}var gc=typeof document>"u"?null:document;function z1(i,n,a){var o=gc;if(o&&typeof n=="string"&&n){var g=gn(n);g='link[rel="'+i+'"][href="'+g+'"]',typeof a=="string"&&(g+='[crossorigin="'+a+'"]'),k1.has(g)||(k1.add(g),i={rel:i,crossOrigin:a,href:n},o.querySelector(g)===null&&(n=o.createElement("link"),Ke(n,"link",i),Be(n),o.head.appendChild(n)))}}function pR(i){js.D(i),z1("dns-prefetch",i,null)}function mR(i,n){js.C(i,n),z1("preconnect",i,n)}function yR(i,n,a){js.L(i,n,a);var o=gc;if(o&&i&&n){var g='link[rel="preload"][as="'+gn(n)+'"]';n==="image"&&a&&a.imageSrcSet?(g+='[imagesrcset="'+gn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(g+='[imagesizes="'+gn(a.imageSizes)+'"]')):g+='[href="'+gn(i)+'"]';var y=g;switch(n){case"style":y=pc(i);break;case"script":y=mc(i)}Sn.has(y)||(i=m({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:i,as:n},a),Sn.set(y,i),o.querySelector(g)!==null||n==="style"&&o.querySelector(xh(y))||n==="script"&&o.querySelector(Ch(y))||(n=o.createElement("link"),Ke(n,"link",i),Be(n),o.head.appendChild(n)))}}function bR(i,n){js.m(i,n);var a=gc;if(a&&i){var o=n&&typeof n.as=="string"?n.as:"script",g='link[rel="modulepreload"][as="'+gn(o)+'"][href="'+gn(i)+'"]',y=g;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=mc(i)}if(!Sn.has(y)&&(i=m({rel:"modulepreload",href:i},n),Sn.set(y,i),a.querySelector(g)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ch(y)))return}o=a.createElement("link"),Ke(o,"link",i),Be(o),a.head.appendChild(o)}}}function vR(i,n,a){js.S(i,n,a);var o=gc;if(o&&i){var g=zo(o).hoistableStyles,y=pc(i);n=n||"default";var _=g.get(y);if(!_){var C={loading:0,preload:null};if(_=o.querySelector(xh(y)))C.loading=5;else{i=m({rel:"stylesheet",href:i,"data-precedence":n},a),(a=Sn.get(y))&&Hb(i,a);var L=_=o.createElement("link");Be(L),Ke(L,"link",i),L._p=new Promise(function(F,X){L.onload=F,L.onerror=X}),L.addEventListener("load",function(){C.loading|=1}),L.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Kg(_,n,o)}_={type:"stylesheet",instance:_,count:1,state:C},g.set(y,_)}}}function AR(i,n){js.X(i,n);var a=gc;if(a&&i){var o=zo(a).hoistableScripts,g=mc(i),y=o.get(g);y||(y=a.querySelector(Ch(g)),y||(i=m({src:i,async:!0},n),(n=Sn.get(g))&&Ub(i,n),y=a.createElement("script"),Be(y),Ke(y,"link",i),a.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},o.set(g,y))}}function SR(i,n){js.M(i,n);var a=gc;if(a&&i){var o=zo(a).hoistableScripts,g=mc(i),y=o.get(g);y||(y=a.querySelector(Ch(g)),y||(i=m({src:i,async:!0,type:"module"},n),(n=Sn.get(g))&&Ub(i,n),y=a.createElement("script"),Be(y),Ke(y,"link",i),a.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},o.set(g,y))}}function P1(i,n,a,o){var g=(g=ft.current)?$g(g):null;if(!g)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=pc(a.href),a=zo(g).hoistableStyles,o=a.get(n),o||(o={type:"style",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=pc(a.href);var y=zo(g).hoistableStyles,_=y.get(i);if(_||(g=g.ownerDocument||g,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,_),(y=g.querySelector(xh(i)))&&!y._p&&(_.instance=y,_.state.loading=5),Sn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Sn.set(i,a),y||_R(g,i,a,_.state))),n&&o===null)throw Error(s(528,""));return _}if(n&&o!==null)throw Error(s(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=mc(a),a=zo(g).hoistableScripts,o=a.get(n),o||(o={type:"script",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function pc(i){return'href="'+gn(i)+'"'}function xh(i){return'link[rel="stylesheet"]['+i+"]"}function B1(i){return m({},i,{"data-precedence":i.precedence,precedence:null})}function _R(i,n,a,o){i.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=i.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),Ke(n,"link",a),Be(n),i.head.appendChild(n))}function mc(i){return'[src="'+gn(i)+'"]'}function Ch(i){return"script[async]"+i}function H1(i,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var o=i.querySelector('style[data-href~="'+gn(a.href)+'"]');if(o)return n.instance=o,Be(o),o;var g=m({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(i.ownerDocument||i).createElement("style"),Be(o),Ke(o,"style",g),Kg(o,a.precedence,i),n.instance=o;case"stylesheet":g=pc(a.href);var y=i.querySelector(xh(g));if(y)return n.state.loading|=4,n.instance=y,Be(y),y;o=B1(a),(g=Sn.get(g))&&Hb(o,g),y=(i.ownerDocument||i).createElement("link"),Be(y);var _=y;return _._p=new Promise(function(C,L){_.onload=C,_.onerror=L}),Ke(y,"link",o),n.state.loading|=4,Kg(y,a.precedence,i),n.instance=y;case"script":return y=mc(a.src),(g=i.querySelector(Ch(y)))?(n.instance=g,Be(g),g):(o=a,(g=Sn.get(y))&&(o=m({},a),Ub(o,g)),i=i.ownerDocument||i,g=i.createElement("script"),Be(g),Ke(g,"link",o),i.head.appendChild(g),n.instance=g);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,Kg(o,a.precedence,i));return n.instance}function Kg(i,n,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=o.length?o[o.length-1]:null,y=g,_=0;_<o.length;_++){var C=o[_];if(C.dataset.precedence===n)y=C;else if(y!==g)break}y?y.parentNode.insertBefore(i,y.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(i,n.firstChild))}function Hb(i,n){i.crossOrigin==null&&(i.crossOrigin=n.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=n.referrerPolicy),i.title==null&&(i.title=n.title)}function Ub(i,n){i.crossOrigin==null&&(i.crossOrigin=n.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=n.referrerPolicy),i.integrity==null&&(i.integrity=n.integrity)}var Qg=null;function U1(i,n,a){if(Qg===null){var o=new Map,g=Qg=new Map;g.set(a,o)}else g=Qg,o=g.get(a),o||(o=new Map,g.set(a,o));if(o.has(i))return o;for(o.set(i,null),a=a.getElementsByTagName(i),g=0;g<a.length;g++){var y=a[g];if(!(y[Iu]||y[ri]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var _=y.getAttribute(n)||"";_=i+_;var C=o.get(_);C?C.push(y):o.set(_,[y])}}return o}function I1(i,n,a){i=i.ownerDocument||i,i.head.insertBefore(a,n==="title"?i.querySelector("head > title"):null)}function wR(i,n,a){if(a===1||n.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return i=n.disabled,typeof n.precedence=="string"&&i==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function F1(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Rh=null;function ER(){}function TR(i,n,a){if(Rh===null)throw Error(s(475));var o=Rh;if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var g=pc(a.href),y=i.querySelector(xh(g));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(o.count++,o=Wg.bind(o),i.then(o,o)),n.state.loading|=4,n.instance=y,Be(y);return}y=i.ownerDocument||i,a=B1(a),(g=Sn.get(g))&&Hb(a,g),y=y.createElement("link"),Be(y);var _=y;_._p=new Promise(function(C,L){_.onload=C,_.onerror=L}),Ke(y,"link",a),n.instance=y}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(n,i),(i=n.state.preload)&&(n.state.loading&3)===0&&(o.count++,n=Wg.bind(o),i.addEventListener("load",n),i.addEventListener("error",n))}}function xR(){if(Rh===null)throw Error(s(475));var i=Rh;return i.stylesheets&&i.count===0&&Ib(i,i.stylesheets),0<i.count?function(n){var a=setTimeout(function(){if(i.stylesheets&&Ib(i,i.stylesheets),i.unsuspend){var o=i.unsuspend;i.unsuspend=null,o()}},6e4);return i.unsuspend=n,function(){i.unsuspend=null,clearTimeout(a)}}:null}function Wg(){if(this.count--,this.count===0){if(this.stylesheets)Ib(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Zg=null;function Ib(i,n){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Zg=new Map,n.forEach(CR,i),Zg=null,Wg.call(i))}function CR(i,n){if(!(n.state.loading&4)){var a=Zg.get(i);if(a)var o=a.get(null);else{a=new Map,Zg.set(i,a);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var _=g[y];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),o=_)}o&&a.set(null,o)}g=n.instance,_=g.getAttribute("data-precedence"),y=a.get(_)||o,y===o&&a.set(null,g),a.set(_,g),this.count++,o=Wg.bind(this),g.addEventListener("load",o),g.addEventListener("error",o),y?y.parentNode.insertBefore(g,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),n.state.loading|=4}}var Mh={$$typeof:N,Provider:null,Consumer:null,_currentValue:ot,_currentValue2:ot,_threadCount:0};function RR(i,n,a,o,g,y,_,C){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pm(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pm(0),this.hiddenUpdates=Pm(null),this.identifierPrefix=o,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function G1(i,n,a,o,g,y,_,C,L,F,X,K){return i=new RR(i,n,a,_,C,L,F,K),n=1,y===!0&&(n|=24),y=Ii(3,null,null,n),i.current=y,y.stateNode=i,n=Sy(),n.refCount++,i.pooledCache=n,n.refCount++,y.memoizedState={element:o,isDehydrated:a,cache:n},Ty(y),i}function j1(i){return i?(i=Yo,i):Yo}function q1(i,n,a,o,g,y){g=j1(g),o.context===null?o.context=g:o.pendingContext=g,o=Pa(n),o.payload={element:a},y=y===void 0?null:y,y!==null&&(o.callback=y),a=Ba(i,o,n),a!==null&&(Vi(a,i,n),ah(a,i,n))}function V1(i,n){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<n?a:n}}function Fb(i,n){V1(i,n),(i=i.alternate)&&V1(i,n)}function X1(i){if(i.tag===13){var n=Xo(i,67108864);n!==null&&Vi(n,i,67108864),Fb(i,67108864)}}var Jg=!0;function MR(i,n,a,o){var g=H.T;H.T=null;var y=V.p;try{V.p=2,Gb(i,n,a,o)}finally{V.p=y,H.T=g}}function DR(i,n,a,o){var g=H.T;H.T=null;var y=V.p;try{V.p=8,Gb(i,n,a,o)}finally{V.p=y,H.T=g}}function Gb(i,n,a,o){if(Jg){var g=jb(o);if(g===null)Mb(i,n,o,tp,a),$1(i,o);else if(NR(g,i,n,a,o))o.stopPropagation();else if($1(i,o),n&4&&-1<OR.indexOf(i)){for(;g!==null;){var y=ko(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var _=Yr(y.pendingLanes);if(_!==0){var C=y;for(C.pendingLanes|=2,C.entangledLanes|=2;_;){var L=1<<31-Hi(_);C.entanglements[1]|=L,_&=~L}rs(y),(Yt&6)===0&&(Bg=es()+500,_h(0))}}break;case 13:C=Xo(y,2),C!==null&&Vi(C,y,2),Ug(),Fb(y,2)}if(y=jb(o),y===null&&Mb(i,n,o,tp,a),y===g)break;g=y}g!==null&&o.stopPropagation()}else Mb(i,n,o,null,a)}}function jb(i){return i=$m(i),qb(i)}var tp=null;function qb(i){if(tp=null,i=Lo(i),i!==null){var n=l(i);if(n===null)i=null;else{var a=n.tag;if(a===13){if(i=u(n),i!==null)return i;i=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;i=null}else n!==i&&(i=null)}}return tp=i,null}function Y1(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(mx()){case lA:return 2;case oA:return 8;case Xf:case yx:return 32;case cA:return 268435456;default:return 32}default:return 32}}var Vb=!1,Qa=null,Wa=null,Za=null,Dh=new Map,Oh=new Map,Ja=[],OR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $1(i,n){switch(i){case"focusin":case"focusout":Qa=null;break;case"dragenter":case"dragleave":Wa=null;break;case"mouseover":case"mouseout":Za=null;break;case"pointerover":case"pointerout":Dh.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oh.delete(n.pointerId)}}function Nh(i,n,a,o,g,y){return i===null||i.nativeEvent!==y?(i={blockedOn:n,domEventName:a,eventSystemFlags:o,nativeEvent:y,targetContainers:[g]},n!==null&&(n=ko(n),n!==null&&X1(n)),i):(i.eventSystemFlags|=o,n=i.targetContainers,g!==null&&n.indexOf(g)===-1&&n.push(g),i)}function NR(i,n,a,o,g){switch(n){case"focusin":return Qa=Nh(Qa,i,n,a,o,g),!0;case"dragenter":return Wa=Nh(Wa,i,n,a,o,g),!0;case"mouseover":return Za=Nh(Za,i,n,a,o,g),!0;case"pointerover":var y=g.pointerId;return Dh.set(y,Nh(Dh.get(y)||null,i,n,a,o,g)),!0;case"gotpointercapture":return y=g.pointerId,Oh.set(y,Nh(Oh.get(y)||null,i,n,a,o,g)),!0}return!1}function K1(i){var n=Lo(i.target);if(n!==null){var a=l(n);if(a!==null){if(n=a.tag,n===13){if(n=u(a),n!==null){i.blockedOn=n,Tx(i.priority,function(){if(a.tag===13){var o=qi();o=Bm(o);var g=Xo(a,o);g!==null&&Vi(g,a,o),Fb(a,o)}});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ep(i){if(i.blockedOn!==null)return!1;for(var n=i.targetContainers;0<n.length;){var a=jb(i.nativeEvent);if(a===null){a=i.nativeEvent;var o=new a.constructor(a.type,a);Ym=o,a.target.dispatchEvent(o),Ym=null}else return n=ko(a),n!==null&&X1(n),i.blockedOn=a,!1;n.shift()}return!0}function Q1(i,n,a){ep(i)&&a.delete(n)}function LR(){Vb=!1,Qa!==null&&ep(Qa)&&(Qa=null),Wa!==null&&ep(Wa)&&(Wa=null),Za!==null&&ep(Za)&&(Za=null),Dh.forEach(Q1),Oh.forEach(Q1)}function ip(i,n){i.blockedOn===n&&(i.blockedOn=null,Vb||(Vb=!0,d.unstable_scheduleCallback(d.unstable_NormalPriority,LR)))}var np=null;function W1(i){np!==i&&(np=i,d.unstable_scheduleCallback(d.unstable_NormalPriority,function(){np===i&&(np=null);for(var n=0;n<i.length;n+=3){var a=i[n],o=i[n+1],g=i[n+2];if(typeof o!="function"){if(qb(o||a)===null)continue;break}var y=ko(a);y!==null&&(i.splice(n,3),n-=3,qy(y,{pending:!0,data:g,method:a.method,action:o},o,g))}}))}function Lh(i){function n(L){return ip(L,i)}Qa!==null&&ip(Qa,i),Wa!==null&&ip(Wa,i),Za!==null&&ip(Za,i),Dh.forEach(n),Oh.forEach(n);for(var a=0;a<Ja.length;a++){var o=Ja[a];o.blockedOn===i&&(o.blockedOn=null)}for(;0<Ja.length&&(a=Ja[0],a.blockedOn===null);)K1(a),a.blockedOn===null&&Ja.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var g=a[o],y=a[o+1],_=g[xi]||null;if(typeof y=="function")_||W1(a);else if(_){var C=null;if(y&&y.hasAttribute("formAction")){if(g=y,_=y[xi]||null)C=_.formAction;else if(qb(g)!==null)continue}else C=_.action;typeof C=="function"?a[o+1]=C:(a.splice(o,3),o-=3),W1(a)}}}function Xb(i){this._internalRoot=i}sp.prototype.render=Xb.prototype.render=function(i){var n=this._internalRoot;if(n===null)throw Error(s(409));var a=n.current,o=qi();q1(a,o,i,n,null,null)},sp.prototype.unmount=Xb.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var n=i.containerInfo;q1(i.current,2,null,i,null,null),Ug(),n[No]=null}};function sp(i){this._internalRoot=i}sp.prototype.unstable_scheduleHydration=function(i){if(i){var n=gA();i={blockedOn:null,target:i,priority:n};for(var a=0;a<Ja.length&&n!==0&&n<Ja[a].priority;a++);Ja.splice(a,0,i),a===0&&K1(i)}};var Z1=t.version;if(Z1!=="19.1.0")throw Error(s(527,Z1,"19.1.0"));V.findDOMNode=function(i){var n=i._reactInternals;if(n===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=f(n),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var kR={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ap=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ap.isDisabled&&ap.supportsFiber)try{Bu=ap.inject(kR),Bi=ap}catch{}}return zh.createRoot=function(i,n){if(!r(i))throw Error(s(299));var a=!1,o="",g=g_,y=p_,_=m_,C=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(g=n.onUncaughtError),n.onCaughtError!==void 0&&(y=n.onCaughtError),n.onRecoverableError!==void 0&&(_=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(C=n.unstable_transitionCallbacks)),n=G1(i,1,!1,null,null,a,o,g,y,_,C,null),i[No]=n.current,Rb(i),new Xb(n)},zh.hydrateRoot=function(i,n,a){if(!r(i))throw Error(s(299));var o=!1,g="",y=g_,_=p_,C=m_,L=null,F=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(C=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(L=a.unstable_transitionCallbacks),a.formState!==void 0&&(F=a.formState)),n=G1(i,1,!0,n,a??null,o,g,y,_,C,L,F),n.context=j1(null),a=n.current,o=qi(),o=Bm(o),g=Pa(o),g.callback=null,Ba(a,g,o),a=o,n.current.lanes=a,Uu(n,a),rs(n),i[No]=n.current,Rb(i),new sp(n)},zh.version="19.1.0",zh}var cw;function XR(){if(cw)return Qb.exports;cw=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(t){console.error(t)}}return d(),Qb.exports=VR(),Qb.exports}var YR=XR(),t0={exports:{}},e0={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uw;function $R(){if(uw)return e0;uw=1;var d=Tm();function t(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var e=typeof Object.is=="function"?Object.is:t,s=d.useSyncExternalStore,r=d.useRef,l=d.useEffect,u=d.useMemo,h=d.useDebugValue;return e0.useSyncExternalStoreWithSelector=function(f,p,m,b,v){var S=r(null);if(S.current===null){var x={hasValue:!1,value:null};S.current=x}else x=S.current;S=u(function(){function R(O){if(!M){if(M=!0,D=O,O=b(O),v!==void 0&&x.hasValue){var B=x.value;if(v(B,O))return N=B}return N=O}if(B=N,e(D,O))return B;var G=b(O);return v!==void 0&&v(B,G)?(D=O,B):(D=O,N=G)}var M=!1,D,N,k=m===void 0?null:m;return[function(){return R(p())},k===null?void 0:function(){return R(k())}]},[p,m,b,v]);var T=s(f,S[0],S[1]);return l(function(){x.hasValue=!0,x.value=T},[T]),h(T),T},e0}var hw;function KR(){return hw||(hw=1,t0.exports=$R()),t0.exports}var QR=KR();function WR(d){d()}function ZR(){let d=null,t=null;return{clear(){d=null,t=null},notify(){WR(()=>{let e=d;for(;e;)e.callback(),e=e.next})},get(){const e=[];let s=d;for(;s;)e.push(s),s=s.next;return e},subscribe(e){let s=!0;const r=t={callback:e,next:null,prev:t};return r.prev?r.prev.next=r:d=r,function(){!s||d===null||(s=!1,r.next?r.next.prev=r.prev:t=r.prev,r.prev?r.prev.next=r.next:d=r.next)}}}}var dw={notify(){},get:()=>[]};function JR(d,t){let e,s=dw,r=0,l=!1;function u(T){m();const R=s.subscribe(T);let M=!1;return()=>{M||(M=!0,R(),b())}}function h(){s.notify()}function f(){x.onStateChange&&x.onStateChange()}function p(){return l}function m(){r++,e||(e=d.subscribe(f),s=ZR())}function b(){r--,e&&r===0&&(e(),e=void 0,s.clear(),s=dw)}function v(){l||(l=!0,m())}function S(){l&&(l=!1,b())}const x={addNestedSub:u,notifyNestedSubs:h,handleChangeWrapper:f,isSubscribed:p,trySubscribe:v,tryUnsubscribe:S,getListeners:()=>s};return x}var tM=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",eM=tM(),iM=()=>typeof navigator<"u"&&navigator.product==="ReactNative",nM=iM(),sM=()=>eM||nM?Ht.useLayoutEffect:Ht.useEffect,aM=sM(),i0=Symbol.for("react-redux-context"),n0=typeof globalThis<"u"?globalThis:{};function rM(){if(!Ht.createContext)return{};const d=n0[i0]??(n0[i0]=new Map);let t=d.get(Ht.createContext);return t||(t=Ht.createContext(null),d.set(Ht.createContext,t)),t}var Ir=rM();function lM(d){const{children:t,context:e,serverState:s,store:r}=d,l=Ht.useMemo(()=>{const f=JR(r);return{store:r,subscription:f,getServerState:s?()=>s:void 0}},[r,s]),u=Ht.useMemo(()=>r.getState(),[r]);aM(()=>{const{subscription:f}=l;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),u!==r.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[l,u]);const h=e||Ir;return Ht.createElement(h.Provider,{value:l},t)}var oM=lM;function Iv(d=Ir){return function(){return Ht.useContext(d)}}var qw=Iv();function Vw(d=Ir){const t=d===Ir?qw:Iv(d),e=()=>{const{store:s}=t();return s};return Object.assign(e,{withTypes:()=>e}),e}var cM=Vw();function uM(d=Ir){const t=d===Ir?cM:Vw(d),e=()=>t().dispatch;return Object.assign(e,{withTypes:()=>e}),e}var Fv=uM(),hM=(d,t)=>d===t;function dM(d=Ir){const t=d===Ir?qw:Iv(d),e=(s,r={})=>{const{equalityFn:l=hM}=typeof r=="function"?{equalityFn:r}:r,u=t(),{store:h,subscription:f,getServerState:p}=u;Ht.useRef(!0);const m=Ht.useCallback({[s.name](v){return s(v)}}[s.name],[s]),b=QR.useSyncExternalStoreWithSelector(f.addNestedSub,h.getState,p||h.getState,m,l);return Ht.useDebugValue(b),b};return Object.assign(e,{withTypes:()=>e}),e}var p0=dM();function ei(d){return`Minified Redux error #${d}; visit https://redux.js.org/Errors?code=${d} for the full message or use the non-minified dev environment for full errors. `}var fM=typeof Symbol=="function"&&Symbol.observable||"@@observable",fw=fM,s0=()=>Math.random().toString(36).substring(7).split("").join("."),gM={INIT:`@@redux/INIT${s0()}`,REPLACE:`@@redux/REPLACE${s0()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${s0()}`},Xp=gM;function Gv(d){if(typeof d!="object"||d===null)return!1;let t=d;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(d)===t||Object.getPrototypeOf(d)===null}function Xw(d,t,e){if(typeof d!="function")throw new Error(ei(2));if(typeof t=="function"&&typeof e=="function"||typeof e=="function"&&typeof arguments[3]=="function")throw new Error(ei(0));if(typeof t=="function"&&typeof e>"u"&&(e=t,t=void 0),typeof e<"u"){if(typeof e!="function")throw new Error(ei(1));return e(Xw)(d,t)}let s=d,r=t,l=new Map,u=l,h=0,f=!1;function p(){u===l&&(u=new Map,l.forEach((R,M)=>{u.set(M,R)}))}function m(){if(f)throw new Error(ei(3));return r}function b(R){if(typeof R!="function")throw new Error(ei(4));if(f)throw new Error(ei(5));let M=!0;p();const D=h++;return u.set(D,R),function(){if(M){if(f)throw new Error(ei(6));M=!1,p(),u.delete(D),l=null}}}function v(R){if(!Gv(R))throw new Error(ei(7));if(typeof R.type>"u")throw new Error(ei(8));if(typeof R.type!="string")throw new Error(ei(17));if(f)throw new Error(ei(9));try{f=!0,r=s(r,R)}finally{f=!1}return(l=u).forEach(D=>{D()}),R}function S(R){if(typeof R!="function")throw new Error(ei(10));s=R,v({type:Xp.REPLACE})}function x(){const R=b;return{subscribe(M){if(typeof M!="object"||M===null)throw new Error(ei(11));function D(){const k=M;k.next&&k.next(m())}return D(),{unsubscribe:R(D)}},[fw](){return this}}}return v({type:Xp.INIT}),{dispatch:v,subscribe:b,getState:m,replaceReducer:S,[fw]:x}}function pM(d){Object.keys(d).forEach(t=>{const e=d[t];if(typeof e(void 0,{type:Xp.INIT})>"u")throw new Error(ei(12));if(typeof e(void 0,{type:Xp.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ei(13))})}function mM(d){const t=Object.keys(d),e={};for(let l=0;l<t.length;l++){const u=t[l];typeof d[u]=="function"&&(e[u]=d[u])}const s=Object.keys(e);let r;try{pM(e)}catch(l){r=l}return function(u={},h){if(r)throw r;let f=!1;const p={};for(let m=0;m<s.length;m++){const b=s[m],v=e[b],S=u[b],x=v(S,h);if(typeof x>"u")throw h&&h.type,new Error(ei(14));p[b]=x,f=f||x!==S}return f=f||s.length!==Object.keys(u).length,f?p:u}}function Yp(...d){return d.length===0?t=>t:d.length===1?d[0]:d.reduce((t,e)=>(...s)=>t(e(...s)))}function yM(...d){return t=>(e,s)=>{const r=t(e,s);let l=()=>{throw new Error(ei(15))};const u={getState:r.getState,dispatch:(f,...p)=>l(f,...p)},h=d.map(f=>f(u));return l=Yp(...h)(r.dispatch),{...r,dispatch:l}}}function bM(d){return Gv(d)&&"type"in d&&typeof d.type=="string"}var Yw=Symbol.for("immer-nothing"),gw=Symbol.for("immer-draftable"),hn=Symbol.for("immer-state");function Qn(d,...t){throw new Error(`[Immer] minified error nr: ${d}. Full error at: https://bit.ly/3cXEKWf`)}var ku=Object.getPrototypeOf;function Eo(d){return!!d&&!!d[hn]}function Ra(d){var t;return d?$w(d)||Array.isArray(d)||!!d[gw]||!!((t=d.constructor)!=null&&t[gw])||Cm(d)||Rm(d):!1}var vM=Object.prototype.constructor.toString();function $w(d){if(!d||typeof d!="object")return!1;const t=ku(d);if(t===null)return!0;const e=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return e===Object?!0:typeof e=="function"&&Function.toString.call(e)===vM}function $p(d,t){xm(d)===0?Reflect.ownKeys(d).forEach(e=>{t(e,d[e],d)}):d.forEach((e,s)=>t(s,e,d))}function xm(d){const t=d[hn];return t?t.type_:Array.isArray(d)?1:Cm(d)?2:Rm(d)?3:0}function m0(d,t){return xm(d)===2?d.has(t):Object.prototype.hasOwnProperty.call(d,t)}function Kw(d,t,e){const s=xm(d);s===2?d.set(t,e):s===3?d.add(e):d[t]=e}function AM(d,t){return d===t?d!==0||1/d===1/t:d!==d&&t!==t}function Cm(d){return d instanceof Map}function Rm(d){return d instanceof Set}function hl(d){return d.copy_||d.base_}function y0(d,t){if(Cm(d))return new Map(d);if(Rm(d))return new Set(d);if(Array.isArray(d))return Array.prototype.slice.call(d);const e=$w(d);if(t===!0||t==="class_only"&&!e){const s=Object.getOwnPropertyDescriptors(d);delete s[hn];let r=Reflect.ownKeys(s);for(let l=0;l<r.length;l++){const u=r[l],h=s[u];h.writable===!1&&(h.writable=!0,h.configurable=!0),(h.get||h.set)&&(s[u]={configurable:!0,writable:!0,enumerable:h.enumerable,value:d[u]})}return Object.create(ku(d),s)}else{const s=ku(d);if(s!==null&&e)return{...d};const r=Object.create(s);return Object.assign(r,d)}}function jv(d,t=!1){return Mm(d)||Eo(d)||!Ra(d)||(xm(d)>1&&(d.set=d.add=d.clear=d.delete=SM),Object.freeze(d),t&&Object.entries(d).forEach(([e,s])=>jv(s,!0))),d}function SM(){Qn(2)}function Mm(d){return Object.isFrozen(d)}var _M={};function To(d){const t=_M[d];return t||Qn(0,d),t}var rd;function Qw(){return rd}function wM(d,t){return{drafts_:[],parent_:d,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function pw(d,t){t&&(To("Patches"),d.patches_=[],d.inversePatches_=[],d.patchListener_=t)}function b0(d){v0(d),d.drafts_.forEach(EM),d.drafts_=null}function v0(d){d===rd&&(rd=d.parent_)}function mw(d){return rd=wM(rd,d)}function EM(d){const t=d[hn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function yw(d,t){t.unfinalizedDrafts_=t.drafts_.length;const e=t.drafts_[0];return d!==void 0&&d!==e?(e[hn].modified_&&(b0(t),Qn(4)),Ra(d)&&(d=Kp(t,d),t.parent_||Qp(t,d)),t.patches_&&To("Patches").generateReplacementPatches_(e[hn].base_,d,t.patches_,t.inversePatches_)):d=Kp(t,e,[]),b0(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),d!==Yw?d:void 0}function Kp(d,t,e){if(Mm(t))return t;const s=t[hn];if(!s)return $p(t,(r,l)=>bw(d,s,t,r,l,e)),t;if(s.scope_!==d)return t;if(!s.modified_)return Qp(d,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const r=s.copy_;let l=r,u=!1;s.type_===3&&(l=new Set(r),r.clear(),u=!0),$p(l,(h,f)=>bw(d,s,r,h,f,e,u)),Qp(d,r,!1),e&&d.patches_&&To("Patches").generatePatches_(s,e,d.patches_,d.inversePatches_)}return s.copy_}function bw(d,t,e,s,r,l,u){if(Eo(r)){const h=l&&t&&t.type_!==3&&!m0(t.assigned_,s)?l.concat(s):void 0,f=Kp(d,r,h);if(Kw(e,s,f),Eo(f))d.canAutoFreeze_=!1;else return}else u&&e.add(r);if(Ra(r)&&!Mm(r)){if(!d.immer_.autoFreeze_&&d.unfinalizedDrafts_<1)return;Kp(d,r),(!t||!t.scope_.parent_)&&typeof s!="symbol"&&Object.prototype.propertyIsEnumerable.call(e,s)&&Qp(d,r)}}function Qp(d,t,e=!1){!d.parent_&&d.immer_.autoFreeze_&&d.canAutoFreeze_&&jv(t,e)}function TM(d,t){const e=Array.isArray(d),s={type_:e?1:0,scope_:t?t.scope_:Qw(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:d,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=s,l=qv;e&&(r=[s],l=ld);const{revoke:u,proxy:h}=Proxy.revocable(r,l);return s.draft_=h,s.revoke_=u,h}var qv={get(d,t){if(t===hn)return d;const e=hl(d);if(!m0(e,t))return xM(d,e,t);const s=e[t];return d.finalized_||!Ra(s)?s:s===a0(d.base_,t)?(r0(d),d.copy_[t]=S0(s,d)):s},has(d,t){return t in hl(d)},ownKeys(d){return Reflect.ownKeys(hl(d))},set(d,t,e){const s=Ww(hl(d),t);if(s!=null&&s.set)return s.set.call(d.draft_,e),!0;if(!d.modified_){const r=a0(hl(d),t),l=r==null?void 0:r[hn];if(l&&l.base_===e)return d.copy_[t]=e,d.assigned_[t]=!1,!0;if(AM(e,r)&&(e!==void 0||m0(d.base_,t)))return!0;r0(d),A0(d)}return d.copy_[t]===e&&(e!==void 0||t in d.copy_)||Number.isNaN(e)&&Number.isNaN(d.copy_[t])||(d.copy_[t]=e,d.assigned_[t]=!0),!0},deleteProperty(d,t){return a0(d.base_,t)!==void 0||t in d.base_?(d.assigned_[t]=!1,r0(d),A0(d)):delete d.assigned_[t],d.copy_&&delete d.copy_[t],!0},getOwnPropertyDescriptor(d,t){const e=hl(d),s=Reflect.getOwnPropertyDescriptor(e,t);return s&&{writable:!0,configurable:d.type_!==1||t!=="length",enumerable:s.enumerable,value:e[t]}},defineProperty(){Qn(11)},getPrototypeOf(d){return ku(d.base_)},setPrototypeOf(){Qn(12)}},ld={};$p(qv,(d,t)=>{ld[d]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});ld.deleteProperty=function(d,t){return ld.set.call(this,d,t,void 0)};ld.set=function(d,t,e){return qv.set.call(this,d[0],t,e,d[0])};function a0(d,t){const e=d[hn];return(e?hl(e):d)[t]}function xM(d,t,e){var r;const s=Ww(t,e);return s?"value"in s?s.value:(r=s.get)==null?void 0:r.call(d.draft_):void 0}function Ww(d,t){if(!(t in d))return;let e=ku(d);for(;e;){const s=Object.getOwnPropertyDescriptor(e,t);if(s)return s;e=ku(e)}}function A0(d){d.modified_||(d.modified_=!0,d.parent_&&A0(d.parent_))}function r0(d){d.copy_||(d.copy_=y0(d.base_,d.scope_.immer_.useStrictShallowCopy_))}var CM=class{constructor(d){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,e,s)=>{if(typeof t=="function"&&typeof e!="function"){const l=e;e=t;const u=this;return function(f=l,...p){return u.produce(f,m=>e.call(this,m,...p))}}typeof e!="function"&&Qn(6),s!==void 0&&typeof s!="function"&&Qn(7);let r;if(Ra(t)){const l=mw(this),u=S0(t,void 0);let h=!0;try{r=e(u),h=!1}finally{h?b0(l):v0(l)}return pw(l,s),yw(r,l)}else if(!t||typeof t!="object"){if(r=e(t),r===void 0&&(r=t),r===Yw&&(r=void 0),this.autoFreeze_&&jv(r,!0),s){const l=[],u=[];To("Patches").generateReplacementPatches_(t,r,l,u),s(l,u)}return r}else Qn(1,t)},this.produceWithPatches=(t,e)=>{if(typeof t=="function")return(u,...h)=>this.produceWithPatches(u,f=>t(f,...h));let s,r;return[this.produce(t,e,(u,h)=>{s=u,r=h}),s,r]},typeof(d==null?void 0:d.autoFreeze)=="boolean"&&this.setAutoFreeze(d.autoFreeze),typeof(d==null?void 0:d.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(d.useStrictShallowCopy)}createDraft(d){Ra(d)||Qn(8),Eo(d)&&(d=RM(d));const t=mw(this),e=S0(d,void 0);return e[hn].isManual_=!0,v0(t),e}finishDraft(d,t){const e=d&&d[hn];(!e||!e.isManual_)&&Qn(9);const{scope_:s}=e;return pw(s,t),yw(void 0,s)}setAutoFreeze(d){this.autoFreeze_=d}setUseStrictShallowCopy(d){this.useStrictShallowCopy_=d}applyPatches(d,t){let e;for(e=t.length-1;e>=0;e--){const r=t[e];if(r.path.length===0&&r.op==="replace"){d=r.value;break}}e>-1&&(t=t.slice(e+1));const s=To("Patches").applyPatches_;return Eo(d)?s(d,t):this.produce(d,r=>s(r,t))}};function S0(d,t){const e=Cm(d)?To("MapSet").proxyMap_(d,t):Rm(d)?To("MapSet").proxySet_(d,t):TM(d,t);return(t?t.scope_:Qw()).drafts_.push(e),e}function RM(d){return Eo(d)||Qn(10,d),Zw(d)}function Zw(d){if(!Ra(d)||Mm(d))return d;const t=d[hn];let e;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,e=y0(d,t.scope_.immer_.useStrictShallowCopy_)}else e=y0(d,!0);return $p(e,(s,r)=>{Kw(e,s,Zw(r))}),t&&(t.finalized_=!1),e}var dn=new CM,Jw=dn.produce;dn.produceWithPatches.bind(dn);dn.setAutoFreeze.bind(dn);dn.setUseStrictShallowCopy.bind(dn);dn.applyPatches.bind(dn);dn.createDraft.bind(dn);dn.finishDraft.bind(dn);function tE(d){return({dispatch:e,getState:s})=>r=>l=>typeof l=="function"?l(e,s,d):r(l)}var MM=tE(),DM=tE,OM=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Yp:Yp.apply(null,arguments)};function vw(d,t){function e(...s){if(t){let r=t(...s);if(!r)throw new Error(Ta(0));return{type:d,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:d,payload:s[0]}}return e.toString=()=>`${d}`,e.type=d,e.match=s=>bM(s)&&s.type===d,e}var eE=class Ih extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Ih.prototype)}static get[Symbol.species](){return Ih}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Ih(...t[0].concat(this)):new Ih(...t.concat(this))}};function Aw(d){return Ra(d)?Jw(d,()=>{}):d}function rp(d,t,e){return d.has(t)?d.get(t):d.set(t,e(t)).get(t)}function NM(d){return typeof d=="boolean"}var LM=()=>function(t){const{thunk:e=!0,immutableCheck:s=!0,serializableCheck:r=!0,actionCreatorCheck:l=!0}=t??{};let u=new eE;return e&&(NM(e)?u.push(MM):u.push(DM(e.extraArgument))),u},kM="RTK_autoBatch",Sw=d=>t=>{setTimeout(t,d)},zM=(d={type:"raf"})=>t=>(...e)=>{const s=t(...e);let r=!0,l=!1,u=!1;const h=new Set,f=d.type==="tick"?queueMicrotask:d.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Sw(10):d.type==="callback"?d.queueNotification:Sw(d.timeout),p=()=>{u=!1,l&&(l=!1,h.forEach(m=>m()))};return Object.assign({},s,{subscribe(m){const b=()=>r&&m(),v=s.subscribe(b);return h.add(m),()=>{v(),h.delete(m)}},dispatch(m){var b;try{return r=!((b=m==null?void 0:m.meta)!=null&&b[kM]),l=!r,l&&(u||(u=!0,f(p))),s.dispatch(m)}finally{r=!0}}})},PM=d=>function(e){const{autoBatch:s=!0}=e??{};let r=new eE(d);return s&&r.push(zM(typeof s=="object"?s:void 0)),r};function BM(d){const t=LM(),{reducer:e=void 0,middleware:s,devTools:r=!0,preloadedState:l=void 0,enhancers:u=void 0}=d||{};let h;if(typeof e=="function")h=e;else if(Gv(e))h=mM(e);else throw new Error(Ta(1));let f;typeof s=="function"?f=s(t):f=t();let p=Yp;r&&(p=OM({trace:!1,...typeof r=="object"&&r}));const m=yM(...f),b=PM(m);let v=typeof u=="function"?u(b):b();const S=p(...v);return Xw(h,l,S)}function iE(d){const t={},e=[];let s;const r={addCase(l,u){const h=typeof l=="string"?l:l.type;if(!h)throw new Error(Ta(28));if(h in t)throw new Error(Ta(29));return t[h]=u,r},addMatcher(l,u){return e.push({matcher:l,reducer:u}),r},addDefaultCase(l){return s=l,r}};return d(r),[t,e,s]}function HM(d){return typeof d=="function"}function UM(d,t){let[e,s,r]=iE(t),l;if(HM(d))l=()=>Aw(d());else{const h=Aw(d);l=()=>h}function u(h=l(),f){let p=[e[f.type],...s.filter(({matcher:m})=>m(f)).map(({reducer:m})=>m)];return p.filter(m=>!!m).length===0&&(p=[r]),p.reduce((m,b)=>{if(b)if(Eo(m)){const S=b(m,f);return S===void 0?m:S}else{if(Ra(m))return Jw(m,v=>b(v,f));{const v=b(m,f);if(v===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return m},h)}return u.getInitialState=l,u}var IM=Symbol.for("rtk-slice-createasyncthunk");function FM(d,t){return`${d}/${t}`}function GM({creators:d}={}){var e;const t=(e=d==null?void 0:d.asyncThunk)==null?void 0:e[IM];return function(r){const{name:l,reducerPath:u=l}=r;if(!l)throw new Error(Ta(11));const h=(typeof r.reducers=="function"?r.reducers(VM()):r.reducers)||{},f=Object.keys(h),p={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},m={addCase(k,O){const B=typeof k=="string"?k:k.type;if(!B)throw new Error(Ta(12));if(B in p.sliceCaseReducersByType)throw new Error(Ta(13));return p.sliceCaseReducersByType[B]=O,m},addMatcher(k,O){return p.sliceMatchers.push({matcher:k,reducer:O}),m},exposeAction(k,O){return p.actionCreators[k]=O,m},exposeCaseReducer(k,O){return p.sliceCaseReducersByName[k]=O,m}};f.forEach(k=>{const O=h[k],B={reducerName:k,type:FM(l,k),createNotation:typeof r.reducers=="function"};YM(O)?KM(B,O,m,t):XM(B,O,m)});function b(){const[k={},O=[],B=void 0]=typeof r.extraReducers=="function"?iE(r.extraReducers):[r.extraReducers],G={...k,...p.sliceCaseReducersByType};return UM(r.initialState,Q=>{for(let W in G)Q.addCase(W,G[W]);for(let W of p.sliceMatchers)Q.addMatcher(W.matcher,W.reducer);for(let W of O)Q.addMatcher(W.matcher,W.reducer);B&&Q.addDefaultCase(B)})}const v=k=>k,S=new Map,x=new WeakMap;let T;function R(k,O){return T||(T=b()),T(k,O)}function M(){return T||(T=b()),T.getInitialState()}function D(k,O=!1){function B(Q){let W=Q[k];return typeof W>"u"&&O&&(W=rp(x,B,M)),W}function G(Q=v){const W=rp(S,O,()=>new WeakMap);return rp(W,Q,()=>{const nt={};for(const[et,yt]of Object.entries(r.selectors??{}))nt[et]=jM(yt,Q,()=>rp(x,Q,M),O);return nt})}return{reducerPath:k,getSelectors:G,get selectors(){return G(B)},selectSlice:B}}const N={name:l,reducer:R,actions:p.actionCreators,caseReducers:p.sliceCaseReducersByName,getInitialState:M,...D(u),injectInto(k,{reducerPath:O,...B}={}){const G=O??u;return k.inject({reducerPath:G,reducer:R},B),{...N,...D(G,!0)}}};return N}}function jM(d,t,e,s){function r(l,...u){let h=t(l);return typeof h>"u"&&s&&(h=e()),d(h,...u)}return r.unwrapped=d,r}var qM=GM();function VM(){function d(t,e){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...e}}return d.withTypes=()=>d,{reducer(t){return Object.assign({[t.name](...e){return t(...e)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,e){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:e}},asyncThunk:d}}function XM({type:d,reducerName:t,createNotation:e},s,r){let l,u;if("reducer"in s){if(e&&!$M(s))throw new Error(Ta(17));l=s.reducer,u=s.prepare}else l=s;r.addCase(d,l).exposeCaseReducer(t,l).exposeAction(t,u?vw(d,u):vw(d))}function YM(d){return d._reducerDefinitionType==="asyncThunk"}function $M(d){return d._reducerDefinitionType==="reducerWithPrepare"}function KM({type:d,reducerName:t},e,s,r){if(!r)throw new Error(Ta(18));const{payloadCreator:l,fulfilled:u,pending:h,rejected:f,settled:p,options:m}=e,b=r(d,l,m);s.exposeAction(t,b),u&&s.addCase(b.fulfilled,u),h&&s.addCase(b.pending,h),f&&s.addCase(b.rejected,f),p&&s.addMatcher(b.settled,p),s.exposeCaseReducer(t,{fulfilled:u||lp,pending:h||lp,rejected:f||lp,settled:p||lp})}function lp(){}function Ta(d){return`Minified Redux Toolkit error #${d}; visit https://redux-toolkit.js.org/Errors?code=${d} for the full message or use the non-minified dev environment for full errors. `}const nE=qM({name:"pdf",initialState:{pdfUrl:null,currentFragment:null,confirmedFragment:null},reducers:{setPdfData:(d,t)=>{d.pdfUrl&&URL.revokeObjectURL(d.pdfUrl),d.pdfUrl=t.payload,d.currentFragment=null,d.confirmedFragment=null},setFragment(d,t){const{base64:e,coordinates:s,dimensions:r}=t.payload;if(!e||!s||!r){console.error("Invalid payload for setFragment:",t.payload);return}d.currentFragment={base64:e.startsWith("data:image/")?e:null,coordinates:s,dimensions:r,createdAt:new Date().toISOString()}},saveFragment:d=>{d.currentFragment&&(d.confirmedFragment=d.currentFragment)},clearCurrentFragment:d=>{d.currentFragment=null},clearSelection:d=>{d.pdfUrl&&URL.revokeObjectURL(d.pdfUrl),d.pdfUrl=null,d.currentFragment=null,d.confirmedFragment=null}}}),{setPdfData:QM,setFragment:WM,saveFragment:ZM,clearCurrentFragment:JM,clearSelection:t2}=nE.actions,e2=nE.reducer,i2=BM({reducer:{pdf:e2}}),n2=async d=>{const t=d.startsWith("http://")||d.startsWith("https://"),e=t?d:`/pdf_to_base64/pdf/${d}`,s=await fetch(e,{mode:t?"cors":"same-origin"});if(!s.ok)throw new Error(`Ошибка: ${s.status}: ${s.statusText}`);if(!s.headers.get("content-type").includes("application/pdf"))throw new Error("Файл не является PDF");const l=await s.blob();if(l.size<100)throw new Error("Файл не найден или пустой");return URL.createObjectURL(l)},s2=()=>{const d=Fv(),[t,e]=Ht.useState(""),[s,r]=Ht.useState(""),l=async()=>{try{if(!t.trim()){r("Введите имя файла");return}d(t2()),r("");const u=await n2(t);d(QM(u))}catch(u){r(`Ошибка загрузки файла: ${u.message}`),console.error(u)}};return Mt.jsxs("div",{className:"flex gap-2 mb-4",children:[Mt.jsx("input",{type:"text",value:t,onChange:u=>{e(u.target.value),r("")},placeholder:"Введите имя файла",className:"border p-2 rounded"}),Mt.jsx("button",{onClick:l,className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Загрузить PDF"}),s&&Mt.jsx("div",{className:"text-red-500 mt-2 p-2 bg-red-50 rounded-md",children:s})]})},_i=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),_0=[.001,0,0,.001,0,0],l0=1.35,ln={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ir={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},a2="pdfjs_internal_editor_",At={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},Pt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},r2={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},ci={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},pp={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},xe={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},yc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Dm={ERRORS:0,WARNINGS:1,INFOS:5},Wp={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},op={moveTo:0,lineTo:1,curveTo:2,closePath:3},l2={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Om=Dm.WARNINGS;function o2(d){Number.isInteger(d)&&(Om=d)}function c2(){return Om}function Nm(d){Om>=Dm.INFOS&&console.log(`Info: ${d}`)}function St(d){Om>=Dm.WARNINGS&&console.log(`Warning: ${d}`)}function ee(d){throw new Error(d)}function Re(d,t){d||ee(t)}function u2(d){switch(d==null?void 0:d.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function sE(d,t=null,e=null){if(!d)return null;if(e&&typeof d=="string"){if(e.addDefaultProtocol&&d.startsWith("www.")){const r=d.match(/\./g);(r==null?void 0:r.length)>=2&&(d=`http://${d}`)}if(e.tryConvertEncoding)try{d=p2(d)}catch{}}const s=t?URL.parse(d,t):URL.parse(d);return u2(s)?s:null}function aE(d,t,e=!1){const s=URL.parse(d);return s?(s.hash=t,s.href):e&&sE(d,"http://example.com")?d.split("#",1)[0]+`${t?`#${t}`:""}`:""}function zt(d,t,e,s=!1){return Object.defineProperty(d,t,{value:e,enumerable:!s,configurable:!0,writable:!1}),e}const Mo=function(){function t(e,s){this.message=e,this.name=s}return t.prototype=new Error,t.constructor=t,t}();class _w extends Mo{constructor(t,e){super(t,"PasswordException"),this.code=e}}class o0 extends Mo{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class w0 extends Mo{constructor(t){super(t,"InvalidPDFException")}}class Zp extends Mo{constructor(t,e,s){super(t,"ResponseException"),this.status=e,this.missing=s}}class h2 extends Mo{constructor(t){super(t,"FormatError")}}class Fr extends Mo{constructor(t){super(t,"AbortException")}}function rE(d){(typeof d!="object"||(d==null?void 0:d.length)===void 0)&&ee("Invalid argument for bytesToString");const t=d.length,e=8192;if(t<e)return String.fromCharCode.apply(null,d);const s=[];for(let r=0;r<t;r+=e){const l=Math.min(r+e,t),u=d.subarray(r,l);s.push(String.fromCharCode.apply(null,u))}return s.join("")}function Uf(d){typeof d!="string"&&ee("Invalid argument for stringToBytes");const t=d.length,e=new Uint8Array(t);for(let s=0;s<t;++s)e[s]=d.charCodeAt(s)&255;return e}function d2(d){return String.fromCharCode(d>>24&255,d>>16&255,d>>8&255,d&255)}function f2(){const d=new Uint8Array(4);return d[0]=1,new Uint32Array(d.buffer,0,1)[0]===1}function g2(){try{return new Function(""),!0}catch{return!1}}class ai{static get isLittleEndian(){return zt(this,"isLittleEndian",f2())}static get isEvalSupported(){return zt(this,"isEvalSupported",g2())}static get isOffscreenCanvasSupported(){return zt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return zt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return zt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return zt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const c0=Array.from(Array(256).keys(),d=>d.toString(16).padStart(2,"0"));var xa,mp,E0;class dt{static makeHexColor(t,e,s){return`#${c0[t]}${c0[e]}${c0[s]}`}static scaleMinMax(t,e){let s;t[0]?(t[0]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[3],e[3]*=t[3]):(s=e[0],e[0]=e[1],e[1]=s,s=e[2],e[2]=e[3],e[3]=s,t[1]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e,s=0){const r=t[s],l=t[s+1];t[s]=r*e[0]+l*e[2]+e[4],t[s+1]=r*e[1]+l*e[3]+e[5]}static applyTransformToBezier(t,e,s=0){const r=e[0],l=e[1],u=e[2],h=e[3],f=e[4],p=e[5];for(let m=0;m<6;m+=2){const b=t[s+m],v=t[s+m+1];t[s+m]=b*r+v*u+f,t[s+m+1]=b*l+v*h+p}}static applyInverseTransform(t,e){const s=t[0],r=t[1],l=e[0]*e[3]-e[1]*e[2];t[0]=(s*e[3]-r*e[2]+e[2]*e[5]-e[4]*e[3])/l,t[1]=(-s*e[1]+r*e[0]+e[4]*e[1]-e[5]*e[0])/l}static axialAlignedBoundingBox(t,e,s){const r=e[0],l=e[1],u=e[2],h=e[3],f=e[4],p=e[5],m=t[0],b=t[1],v=t[2],S=t[3];let x=r*m+f,T=x,R=r*v+f,M=R,D=h*b+p,N=D,k=h*S+p,O=k;if(l!==0||u!==0){const B=l*m,G=l*v,Q=u*b,W=u*S;x+=Q,M+=Q,R+=W,T+=W,D+=B,O+=B,k+=G,N+=G}s[0]=Math.min(s[0],x,R,T,M),s[1]=Math.min(s[1],D,k,N,O),s[2]=Math.max(s[2],x,R,T,M),s[3]=Math.max(s[3],D,k,N,O)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const s=t[0],r=t[1],l=t[2],u=t[3],h=s**2+r**2,f=s*l+r*u,p=l**2+u**2,m=(h+p)/2,b=Math.sqrt(m**2-(h*p-f**2));e[0]=Math.sqrt(m+b||1),e[1]=Math.sqrt(m-b||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const s=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(s>r)return null;const l=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),u=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return l>u?null:[s,l,r,u]}static pointBoundingBox(t,e,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],e),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],e)}static rectBoundingBox(t,e,s,r,l){l[0]=Math.min(l[0],t,s),l[1]=Math.min(l[1],e,r),l[2]=Math.max(l[2],t,s),l[3]=Math.max(l[3],e,r)}static bezierBoundingBox(t,e,s,r,l,u,h,f,p){p[0]=Math.min(p[0],t,h),p[1]=Math.min(p[1],e,f),p[2]=Math.max(p[2],t,h),p[3]=Math.max(p[3],e,f),E(this,xa,E0).call(this,t,s,l,h,e,r,u,f,3*(-t+3*(s-l)+h),6*(t-2*s+l),3*(s-t),p),E(this,xa,E0).call(this,t,s,l,h,e,r,u,f,3*(-e+3*(r-u)+f),6*(e-2*r+u),3*(r-e),p)}}xa=new WeakSet,mp=function(t,e,s,r,l,u,h,f,p,m){if(p<=0||p>=1)return;const b=1-p,v=p*p,S=v*p,x=b*(b*(b*t+3*p*e)+3*v*s)+S*r,T=b*(b*(b*l+3*p*u)+3*v*h)+S*f;m[0]=Math.min(m[0],x),m[1]=Math.min(m[1],T),m[2]=Math.max(m[2],x),m[3]=Math.max(m[3],T)},E0=function(t,e,s,r,l,u,h,f,p,m,b,v){if(Math.abs(p)<1e-12){Math.abs(m)>=1e-12&&E(this,xa,mp).call(this,t,e,s,r,l,u,h,f,-b/m,v);return}const S=m**2-4*b*p;if(S<0)return;const x=Math.sqrt(S),T=2*p;E(this,xa,mp).call(this,t,e,s,r,l,u,h,f,(-m+x)/T,v),E(this,xa,mp).call(this,t,e,s,r,l,u,h,f,(-m-x)/T,v)},w(dt,xa);function p2(d){return decodeURIComponent(escape(d))}let u0=null,ww=null;function m2(d){return u0||(u0=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,ww=new Map([["ﬅ","ſt"]])),d.replaceAll(u0,(t,e,s)=>e?e.normalize("NFKC"):ww.get(s))}function lE(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const d=new Uint8Array(32);return crypto.getRandomValues(d),rE(d)}const Vv="pdfjs_internal_id_";function y2(d,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[s,r,...l]=e;if(!d(s)&&!Number.isInteger(s)||!t(r))return!1;const u=l.length;let h=!0;switch(r.name){case"XYZ":if(u<2||u>3)return!1;break;case"Fit":case"FitB":return u===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(u>1)return!1;break;case"FitR":if(u!==4)return!1;h=!1;break;default:return!1}for(const f of l)if(!(typeof f=="number"||h&&f===null))return!1;return!0}function wi(d,t,e){return Math.min(Math.max(d,t),e)}function oE(d){return Uint8Array.prototype.toBase64?d.toBase64():btoa(rE(d))}function b2(d){return Uint8Array.fromBase64?Uint8Array.fromBase64(d):Uf(atob(d))}typeof Promise.try!="function"&&(Promise.try=function(d,...t){return new Promise(e=>{e(d(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(d){return d.reduce((t,e)=>t+e,0)});const qs="http://www.w3.org/2000/svg",pl=class pl{};J(pl,"CSS",96),J(pl,"PDF",72),J(pl,"PDF_TO_CSS_UNITS",pl.CSS/pl.PDF);let Gr=pl;async function If(d,t="text"){if(Fh(d,document.baseURI)){const e=await fetch(d);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,s)=>{const r=new XMLHttpRequest;r.open("GET",d,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(r.response);return}e(r.responseText);return}s(new Error(r.statusText))}},r.send(null)})}class Ff{constructor({viewBox:t,userUnit:e,scale:s,rotation:r,offsetX:l=0,offsetY:u=0,dontFlip:h=!1}){this.viewBox=t,this.userUnit=e,this.scale=s,this.rotation=r,this.offsetX=l,this.offsetY=u,s*=e;const f=(t[2]+t[0])/2,p=(t[3]+t[1])/2;let m,b,v,S;switch(r%=360,r<0&&(r+=360),r){case 180:m=-1,b=0,v=0,S=1;break;case 90:m=0,b=1,v=1,S=0;break;case 270:m=0,b=-1,v=-1,S=0;break;case 0:m=1,b=0,v=0,S=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}h&&(v=-v,S=-S);let x,T,R,M;m===0?(x=Math.abs(p-t[1])*s+l,T=Math.abs(f-t[0])*s+u,R=(t[3]-t[1])*s,M=(t[2]-t[0])*s):(x=Math.abs(f-t[0])*s+l,T=Math.abs(p-t[1])*s+u,R=(t[2]-t[0])*s,M=(t[3]-t[1])*s),this.transform=[m*s,b*s,v*s,S*s,x-m*s*f-v*s*p,T-b*s*f-S*s*p],this.width=R,this.height=M}get rawDims(){const t=this.viewBox;return zt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:l=!1}={}){return new Ff({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:r,dontFlip:l})}convertToViewportPoint(t,e){const s=[t,e];return dt.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const e=[t[0],t[1]];dt.applyTransform(e,this.transform);const s=[t[2],t[3]];return dt.applyTransform(s,this.transform),[e[0],e[1],s[0],s[1]]}convertToPdfPoint(t,e){const s=[t,e];return dt.applyInverseTransform(s,this.transform),s}}class Xv extends Mo{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Lm(d){const t=d.length;let e=0;for(;e<t&&d[e].trim()==="";)e++;return d.substring(e,e+5).toLowerCase()==="data:"}function Yv(d){return typeof d=="string"&&/\.pdf$/i.test(d)}function v2(d){return[d]=d.split(/[#?]/,1),d.substring(d.lastIndexOf("/")+1)}function A2(d,t="document.pdf"){if(typeof d!="string")return t;if(Lm(d))return St('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=e.exec(d);let l=s.exec(r[1])||s.exec(r[2])||s.exec(r[3]);if(l&&(l=l[0],l.includes("%")))try{l=s.exec(decodeURIComponent(l))[0]}catch{}return l||t}class Ew{constructor(){J(this,"started",Object.create(null));J(this,"times",[])}time(t){t in this.started&&St(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||St(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:s}of this.times)e=Math.max(s.length,e);for(const{name:s,start:r,end:l}of this.times)t.push(`${s.padEnd(e)} ${l-r}ms
`);return t.join("")}}function Fh(d,t){const e=t?URL.parse(d,t):URL.parse(d);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function Zn(d){d.preventDefault()}function Ce(d){d.preventDefault(),d.stopPropagation()}function S2(d){console.log("Deprecated API usage: "+d)}var hd;class $v{static toDateObject(t){if(!t||typeof t!="string")return null;c(this,hd)||A(this,hd,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=c(this,hd).exec(t);if(!e)return null;const s=parseInt(e[1],10);let r=parseInt(e[2],10);r=r>=1&&r<=12?r-1:0;let l=parseInt(e[3],10);l=l>=1&&l<=31?l:1;let u=parseInt(e[4],10);u=u>=0&&u<=23?u:0;let h=parseInt(e[5],10);h=h>=0&&h<=59?h:0;let f=parseInt(e[6],10);f=f>=0&&f<=59?f:0;const p=e[7]||"Z";let m=parseInt(e[8],10);m=m>=0&&m<=23?m:0;let b=parseInt(e[9],10)||0;return b=b>=0&&b<=59?b:0,p==="-"?(u+=m,h+=b):p==="+"&&(u-=m,h-=b),new Date(Date.UTC(s,r,l,u,h,f))}}hd=new WeakMap,w($v,hd);function _2(d,{scale:t=1,rotation:e=0}){const{width:s,height:r}=d.attributes.style,l=[0,0,parseInt(s),parseInt(r)];return new Ff({viewBox:l,userUnit:1,scale:t,rotation:e})}function Kv(d){if(d.startsWith("#")){const t=parseInt(d.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return d.startsWith("rgb(")?d.slice(4,-1).split(",").map(t=>parseInt(t)):d.startsWith("rgba(")?d.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(St(`Not a valid color format: "${d}"`),[0,0,0])}function w2(d){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of d.keys()){t.style.color=e;const s=window.getComputedStyle(t).color;d.set(e,Kv(s))}t.remove()}function ge(d){const{a:t,b:e,c:s,d:r,e:l,f:u}=d.getTransform();return[t,e,s,r,l,u]}function ls(d){const{a:t,b:e,c:s,d:r,e:l,f:u}=d.getTransform().invertSelf();return[t,e,s,r,l,u]}function xo(d,t,e=!1,s=!0){if(t instanceof Ff){const{pageWidth:r,pageHeight:l}=t.rawDims,{style:u}=d,h=ai.isCSSRoundSupported,f=`var(--total-scale-factor) * ${r}px`,p=`var(--total-scale-factor) * ${l}px`,m=h?`round(down, ${f}, var(--scale-round-x))`:`calc(${f})`,b=h?`round(down, ${p}, var(--scale-round-y))`:`calc(${p})`;!e||t.rotation%180===0?(u.width=m,u.height=b):(u.width=b,u.height=m)}s&&d.setAttribute("data-main-rotation",t.rotation)}class Cs{constructor(){const{pixelRatio:t}=Cs;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,s,r,l=-1){let u=1/0,h=1/0,f=1/0;s=Cs.capPixels(s,l),s>0&&(u=Math.sqrt(s/(t*e))),r!==-1&&(h=r/t,f=r/e);const p=Math.min(u,h,f);return this.sx>p||this.sy>p?(this.sx=p,this.sy=p,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,s):s}return t}}const T0=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var nr,yl,wn,sr,dd,Rc,fd,rm,cE,si,uE,hE,Gh,dE,yp;const Ys=class Ys{constructor(t){w(this,si);w(this,nr,null);w(this,yl,null);w(this,wn);w(this,sr,null);w(this,dd,null);w(this,Rc,null);A(this,wn,t),c(Ys,fd)||A(Ys,fd,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=A(this,nr,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=c(this,wn)._uiManager._signal;t.addEventListener("contextmenu",Zn,{signal:e}),t.addEventListener("pointerdown",E(Ys,rm,cE),{signal:e});const s=A(this,sr,document.createElement("div"));s.className="buttons",t.append(s);const r=c(this,wn).toolbarPosition;if(r){const{style:l}=t,u=c(this,wn)._uiManager.direction==="ltr"?1-r[0]:r[0];l.insetInlineEnd=`${100*u}%`,l.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return E(this,si,dE).call(this),t}get div(){return c(this,nr)}hide(){var t;c(this,nr).classList.add("hidden"),(t=c(this,yl))==null||t.hideDropdown()}show(){var t;c(this,nr).classList.remove("hidden"),(t=c(this,dd))==null||t.shown()}async addAltText(t){const e=await t.render();E(this,si,Gh).call(this,e),c(this,sr).prepend(e,c(this,si,yp)),A(this,dd,t)}addColorPicker(t){A(this,yl,t);const e=t.renderButton();E(this,si,Gh).call(this,e),c(this,sr).prepend(e,c(this,si,yp))}async addEditSignatureButton(t){const e=A(this,Rc,await t.renderEditButton(c(this,wn)));E(this,si,Gh).call(this,e),c(this,sr).prepend(e,c(this,si,yp))}updateEditSignatureButton(t){c(this,Rc)&&(c(this,Rc).title=t)}remove(){var t;c(this,nr).remove(),(t=c(this,yl))==null||t.destroy(),A(this,yl,null)}};nr=new WeakMap,yl=new WeakMap,wn=new WeakMap,sr=new WeakMap,dd=new WeakMap,Rc=new WeakMap,fd=new WeakMap,rm=new WeakSet,cE=function(t){t.stopPropagation()},si=new WeakSet,uE=function(t){c(this,wn)._focusEventsAllowed=!1,Ce(t)},hE=function(t){c(this,wn)._focusEventsAllowed=!0,Ce(t)},Gh=function(t){const e=c(this,wn)._uiManager._signal;t.addEventListener("focusin",E(this,si,uE).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",E(this,si,hE).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Zn,{signal:e})},dE=function(){const{editorType:t,_uiManager:e}=c(this,wn),s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",c(Ys,fd)[t]),E(this,si,Gh).call(this,s),s.addEventListener("click",r=>{e.delete()},{signal:e._signal}),c(this,sr).append(s)},yp=function(){const t=document.createElement("div");return t.className="divider",t},w(Ys,rm),w(Ys,fd,null);let x0=Ys;var gd,bl,vl,jr,fE,gE,pE;class E2{constructor(t){w(this,jr);w(this,gd,null);w(this,bl,null);w(this,vl);A(this,vl,t)}show(t,e,s){const[r,l]=E(this,jr,gE).call(this,e,s),{style:u}=c(this,bl)||A(this,bl,E(this,jr,fE).call(this));t.append(c(this,bl)),u.insetInlineEnd=`${100*r}%`,u.top=`calc(${100*l}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,bl).remove()}}gd=new WeakMap,bl=new WeakMap,vl=new WeakMap,jr=new WeakSet,fE=function(){const t=A(this,bl,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Zn,{signal:c(this,vl)._signal});const e=A(this,gd,document.createElement("div"));return e.className="buttons",t.append(e),E(this,jr,pE).call(this),t},gE=function(t,e){let s=0,r=0;for(const l of t){const u=l.y+l.height;if(u<s)continue;const h=l.x+(e?l.width:0);if(u>s){r=h,s=u;continue}e?h>r&&(r=h):h<r&&(r=h)}return[e?1-r:r,s]},pE=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=c(this,vl)._signal;t.addEventListener("contextmenu",Zn,{signal:s}),t.addEventListener("click",()=>{c(this,vl).highlightSelection("floating_button")},{signal:s}),c(this,gd).append(t)};function mE(d,t,e){for(const s of e)t.addEventListener(s,d[s].bind(d))}var lm;class T2{constructor(){w(this,lm,0)}get id(){return`${a2}${mi(this,lm)._++}`}}lm=new WeakMap;var Mc,pd,hi,Dc,bp;const iA=class iA{constructor(){w(this,Dc);w(this,Mc,lE());w(this,pd,0);w(this,hi,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const l=r.decode().then(()=>(s.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return zt(this,"_isSVGFittingCanvas",l)}async getFromFile(t){const{lastModified:e,name:s,size:r,type:l}=t;return E(this,Dc,bp).call(this,`${e}_${s}_${r}_${l}`,t)}async getFromUrl(t){return E(this,Dc,bp).call(this,t,t)}async getFromBlob(t,e){const s=await e;return E(this,Dc,bp).call(this,t,s)}async getFromId(t){c(this,hi)||A(this,hi,new Map);const e=c(this,hi).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:s}=e;return delete e.blobPromise,this.getFromBlob(e.id,s)}return this.getFromUrl(e.url)}getFromCanvas(t,e){c(this,hi)||A(this,hi,new Map);let s=c(this,hi).get(t);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const r=new OffscreenCanvas(e.width,e.height);return r.getContext("2d").drawImage(e,0,0),s={bitmap:r.transferToImageBitmap(),id:`image_${c(this,Mc)}_${mi(this,pd)._++}`,refCounter:1,isSvg:!1},c(this,hi).set(t,s),c(this,hi).set(s.id,s),s}getSvgUrl(t){const e=c(this,hi).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var r;c(this,hi)||A(this,hi,new Map);const e=c(this,hi).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:s}=e;if(!e.url&&!e.file){const l=new OffscreenCanvas(s.width,s.height);l.getContext("bitmaprenderer").transferFromImageBitmap(s),e.blobPromise=l.convertToBlob()}(r=s.close)==null||r.call(s),e.bitmap=null}isValidId(t){return t.startsWith(`image_${c(this,Mc)}_`)}};Mc=new WeakMap,pd=new WeakMap,hi=new WeakMap,Dc=new WeakSet,bp=async function(t,e){c(this,hi)||A(this,hi,new Map);let s=c(this,hi).get(t);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${c(this,Mc)}_${mi(this,pd)._++}`,refCounter:0,isSvg:!1});let r;if(typeof e=="string"?(s.url=e,r=await If(e,"blob")):e instanceof File?r=s.file=e:e instanceof Blob&&(r=e),r.type==="image/svg+xml"){const l=iA._isSVGFittingCanvas,u=new FileReader,h=new Image,f=new Promise((p,m)=>{h.onload=()=>{s.bitmap=h,s.isSvg=!0,p()},u.onload=async()=>{const b=s.svgUrl=u.result;h.src=await l?`${b}#svgView(preserveAspectRatio(none))`:b},h.onerror=u.onerror=m});u.readAsDataURL(r),await f}else s.bitmap=await createImageBitmap(r);s.refCounter=1}catch(r){St(r),s=null}return c(this,hi).set(t,s),s&&c(this,hi).set(s.id,s),s};let C0=iA;var Ae,ar,md,fe;class x2{constructor(t=128){w(this,Ae,[]);w(this,ar,!1);w(this,md);w(this,fe,-1);A(this,md,t)}add({cmd:t,undo:e,post:s,mustExec:r,type:l=NaN,overwriteIfSameType:u=!1,keepUndo:h=!1}){if(r&&t(),c(this,ar))return;const f={cmd:t,undo:e,post:s,type:l};if(c(this,fe)===-1){c(this,Ae).length>0&&(c(this,Ae).length=0),A(this,fe,0),c(this,Ae).push(f);return}if(u&&c(this,Ae)[c(this,fe)].type===l){h&&(f.undo=c(this,Ae)[c(this,fe)].undo),c(this,Ae)[c(this,fe)]=f;return}const p=c(this,fe)+1;p===c(this,md)?c(this,Ae).splice(0,1):(A(this,fe,p),p<c(this,Ae).length&&c(this,Ae).splice(p)),c(this,Ae).push(f)}undo(){if(c(this,fe)===-1)return;A(this,ar,!0);const{undo:t,post:e}=c(this,Ae)[c(this,fe)];t(),e==null||e(),A(this,ar,!1),A(this,fe,c(this,fe)-1)}redo(){if(c(this,fe)<c(this,Ae).length-1){A(this,fe,c(this,fe)+1),A(this,ar,!0);const{cmd:t,post:e}=c(this,Ae)[c(this,fe)];t(),e==null||e(),A(this,ar,!1)}}hasSomethingToUndo(){return c(this,fe)!==-1}hasSomethingToRedo(){return c(this,fe)<c(this,Ae).length-1}cleanType(t){if(c(this,fe)!==-1){for(let e=c(this,fe);e>=0;e--)if(c(this,Ae)[e].type!==t){c(this,Ae).splice(e+1,c(this,fe)-e),A(this,fe,e);return}c(this,Ae).length=0,A(this,fe,-1)}}destroy(){A(this,Ae,null)}}Ae=new WeakMap,ar=new WeakMap,md=new WeakMap,fe=new WeakMap;var om,yE;class Gf{constructor(t){w(this,om);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=ai.platform;for(const[s,r,l={}]of t)for(const u of s){const h=u.startsWith("mac+");e&&h?(this.callbacks.set(u.slice(4),{callback:r,options:l}),this.allKeys.add(u.split("+").at(-1))):!e&&!h&&(this.callbacks.set(u,{callback:r,options:l}),this.allKeys.add(u.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const s=this.callbacks.get(E(this,om,yE).call(this,e));if(!s)return;const{callback:r,options:{bubbles:l=!1,args:u=[],checker:h=null}}=s;h&&!h(t,e)||(r.bind(t,...u,e)(),l||Ce(e))}}om=new WeakSet,yE=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const cm=class cm{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return w2(t),zt(this,"_colors",t)}convert(t){const e=Kv(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[s,r]of this._colors)if(r.every((l,u)=>l===e[u]))return cm._colorsMapping.get(s);return e}getHexCode(t){const e=this._colors.get(t);return e?dt.makeHexColor(...e):t}};J(cm,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let R0=cm;var Oc,Yi,ke,Qe,Nc,Ks,Lc,En,rr,lr,kc,Al,us,Bn,Sl,yd,bd,zc,vd,hs,or,Pc,cr,ds,um,ur,Ad,hr,_l,wl,dr,Sd,Fe,Kt,Qs,fr,El,_d,wd,gr,fs,Ws,Ed,Tn,it,vp,M0,bE,vE,Ap,AE,SE,_E,D0,wE,O0,N0,EE,yi,Vs,TE,xE,L0,CE,jh,k0;const Tc=class Tc{constructor(t,e,s,r,l,u,h,f,p,m,b,v,S,x){w(this,it);w(this,Oc,new AbortController);w(this,Yi,null);w(this,ke,new Map);w(this,Qe,new Map);w(this,Nc,null);w(this,Ks,null);w(this,Lc,null);w(this,En,new x2);w(this,rr,null);w(this,lr,null);w(this,kc,0);w(this,Al,new Set);w(this,us,null);w(this,Bn,null);w(this,Sl,new Set);J(this,"_editorUndoBar",null);w(this,yd,!1);w(this,bd,!1);w(this,zc,!1);w(this,vd,null);w(this,hs,null);w(this,or,null);w(this,Pc,null);w(this,cr,!1);w(this,ds,null);w(this,um,new T2);w(this,ur,!1);w(this,Ad,!1);w(this,hr,null);w(this,_l,null);w(this,wl,null);w(this,dr,null);w(this,Sd,null);w(this,Fe,At.NONE);w(this,Kt,new Set);w(this,Qs,null);w(this,fr,null);w(this,El,null);w(this,_d,null);w(this,wd,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});w(this,gr,[0,0]);w(this,fs,null);w(this,Ws,null);w(this,Ed,null);w(this,Tn,null);const T=this._signal=c(this,Oc).signal;A(this,Ws,t),A(this,Ed,e),A(this,Nc,s),A(this,fr,r),this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:T}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:T}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:T}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:T}),l._on("setpreference",this.onSetPreference.bind(this),{signal:T}),l._on("switchannotationeditorparams",R=>this.updateParams(R.type,R.value),{signal:T}),E(this,it,AE).call(this),E(this,it,EE).call(this),E(this,it,D0).call(this),A(this,Ks,u.annotationStorage),A(this,vd,u.filterFactory),A(this,El,h),A(this,Pc,f||null),A(this,yd,p),A(this,bd,m),A(this,zc,b),A(this,Sd,v||null),this.viewParameters={realScale:Gr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=x!==!1}static get _keyboardManager(){const t=Tc.prototype,e=u=>c(u,Ws).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&u.hasSomethingToControl(),s=(u,{target:h})=>{if(h instanceof HTMLInputElement){const{type:f}=h;return f!=="text"&&f!=="number"}return!0},r=this.TRANSLATE_SMALL,l=this.TRANSLATE_BIG;return zt(this,"_keyboardManager",new Gf([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(u,{target:h})=>!(h instanceof HTMLButtonElement)&&c(u,Ws).contains(h)&&!u.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(u,{target:h})=>!(h instanceof HTMLButtonElement)&&c(u,Ws).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-l,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[l,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-l],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,l],checker:e}]]))}destroy(){var t,e,s,r,l,u,h,f;(t=c(this,Tn))==null||t.resolve(),A(this,Tn,null),(e=c(this,Oc))==null||e.abort(),A(this,Oc,null),this._signal=null;for(const p of c(this,Qe).values())p.destroy();c(this,Qe).clear(),c(this,ke).clear(),c(this,Sl).clear(),(s=c(this,dr))==null||s.clear(),A(this,Yi,null),c(this,Kt).clear(),c(this,En).destroy(),(r=c(this,Nc))==null||r.destroy(),(l=c(this,fr))==null||l.destroy(),(u=c(this,ds))==null||u.hide(),A(this,ds,null),(h=c(this,wl))==null||h.destroy(),A(this,wl,null),c(this,hs)&&(clearTimeout(c(this,hs)),A(this,hs,null)),c(this,fs)&&(clearTimeout(c(this,fs)),A(this,fs,null)),(f=this._editorUndoBar)==null||f.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return c(this,Sd)}get useNewAltTextFlow(){return c(this,bd)}get useNewAltTextWhenAddingImage(){return c(this,zc)}get hcmFilter(){return zt(this,"hcmFilter",c(this,El)?c(this,vd).addHCMFilter(c(this,El).foreground,c(this,El).background):"none")}get direction(){return zt(this,"direction",getComputedStyle(c(this,Ws)).direction)}get highlightColors(){return zt(this,"highlightColors",c(this,Pc)?new Map(c(this,Pc).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return zt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),A(this,lr,t)}setMainHighlightColorPicker(t){A(this,wl,t)}editAltText(t,e=!1){var s;(s=c(this,Nc))==null||s.editAltText(this,t,e)}getSignature(t){var e;(e=c(this,fr))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return c(this,fr)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":A(this,zc,e);break}}onPageChanging({pageNumber:t}){A(this,kc,t-1)}focusMainContainer(){c(this,Ws).focus()}findParent(t,e){for(const s of c(this,Qe).values()){const{x:r,y:l,width:u,height:h}=s.div.getBoundingClientRect();if(t>=r&&t<=r+u&&e>=l&&e<=l+h)return s}return null}disableUserSelect(t=!1){c(this,Ed).classList.toggle("noUserSelect",t)}addShouldRescale(t){c(this,Sl).add(t)}removeShouldRescale(t){c(this,Sl).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Gr.PDF_TO_CSS_UNITS;for(const s of c(this,Sl))s.onScaleChanging();(e=c(this,lr))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:s,anchorOffset:r,focusNode:l,focusOffset:u}=e,h=e.toString(),p=E(this,it,vp).call(this,e).closest(".textLayer"),m=this.getSelectionBoxes(p);if(!m)return;e.empty();const b=E(this,it,M0).call(this,p),v=c(this,Fe)===At.NONE,S=()=>{b==null||b.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:m,anchorNode:s,anchorOffset:r,focusNode:l,focusOffset:u,text:h}),v&&this.showAllEditors("highlight",!0,!0)};if(v){this.switchToMode(At.HIGHLIGHT,S);return}S()}addToAnnotationStorage(t){!t.isEmpty()&&c(this,Ks)&&!c(this,Ks).has(t.id)&&c(this,Ks).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,c(this,cr)&&(A(this,cr,!1),E(this,it,Ap).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of c(this,Kt))if(e.div.contains(t)){A(this,_l,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!c(this,_l))return;const[t,e]=c(this,_l);A(this,_l,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){E(this,it,D0).call(this),E(this,it,O0).call(this)}removeEditListeners(){E(this,it,wE).call(this),E(this,it,N0).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const s of c(this,Bn))if(s.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const s of c(this,Bn))if(s.isHandlingMimeForPasting(e.type)){s.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var s;if(t.preventDefault(),(s=c(this,Yi))==null||s.commitOrRemove(),!this.hasSelection)return;const e=[];for(const r of c(this,Kt)){const l=r.serialize(!0);l&&e.push(l)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const l of e.items)for(const u of c(this,Bn))if(u.isHandlingMimeForPasting(l.type)){u.paste(l,this.currentLayer);return}let s=e.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(l){St(`paste: "${l.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const r=this.currentLayer;try{const l=[];for(const f of s){const p=await r.deserialize(f);if(!p)return;l.push(p)}const u=()=>{for(const f of l)E(this,it,L0).call(this,f);E(this,it,k0).call(this,l)},h=()=>{for(const f of l)f.remove()};this.addCommands({cmd:u,undo:h,mustExec:!0})}catch(l){St(`paste: "${l.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,Fe)!==At.NONE&&!this.isEditorHandlingKeyboard&&Tc._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,cr)&&(A(this,cr,!1),E(this,it,Ap).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(E(this,it,SE).call(this),E(this,it,O0).call(this),E(this,it,yi).call(this,{isEditing:c(this,Fe)!==At.NONE,isEmpty:E(this,it,jh).call(this),hasSomethingToUndo:c(this,En).hasSomethingToUndo(),hasSomethingToRedo:c(this,En).hasSomethingToRedo(),hasSelectedEditor:!1})):(E(this,it,_E).call(this),E(this,it,N0).call(this),E(this,it,yi).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!c(this,Bn)){A(this,Bn,t);for(const e of c(this,Bn))E(this,it,Vs).call(this,e.defaultPropertiesToUpdate)}}getId(){return c(this,um).id}get currentLayer(){return c(this,Qe).get(c(this,kc))}getLayer(t){return c(this,Qe).get(t)}get currentPageIndex(){return c(this,kc)}addLayer(t){c(this,Qe).set(t.pageIndex,t),c(this,ur)?t.enable():t.disable()}removeLayer(t){c(this,Qe).delete(t.pageIndex)}async updateMode(t,e=null,s=!1){var r,l,u;if(c(this,Fe)!==t&&!(c(this,Tn)&&(await c(this,Tn).promise,!c(this,Tn)))){if(A(this,Tn,Promise.withResolvers()),(r=c(this,lr))==null||r.commitOrRemove(),A(this,Fe,t),t===At.NONE){this.setEditingState(!1),E(this,it,xE).call(this),(l=this._editorUndoBar)==null||l.hide(),c(this,Tn).resolve();return}t===At.SIGNATURE&&await((u=c(this,fr))==null?void 0:u.loadSignatures()),this.setEditingState(!0),await E(this,it,TE).call(this),this.unselectAll();for(const h of c(this,Qe).values())h.updateMode(t);if(!e){s&&this.addNewEditorFromKeyboard(),c(this,Tn).resolve();return}for(const h of c(this,ke).values())h.annotationElementId===e||h.id===e?(this.setSelected(h),h.enterInEditMode()):h.unselect();c(this,Tn).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==c(this,Fe)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){var s;if(c(this,Bn)){switch(t){case Pt.CREATE:this.currentLayer.addNewEditor(e);return;case Pt.HIGHLIGHT_DEFAULT_COLOR:(s=c(this,wl))==null||s.updateColor(e);break;case Pt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,_d)||A(this,_d,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const r of c(this,Kt))r.updateParams(t,e);for(const r of c(this,Bn))r.updateDefaultParams(t,e)}}showAllEditors(t,e,s=!1){var l;for(const u of c(this,ke).values())u.editorType===t&&u.show(e);(((l=c(this,_d))==null?void 0:l.get(Pt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&E(this,it,Vs).call(this,[[Pt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(c(this,Ad)!==t){A(this,Ad,t);for(const e of c(this,Qe).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const s of c(this,ke).values())s.pageIndex===t&&e.push(s);return e}getEditor(t){return c(this,ke).get(t)}addEditor(t){c(this,ke).set(t.id,t)}removeEditor(t){var e,s;t.div.contains(document.activeElement)&&(c(this,hs)&&clearTimeout(c(this,hs)),A(this,hs,setTimeout(()=>{this.focusMainContainer(),A(this,hs,null)},0))),c(this,ke).delete(t.id),t.annotationElementId&&((e=c(this,dr))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!c(this,Al).has(t.annotationElementId))&&((s=c(this,Ks))==null||s.remove(t.id))}addDeletedAnnotationElement(t){c(this,Al).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return c(this,Al).has(t)}removeDeletedAnnotationElement(t){c(this,Al).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){c(this,Yi)!==t&&(A(this,Yi,t),t&&E(this,it,Vs).call(this,t.propertiesToUpdate))}updateUI(t){c(this,it,CE)===t&&E(this,it,Vs).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){E(this,it,Vs).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(c(this,Kt).has(t)){c(this,Kt).delete(t),t.unselect(),E(this,it,yi).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,Kt).add(t),t.select(),E(this,it,Vs).call(this,t.propertiesToUpdate),E(this,it,yi).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=c(this,lr))==null||e.commitOrRemove();for(const s of c(this,Kt))s!==t&&s.unselect();c(this,Kt).clear(),c(this,Kt).add(t),t.select(),E(this,it,Vs).call(this,t.propertiesToUpdate),E(this,it,yi).call(this,{hasSelectedEditor:!0})}isSelected(t){return c(this,Kt).has(t)}get firstSelectedEditor(){return c(this,Kt).values().next().value}unselect(t){t.unselect(),c(this,Kt).delete(t),E(this,it,yi).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,Kt).size!==0}get isEnterHandled(){return c(this,Kt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;c(this,En).undo(),E(this,it,yi).call(this,{hasSomethingToUndo:c(this,En).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:E(this,it,jh).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){c(this,En).redo(),E(this,it,yi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,En).hasSomethingToRedo(),isEmpty:E(this,it,jh).call(this)})}addCommands(t){c(this,En).add(t),E(this,it,yi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:E(this,it,jh).call(this)})}cleanUndoStack(t){c(this,En).cleanType(t)}delete(){var l;this.commitOrRemove();const t=(l=this.currentLayer)==null?void 0:l.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...c(this,Kt)],s=()=>{var u;(u=this._editorUndoBar)==null||u.show(r,e.length===1?e[0].editorType:e.length);for(const h of e)h.remove()},r=()=>{for(const u of e)E(this,it,L0).call(this,u)};this.addCommands({cmd:s,undo:r,mustExec:!0})}commitOrRemove(){var t;(t=c(this,Yi))==null||t.commitOrRemove()}hasSomethingToControl(){return c(this,Yi)||this.hasSelection}selectAll(){for(const t of c(this,Kt))t.commit();E(this,it,k0).call(this,c(this,ke).values())}unselectAll(){var t;if(!(c(this,Yi)&&(c(this,Yi).commitOrRemove(),c(this,Fe)!==At.NONE))&&!((t=c(this,lr))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of c(this,Kt))e.unselect();c(this,Kt).clear(),E(this,it,yi).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;c(this,gr)[0]+=t,c(this,gr)[1]+=e;const[r,l]=c(this,gr),u=[...c(this,Kt)],h=1e3;c(this,fs)&&clearTimeout(c(this,fs)),A(this,fs,setTimeout(()=>{A(this,fs,null),c(this,gr)[0]=c(this,gr)[1]=0,this.addCommands({cmd:()=>{for(const f of u)c(this,ke).has(f.id)&&(f.translateInPage(r,l),f.translationDone())},undo:()=>{for(const f of u)c(this,ke).has(f.id)&&(f.translateInPage(-r,-l),f.translationDone())},mustExec:!1})},h));for(const f of u)f.translateInPage(t,e),f.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),A(this,us,new Map);for(const t of c(this,Kt))c(this,us).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,us))return!1;this.disableUserSelect(!1);const t=c(this,us);A(this,us,null);let e=!1;for(const[{x:r,y:l,pageIndex:u},h]of t)h.newX=r,h.newY=l,h.newPageIndex=u,e||(e=r!==h.savedX||l!==h.savedY||u!==h.savedPageIndex);if(!e)return!1;const s=(r,l,u,h)=>{if(c(this,ke).has(r.id)){const f=c(this,Qe).get(h);f?r._setParentAndPosition(f,l,u):(r.pageIndex=h,r.x=l,r.y=u)}};return this.addCommands({cmd:()=>{for(const[r,{newX:l,newY:u,newPageIndex:h}]of t)s(r,l,u,h)},undo:()=>{for(const[r,{savedX:l,savedY:u,savedPageIndex:h}]of t)s(r,l,u,h)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(c(this,us))for(const s of c(this,us).keys())s.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||c(this,Kt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return c(this,Yi)===t}getActive(){return c(this,Yi)}getMode(){return c(this,Fe)}get imageManager(){return zt(this,"imageManager",new C0)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let p=0,m=e.rangeCount;p<m;p++)if(!t.contains(e.getRangeAt(p).commonAncestorContainer))return null;const{x:s,y:r,width:l,height:u}=t.getBoundingClientRect();let h;switch(t.getAttribute("data-main-rotation")){case"90":h=(p,m,b,v)=>({x:(m-r)/u,y:1-(p+b-s)/l,width:v/u,height:b/l});break;case"180":h=(p,m,b,v)=>({x:1-(p+b-s)/l,y:1-(m+v-r)/u,width:b/l,height:v/u});break;case"270":h=(p,m,b,v)=>({x:1-(m+v-r)/u,y:(p-s)/l,width:v/u,height:b/l});break;default:h=(p,m,b,v)=>({x:(p-s)/l,y:(m-r)/u,width:b/l,height:v/u});break}const f=[];for(let p=0,m=e.rangeCount;p<m;p++){const b=e.getRangeAt(p);if(!b.collapsed)for(const{x:v,y:S,width:x,height:T}of b.getClientRects())x===0||T===0||f.push(h(v,S,x,T))}return f.length===0?null:f}addChangedExistingAnnotation({annotationElementId:t,id:e}){(c(this,Lc)||A(this,Lc,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=c(this,Lc))==null||e.delete(t)}renderAnnotationElement(t){var r;const e=(r=c(this,Lc))==null?void 0:r.get(t.data.id);if(!e)return;const s=c(this,Ks).getRawValue(e);s&&(c(this,Fe)===At.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,e,s){var l;const r=(l=c(this,dr))==null?void 0:l.get(t);r&&(r.setCanvas(e,s),c(this,dr).delete(t))}addMissingCanvas(t,e){(c(this,dr)||A(this,dr,new Map)).set(t,e)}};Oc=new WeakMap,Yi=new WeakMap,ke=new WeakMap,Qe=new WeakMap,Nc=new WeakMap,Ks=new WeakMap,Lc=new WeakMap,En=new WeakMap,rr=new WeakMap,lr=new WeakMap,kc=new WeakMap,Al=new WeakMap,us=new WeakMap,Bn=new WeakMap,Sl=new WeakMap,yd=new WeakMap,bd=new WeakMap,zc=new WeakMap,vd=new WeakMap,hs=new WeakMap,or=new WeakMap,Pc=new WeakMap,cr=new WeakMap,ds=new WeakMap,um=new WeakMap,ur=new WeakMap,Ad=new WeakMap,hr=new WeakMap,_l=new WeakMap,wl=new WeakMap,dr=new WeakMap,Sd=new WeakMap,Fe=new WeakMap,Kt=new WeakMap,Qs=new WeakMap,fr=new WeakMap,El=new WeakMap,_d=new WeakMap,wd=new WeakMap,gr=new WeakMap,fs=new WeakMap,Ws=new WeakMap,Ed=new WeakMap,Tn=new WeakMap,it=new WeakSet,vp=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},M0=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const s of c(this,Qe).values())if(s.hasTextLayer(t))return s;return null},bE=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=E(this,it,vp).call(this,t).closest(".textLayer"),r=this.getSelectionBoxes(s);r&&(c(this,ds)||A(this,ds,new E2(this)),c(this,ds).show(s,r,this.direction==="ltr"))},vE=function(){var l,u,h;const t=document.getSelection();if(!t||t.isCollapsed){c(this,Qs)&&((l=c(this,ds))==null||l.hide(),A(this,Qs,null),E(this,it,yi).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===c(this,Qs))return;const r=E(this,it,vp).call(this,t).closest(".textLayer");if(!r){c(this,Qs)&&((u=c(this,ds))==null||u.hide(),A(this,Qs,null),E(this,it,yi).call(this,{hasSelectedText:!1}));return}if((h=c(this,ds))==null||h.hide(),A(this,Qs,e),E(this,it,yi).call(this,{hasSelectedText:!0}),!(c(this,Fe)!==At.HIGHLIGHT&&c(this,Fe)!==At.NONE)&&(c(this,Fe)===At.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),A(this,cr,this.isShiftKeyDown),!this.isShiftKeyDown)){const f=c(this,Fe)===At.HIGHLIGHT?E(this,it,M0).call(this,r):null;f==null||f.toggleDrawing();const p=new AbortController,m=this.combinedSignal(p),b=v=>{v.type==="pointerup"&&v.button!==0||(p.abort(),f==null||f.toggleDrawing(!0),v.type==="pointerup"&&E(this,it,Ap).call(this,"main_toolbar"))};window.addEventListener("pointerup",b,{signal:m}),window.addEventListener("blur",b,{signal:m})}},Ap=function(t=""){c(this,Fe)===At.HIGHLIGHT?this.highlightSelection(t):c(this,yd)&&E(this,it,bE).call(this)},AE=function(){document.addEventListener("selectionchange",E(this,it,vE).bind(this),{signal:this._signal})},SE=function(){if(c(this,or))return;A(this,or,new AbortController);const t=this.combinedSignal(c(this,or));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},_E=function(){var t;(t=c(this,or))==null||t.abort(),A(this,or,null)},D0=function(){if(c(this,hr))return;A(this,hr,new AbortController);const t=this.combinedSignal(c(this,hr));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},wE=function(){var t;(t=c(this,hr))==null||t.abort(),A(this,hr,null)},O0=function(){if(c(this,rr))return;A(this,rr,new AbortController);const t=this.combinedSignal(c(this,rr));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},N0=function(){var t;(t=c(this,rr))==null||t.abort(),A(this,rr,null)},EE=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},yi=function(t){Object.entries(t).some(([s,r])=>c(this,wd)[s]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,wd),t)}),c(this,Fe)===At.HIGHLIGHT&&t.hasSelectedEditor===!1&&E(this,it,Vs).call(this,[[Pt.HIGHLIGHT_FREE,!0]]))},Vs=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},TE=async function(){if(!c(this,ur)){A(this,ur,!0);const t=[];for(const e of c(this,Qe).values())t.push(e.enable());await Promise.all(t);for(const e of c(this,ke).values())e.enable()}},xE=function(){if(this.unselectAll(),c(this,ur)){A(this,ur,!1);for(const t of c(this,Qe).values())t.disable();for(const t of c(this,ke).values())t.disable()}},L0=function(t){const e=c(this,Qe).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},CE=function(){let t=null;for(t of c(this,Kt));return t},jh=function(){if(c(this,ke).size===0)return!0;if(c(this,ke).size===1)for(const t of c(this,ke).values())return t.isEmpty();return!1},k0=function(t){for(const e of c(this,Kt))e.unselect();c(this,Kt).clear();for(const e of t)e.isEmpty()||(c(this,Kt).add(e),e.select());E(this,it,yi).call(this,{hasSelectedEditor:this.hasSelection})},J(Tc,"TRANSLATE_SMALL",1),J(Tc,"TRANSLATE_BIG",10);let Co=Tc;var Ge,gs,Hn,Bc,ps,$i,Hc,ms,Li,Zs,Tl,ys,pr,Wn,qh,Sp;const bi=class bi{constructor(t){w(this,Wn);w(this,Ge,null);w(this,gs,!1);w(this,Hn,null);w(this,Bc,null);w(this,ps,null);w(this,$i,null);w(this,Hc,!1);w(this,ms,null);w(this,Li,null);w(this,Zs,null);w(this,Tl,null);w(this,ys,!1);A(this,Li,t),A(this,ys,t._uiManager.useNewAltTextFlow),c(bi,pr)||A(bi,pr,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){bi._l10n??(bi._l10n=t)}async render(){const t=A(this,Hn,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=A(this,Bc,document.createElement("span"));t.append(e),c(this,ys)?(t.classList.add("new"),t.setAttribute("data-l10n-id",c(bi,pr).missing),e.setAttribute("data-l10n-id",c(bi,pr)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=c(this,Li)._uiManager._signal;t.addEventListener("contextmenu",Zn,{signal:s}),t.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:s});const r=l=>{l.preventDefault(),c(this,Li)._uiManager.editAltText(c(this,Li)),c(this,ys)&&c(this,Li)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:c(this,Wn,qh)}})};return t.addEventListener("click",r,{capture:!0,signal:s}),t.addEventListener("keydown",l=>{l.target===t&&l.key==="Enter"&&(A(this,Hc,!0),r(l))},{signal:s}),await E(this,Wn,Sp).call(this),t}finish(){c(this,Hn)&&(c(this,Hn).focus({focusVisible:c(this,Hc)}),A(this,Hc,!1))}isEmpty(){return c(this,ys)?c(this,Ge)===null:!c(this,Ge)&&!c(this,gs)}hasData(){return c(this,ys)?c(this,Ge)!==null||!!c(this,Zs):this.isEmpty()}get guessedText(){return c(this,Zs)}async setGuessedText(t){c(this,Ge)===null&&(A(this,Zs,t),A(this,Tl,await bi._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),E(this,Wn,Sp).call(this))}toggleAltTextBadge(t=!1){var e;if(!c(this,ys)||c(this,Ge)){(e=c(this,ms))==null||e.remove(),A(this,ms,null);return}if(!c(this,ms)){const s=A(this,ms,document.createElement("div"));s.className="noAltTextBadge",c(this,Li).div.append(s)}c(this,ms).classList.toggle("hidden",!t)}serialize(t){let e=c(this,Ge);return!t&&c(this,Zs)===e&&(e=c(this,Tl)),{altText:e,decorative:c(this,gs),guessedText:c(this,Zs),textWithDisclaimer:c(this,Tl)}}get data(){return{altText:c(this,Ge),decorative:c(this,gs)}}set data({altText:t,decorative:e,guessedText:s,textWithDisclaimer:r,cancel:l=!1}){s&&(A(this,Zs,s),A(this,Tl,r)),!(c(this,Ge)===t&&c(this,gs)===e)&&(l||(A(this,Ge,t),A(this,gs,e)),E(this,Wn,Sp).call(this))}toggle(t=!1){c(this,Hn)&&(!t&&c(this,$i)&&(clearTimeout(c(this,$i)),A(this,$i,null)),c(this,Hn).disabled=!t)}shown(){c(this,Li)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:c(this,Wn,qh)}})}destroy(){var t,e;(t=c(this,Hn))==null||t.remove(),A(this,Hn,null),A(this,Bc,null),A(this,ps,null),(e=c(this,ms))==null||e.remove(),A(this,ms,null)}};Ge=new WeakMap,gs=new WeakMap,Hn=new WeakMap,Bc=new WeakMap,ps=new WeakMap,$i=new WeakMap,Hc=new WeakMap,ms=new WeakMap,Li=new WeakMap,Zs=new WeakMap,Tl=new WeakMap,ys=new WeakMap,pr=new WeakMap,Wn=new WeakSet,qh=function(){return c(this,Ge)&&"added"||c(this,Ge)===null&&this.guessedText&&"review"||"missing"},Sp=async function(){var r,l,u;const t=c(this,Hn);if(!t)return;if(c(this,ys)){if(t.classList.toggle("done",!!c(this,Ge)),t.setAttribute("data-l10n-id",c(bi,pr)[c(this,Wn,qh)]),(r=c(this,Bc))==null||r.setAttribute("data-l10n-id",c(bi,pr)[`${c(this,Wn,qh)}-label`]),!c(this,Ge)){(l=c(this,ps))==null||l.remove();return}}else{if(!c(this,Ge)&&!c(this,gs)){t.classList.remove("done"),(u=c(this,ps))==null||u.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=c(this,ps);if(!e){A(this,ps,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${c(this,Li).id}`;const h=100,f=c(this,Li)._uiManager._signal;f.addEventListener("abort",()=>{clearTimeout(c(this,$i)),A(this,$i,null)},{once:!0}),t.addEventListener("mouseenter",()=>{A(this,$i,setTimeout(()=>{A(this,$i,null),c(this,ps).classList.add("show"),c(this,Li)._reportTelemetry({action:"alt_text_tooltip"})},h))},{signal:f}),t.addEventListener("mouseleave",()=>{var p;c(this,$i)&&(clearTimeout(c(this,$i)),A(this,$i,null)),(p=c(this,ps))==null||p.classList.remove("show")},{signal:f})}c(this,gs)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=c(this,Ge)),e.parentNode||t.append(e);const s=c(this,Li).getElementForAltText();s==null||s.setAttribute("aria-describedby",e.id)},w(bi,pr,null),J(bi,"_l10n",null);let Jp=bi;var Uc,xl,Td,xd,Cd,Rd,Md,Js,Cl,ta,Rl,ea,qr,RE,ME,DE;const nA=class nA{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:s=null,onPinchStart:r=null,onPinching:l=null,onPinchEnd:u=null,signal:h}){w(this,qr);w(this,Uc);w(this,xl,!1);w(this,Td,null);w(this,xd);w(this,Cd);w(this,Rd);w(this,Md);w(this,Js,null);w(this,Cl);w(this,ta,null);w(this,Rl);w(this,ea,null);A(this,Uc,t),A(this,Td,s),A(this,xd,e),A(this,Cd,r),A(this,Rd,l),A(this,Md,u),A(this,Rl,new AbortController),A(this,Cl,AbortSignal.any([h,c(this,Rl).signal])),t.addEventListener("touchstart",E(this,qr,RE).bind(this),{passive:!1,signal:c(this,Cl)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Cs.pixelRatio}destroy(){var t,e;(t=c(this,Rl))==null||t.abort(),A(this,Rl,null),(e=c(this,Js))==null||e.abort(),A(this,Js,null)}};Uc=new WeakMap,xl=new WeakMap,Td=new WeakMap,xd=new WeakMap,Cd=new WeakMap,Rd=new WeakMap,Md=new WeakMap,Js=new WeakMap,Cl=new WeakMap,ta=new WeakMap,Rl=new WeakMap,ea=new WeakMap,qr=new WeakSet,RE=function(t){var r,l,u;if((r=c(this,xd))!=null&&r.call(this))return;if(t.touches.length===1){if(c(this,Js))return;const h=A(this,Js,new AbortController),f=AbortSignal.any([c(this,Cl),h.signal]),p=c(this,Uc),m={capture:!0,signal:f,passive:!1},b=v=>{var S;v.pointerType==="touch"&&((S=c(this,Js))==null||S.abort(),A(this,Js,null))};p.addEventListener("pointerdown",v=>{v.pointerType==="touch"&&(Ce(v),b(v))},m),p.addEventListener("pointerup",b,m),p.addEventListener("pointercancel",b,m);return}if(!c(this,ea)){A(this,ea,new AbortController);const h=AbortSignal.any([c(this,Cl),c(this,ea).signal]),f=c(this,Uc),p={signal:h,capture:!1,passive:!1};f.addEventListener("touchmove",E(this,qr,ME).bind(this),p);const m=E(this,qr,DE).bind(this);f.addEventListener("touchend",m,p),f.addEventListener("touchcancel",m,p),p.capture=!0,f.addEventListener("pointerdown",Ce,p),f.addEventListener("pointermove",Ce,p),f.addEventListener("pointercancel",Ce,p),f.addEventListener("pointerup",Ce,p),(l=c(this,Cd))==null||l.call(this)}if(Ce(t),t.touches.length!==2||(u=c(this,Td))!=null&&u.call(this)){A(this,ta,null);return}let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]),A(this,ta,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:s.screenX,touch1Y:s.screenY})},ME=function(t){var k;if(!c(this,ta)||t.touches.length!==2)return;Ce(t);let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]);const{screenX:r,screenY:l}=e,{screenX:u,screenY:h}=s,f=c(this,ta),{touch0X:p,touch0Y:m,touch1X:b,touch1Y:v}=f,S=b-p,x=v-m,T=u-r,R=h-l,M=Math.hypot(T,R)||1,D=Math.hypot(S,x)||1;if(!c(this,xl)&&Math.abs(D-M)<=nA.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(f.touch0X=r,f.touch0Y=l,f.touch1X=u,f.touch1Y=h,!c(this,xl)){A(this,xl,!0);return}const N=[(r+u)/2,(l+h)/2];(k=c(this,Rd))==null||k.call(this,N,D,M)},DE=function(t){var e;t.touches.length>=2||(c(this,ea)&&(c(this,ea).abort(),A(this,ea,null),(e=c(this,Md))==null||e.call(this)),c(this,ta)&&(Ce(t),A(this,ta,null),A(this,xl,!1)))};let tm=nA;var Ml,Un,le,Ic,mr,Dd,Dl,We,Ol,ia,yr,Od,Nl,Ki,Nd,Ll,na,bs,Fc,Gc,xn,kl,Ld,hm,pt,z0,kd,P0,_p,OE,NE,B0,wp,H0,LE,kE,zE,U0,PE,I0,BE,HE,UE,F0,Vh;const Tt=class Tt{constructor(t){w(this,pt);w(this,Ml,null);w(this,Un,null);w(this,le,null);w(this,Ic,!1);w(this,mr,null);w(this,Dd,"");w(this,Dl,!1);w(this,We,null);w(this,Ol,null);w(this,ia,null);w(this,yr,null);w(this,Od,"");w(this,Nl,!1);w(this,Ki,null);w(this,Nd,!1);w(this,Ll,!1);w(this,na,!1);w(this,bs,null);w(this,Fc,0);w(this,Gc,0);w(this,xn,null);w(this,kl,null);J(this,"isSelected",!1);J(this,"_isCopy",!1);J(this,"_editToolbar",null);J(this,"_initialOptions",Object.create(null));J(this,"_initialData",null);J(this,"_isVisible",!0);J(this,"_uiManager",null);J(this,"_focusEventsAllowed",!0);w(this,Ld,!1);w(this,hm,Tt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:s,pageHeight:r,pageX:l,pageY:u}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,r],this.pageTranslation=[l,u];const[h,f]=this.parentDimensions;this.x=t.x/h,this.y=t.y/f,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Tt.prototype._resizeWithKeyboard,e=Co.TRANSLATE_SMALL,s=Co.TRANSLATE_BIG;return zt(this,"_resizerKeyboardManager",new Gf([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],Tt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return zt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new C2({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Tt._l10n??(Tt._l10n=t),Tt._l10nResizer||(Tt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Tt._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);Tt._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){ee("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,Ld)}set _isDraggable(t){var e;A(this,Ld,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,hm)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):E(this,pt,Vh).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(c(this,Nl)?A(this,Nl,!1):this.parent.setSelected(this))}focusout(t){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,s,r){const[l,u]=this.parentDimensions;[s,r]=this.screenToPageTranslation(s,r),this.x=(t+s)/l,this.y=(e+r)/u,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[s,r]=this.parentDimensions;this.setAt(t*s,e*r,this.width*s,this.height*r),this._onTranslated()}translate(t,e){E(this,pt,z0).call(this,this.parentDimensions,t,e)}translateInPage(t,e){c(this,Ki)||A(this,Ki,[this.x,this.y,this.width,this.height]),E(this,pt,z0).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){c(this,Ki)||A(this,Ki,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[r,l]}=this;if(this.x+=t/r,this.y+=e/l,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:b,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,b,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:u,y:h}=this;const[f,p]=this.getBaseTranslation();u+=f,h+=p;const{style:m}=s;m.left=`${(100*u).toFixed(2)}%`,m.top=`${(100*h).toFixed(2)}%`,this._onTranslating(u,h),s.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!c(this,Ki)&&(c(this,Ki)[0]!==this.x||c(this,Ki)[1]!==this.y)}get _hasBeenResized(){return!!c(this,Ki)&&(c(this,Ki)[2]!==this.width||c(this,Ki)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:s}=Tt,r=s/t,l=s/e;switch(this.rotation){case 90:return[-r,l];case 180:return[r,l];case 270:return[r,-l];default:return[-r,-l]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[s,r]}=this;let{x:l,y:u,width:h,height:f}=this;if(h*=s,f*=r,l*=s,u*=r,this._mustFixPosition)switch(t){case 0:l=wi(l,0,s-h),u=wi(u,0,r-f);break;case 90:l=wi(l,0,s-f),u=wi(u,h,r);break;case 180:l=wi(l,h,s),u=wi(u,f,r);break;case 270:l=wi(l,f,s),u=wi(u,0,r-h);break}this.x=l/=s,this.y=u/=r;const[p,m]=this.getBaseTranslation();l+=p,u+=m,e.left=`${(100*l).toFixed(2)}%`,e.top=`${(100*u).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var s;return E(s=Tt,kd,P0).call(s,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var s;return E(s=Tt,kd,P0).call(s,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,s]}=this;return[e*t,s*t]}setDims(t,e){const[s,r]=this.parentDimensions,{style:l}=this.div;l.width=`${(100*t/s).toFixed(2)}%`,c(this,Dl)||(l.height=`${(100*e/r).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:s}=t,r=s.endsWith("%"),l=!c(this,Dl)&&e.endsWith("%");if(r&&l)return;const[u,h]=this.parentDimensions;r||(t.width=`${(100*parseFloat(s)/u).toFixed(2)}%`),!c(this,Dl)&&!l&&(t.height=`${(100*parseFloat(e)/h).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=c(this,le))==null||t.finish()}async addEditToolbar(){return this._editToolbar||c(this,Ll)?this._editToolbar:(this._editToolbar=new x0(this),this.div.append(this._editToolbar.render()),c(this,le)&&await this._editToolbar.addAltText(c(this,le)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=c(this,le))==null||t.destroy())}addContainer(t){var s;const e=(s=this._editToolbar)==null?void 0:s.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){c(this,le)||(Jp.initialize(Tt._l10n),A(this,le,new Jp(this)),c(this,Ml)&&(c(this,le).data=c(this,Ml),A(this,Ml,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=c(this,le))==null?void 0:t.data}set altTextData(t){c(this,le)&&(c(this,le).data=t)}get guessedAltText(){var t;return(t=c(this,le))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=c(this,le))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=c(this,le))==null?void 0:e.serialize(t)}hasAltText(){return!!c(this,le)&&!c(this,le).isEmpty()}hasAltTextData(){var t;return((t=c(this,le))==null?void 0:t.hasData())??!1}render(){var u;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=c(this,Ic)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),E(this,pt,I0).call(this);const[e,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/s).toFixed(2)}%`);const[r,l]=this.getInitialTranslation();return this.translate(r,l),mE(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(c(this,kl)||A(this,kl,new tm({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:E(this,pt,LE).bind(this),onPinching:E(this,pt,kE).bind(this),onPinchEnd:E(this,pt,zE).bind(this),signal:this._uiManager._signal}))),(u=this._uiManager._editorUndoBar)==null||u.hide(),t}pointerdown(t){const{isMac:e}=ai.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(A(this,Nl,!0),this._isDraggable){E(this,pt,PE).call(this,t);return}E(this,pt,U0).call(this,t)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){c(this,bs)&&clearTimeout(c(this,bs)),A(this,bs,setTimeout(()=>{var t;A(this,bs,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,s){t.changeParent(this),this.x=e,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,s=this.rotation){const r=this.parentScale,[l,u]=this.pageDimensions,[h,f]=this.pageTranslation,p=t/r,m=e/r,b=this.x*l,v=this.y*u,S=this.width*l,x=this.height*u;switch(s){case 0:return[b+p+h,u-v-m-x+f,b+p+S+h,u-v-m+f];case 90:return[b+m+h,u-v+p+f,b+m+x+h,u-v+p+S+f];case 180:return[b-p-S+h,u-v+m+f,b-p+h,u-v+m+x+f];case 270:return[b-m-x+h,u-v-p-S+f,b-m+h,u-v-p+f];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[s,r,l,u]=t,h=l-s,f=u-r;switch(this.rotation){case 0:return[s,e-u,h,f];case 90:return[s,e-r,f,h];case 180:return[l,e-r,h,f];case 270:return[l,e-u,f,h];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),A(this,Ll,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),A(this,Ll,!1),!0):!1}isInEditMode(){return c(this,Ll)}shouldGetKeyboardEvents(){return c(this,na)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:s,right:r}=this.getClientDimensions(),{innerHeight:l,innerWidth:u}=window;return e<u&&r>0&&t<l&&s>0}rebuild(){E(this,pt,I0).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){ee("An editor must be serializable")}static async deserialize(t,e,s){const r=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:s});r.rotation=t.rotation,A(r,Ml,t.accessibilityData),r._isCopy=t.isCopy||!1;const[l,u]=r.pageDimensions,[h,f,p,m]=r.getRectInCurrentCoords(t.rect,u);return r.x=h/l,r.y=f/u,r.width=p/l,r.height=m/u,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=c(this,yr))==null||t.abort(),A(this,yr,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),c(this,bs)&&(clearTimeout(c(this,bs)),A(this,bs,null)),E(this,pt,Vh).call(this),this.removeEditToolbar(),c(this,xn)){for(const s of c(this,xn).values())clearTimeout(s);A(this,xn,null)}this.parent=null,(e=c(this,kl))==null||e.destroy(),A(this,kl,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(E(this,pt,OE).call(this),c(this,We).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),A(this,ia,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=c(this,We).children;if(!c(this,Un)){A(this,Un,Array.from(e));const u=E(this,pt,BE).bind(this),h=E(this,pt,HE).bind(this),f=this._uiManager._signal;for(const p of c(this,Un)){const m=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",u,{signal:f}),p.addEventListener("blur",h,{signal:f}),p.addEventListener("focus",E(this,pt,UE).bind(this,m),{signal:f}),p.setAttribute("data-l10n-id",Tt._l10nResizer[m])}}const s=c(this,Un)[0];let r=0;for(const u of e){if(u===s)break;r++}const l=(360-this.rotation+this.parentRotation)%360/90*(c(this,Un).length/4);if(l!==r){if(l<r)for(let h=0;h<r-l;h++)c(this,We).append(c(this,We).firstChild);else if(l>r)for(let h=0;h<l-r;h++)c(this,We).firstChild.before(c(this,We).lastChild);let u=0;for(const h of e){const p=c(this,Un)[u++].getAttribute("data-resizer-name");h.setAttribute("data-l10n-id",Tt._l10nResizer[p])}}E(this,pt,F0).call(this,0),A(this,na,!0),c(this,We).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){c(this,na)&&E(this,pt,H0).call(this,c(this,Od),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){E(this,pt,Vh).call(this),this.div.focus()}select(){var t,e,s;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,l;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((l=this._editToolbar)==null||l.show())});return}(e=this._editToolbar)==null||e.show(),(s=c(this,le))==null||s.toggleAltTextBadge(!1)}}unselect(){var t,e,s,r,l;this.isSelected&&(this.isSelected=!1,(t=c(this,We))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(l=c(this,le))==null||l.toggleAltTextBadge(!0))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return c(this,Nd)}set isEditing(t){A(this,Nd,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){A(this,Dl,!0);const s=t/e,{style:r}=this.div;r.aspectRatio=s,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){c(this,xn)||A(this,xn,new Map);const{action:s}=t;let r=c(this,xn).get(s);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),c(this,xn).delete(s),c(this,xn).size===0&&A(this,xn,null)},Tt._telemetryTimeout),c(this,xn).set(s,r);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),A(this,Ic,!1)}disable(){this.div&&(this.div.tabIndex=-1),A(this,Ic,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const s=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),s.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Ml=new WeakMap,Un=new WeakMap,le=new WeakMap,Ic=new WeakMap,mr=new WeakMap,Dd=new WeakMap,Dl=new WeakMap,We=new WeakMap,Ol=new WeakMap,ia=new WeakMap,yr=new WeakMap,Od=new WeakMap,Nl=new WeakMap,Ki=new WeakMap,Nd=new WeakMap,Ll=new WeakMap,na=new WeakMap,bs=new WeakMap,Fc=new WeakMap,Gc=new WeakMap,xn=new WeakMap,kl=new WeakMap,Ld=new WeakMap,hm=new WeakMap,pt=new WeakSet,z0=function([t,e],s,r){[s,r]=this.screenToPageTranslation(s,r),this.x+=s/t,this.y+=r/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},kd=new WeakSet,P0=function(t,e,s){switch(s){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},_p=function(t){switch(t){case 90:{const[e,s]=this.pageDimensions;return[0,-e/s,s/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,s]=this.pageDimensions;return[0,e/s,-s/e,0]}default:return[1,0,0,1]}},OE=function(){if(c(this,We))return;A(this,We,document.createElement("div")),c(this,We).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const s of t){const r=document.createElement("div");c(this,We).append(r),r.classList.add("resizer",s),r.setAttribute("data-resizer-name",s),r.addEventListener("pointerdown",E(this,pt,NE).bind(this,s),{signal:e}),r.addEventListener("contextmenu",Zn,{signal:e}),r.tabIndex=-1}this.div.prepend(c(this,We))},NE=function(t,e){var m;e.preventDefault();const{isMac:s}=ai.platform;if(e.button!==0||e.ctrlKey&&s)return;(m=c(this,le))==null||m.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,A(this,Ol,[e.screenX,e.screenY]);const l=new AbortController,u=this._uiManager.combinedSignal(l);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",E(this,pt,H0).bind(this,t),{passive:!0,capture:!0,signal:u}),window.addEventListener("touchmove",Ce,{passive:!1,signal:u}),window.addEventListener("contextmenu",Zn,{signal:u}),A(this,ia,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const h=this.parent.div.style.cursor,f=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const p=()=>{var b;l.abort(),this.parent.togglePointerEvents(!0),(b=c(this,le))==null||b.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=h,this.div.style.cursor=f,E(this,pt,wp).call(this)};window.addEventListener("pointerup",p,{signal:u}),window.addEventListener("blur",p,{signal:u})},B0=function(t,e,s,r){this.width=s,this.height=r,this.x=t,this.y=e;const[l,u]=this.parentDimensions;this.setDims(l*s,u*r),this.fixAndSetPosition(),this._onResized()},wp=function(){if(!c(this,ia))return;const{savedX:t,savedY:e,savedWidth:s,savedHeight:r}=c(this,ia);A(this,ia,null);const l=this.x,u=this.y,h=this.width,f=this.height;l===t&&u===e&&h===s&&f===r||this.addCommands({cmd:E(this,pt,B0).bind(this,l,u,h,f),undo:E(this,pt,B0).bind(this,t,e,s,r),mustExec:!0})},H0=function(t,e){const[s,r]=this.parentDimensions,l=this.x,u=this.y,h=this.width,f=this.height,p=Tt.MIN_SIZE/s,m=Tt.MIN_SIZE/r,b=E(this,pt,_p).call(this,this.rotation),v=(H,V)=>[b[0]*H+b[2]*V,b[1]*H+b[3]*V],S=E(this,pt,_p).call(this,360-this.rotation),x=(H,V)=>[S[0]*H+S[2]*V,S[1]*H+S[3]*V];let T,R,M=!1,D=!1;switch(t){case"topLeft":M=!0,T=(H,V)=>[0,0],R=(H,V)=>[H,V];break;case"topMiddle":T=(H,V)=>[H/2,0],R=(H,V)=>[H/2,V];break;case"topRight":M=!0,T=(H,V)=>[H,0],R=(H,V)=>[0,V];break;case"middleRight":D=!0,T=(H,V)=>[H,V/2],R=(H,V)=>[0,V/2];break;case"bottomRight":M=!0,T=(H,V)=>[H,V],R=(H,V)=>[0,0];break;case"bottomMiddle":T=(H,V)=>[H/2,V],R=(H,V)=>[H/2,0];break;case"bottomLeft":M=!0,T=(H,V)=>[0,V],R=(H,V)=>[H,0];break;case"middleLeft":D=!0,T=(H,V)=>[0,V/2],R=(H,V)=>[H,V/2];break}const N=T(h,f),k=R(h,f);let O=v(...k);const B=Tt._round(l+O[0]),G=Tt._round(u+O[1]);let Q=1,W=1,nt,et;if(e.fromKeyboard)({deltaX:nt,deltaY:et}=e);else{const{screenX:H,screenY:V}=e,[ot,Dt]=c(this,Ol);[nt,et]=this.screenToPageTranslation(H-ot,V-Dt),c(this,Ol)[0]=H,c(this,Ol)[1]=V}if([nt,et]=x(nt/s,et/r),M){const H=Math.hypot(h,f);Q=W=Math.max(Math.min(Math.hypot(k[0]-N[0]-nt,k[1]-N[1]-et)/H,1/h,1/f),p/h,m/f)}else D?Q=wi(Math.abs(k[0]-N[0]-nt),p,1)/h:W=wi(Math.abs(k[1]-N[1]-et),m,1)/f;const yt=Tt._round(h*Q),Lt=Tt._round(f*W);O=v(...R(yt,Lt));const vt=B-O[0],Ft=G-O[1];c(this,Ki)||A(this,Ki,[this.x,this.y,this.width,this.height]),this.width=yt,this.height=Lt,this.x=vt,this.y=Ft,this.setDims(s*yt,r*Lt),this.fixAndSetPosition(),this._onResizing()},LE=function(){var t;A(this,ia,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=c(this,le))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},kE=function(t,e,s){let l=.7*(s/e)+1-.7;if(l===1)return;const u=E(this,pt,_p).call(this,this.rotation),h=(B,G)=>[u[0]*B+u[2]*G,u[1]*B+u[3]*G],[f,p]=this.parentDimensions,m=this.x,b=this.y,v=this.width,S=this.height,x=Tt.MIN_SIZE/f,T=Tt.MIN_SIZE/p;l=Math.max(Math.min(l,1/v,1/S),x/v,T/S);const R=Tt._round(v*l),M=Tt._round(S*l);if(R===v&&M===S)return;c(this,Ki)||A(this,Ki,[m,b,v,S]);const D=h(v/2,S/2),N=Tt._round(m+D[0]),k=Tt._round(b+D[1]),O=h(R/2,M/2);this.x=N-O[0],this.y=k-O[1],this.width=R,this.height=M,this.setDims(f*R,p*M),this.fixAndSetPosition(),this._onResizing()},zE=function(){var t;(t=c(this,le))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),E(this,pt,wp).call(this)},U0=function(t){const{isMac:e}=ai.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},PE=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let s=!1;const r=new AbortController,l=this._uiManager.combinedSignal(r),u={capture:!0,passive:!1,signal:l},h=p=>{r.abort(),A(this,mr,null),A(this,Nl,!1),this._uiManager.endDragSession()||E(this,pt,U0).call(this,p),s&&this._onStopDragging()};e&&(A(this,Fc,t.clientX),A(this,Gc,t.clientY),A(this,mr,t.pointerId),A(this,Dd,t.pointerType),window.addEventListener("pointermove",p=>{s||(s=!0,this._onStartDragging());const{clientX:m,clientY:b,pointerId:v}=p;if(v!==c(this,mr)){Ce(p);return}const[S,x]=this.screenToPageTranslation(m-c(this,Fc),b-c(this,Gc));A(this,Fc,m),A(this,Gc,b),this._uiManager.dragSelectedEditors(S,x)},u),window.addEventListener("touchmove",Ce,u),window.addEventListener("pointerdown",p=>{p.pointerType===c(this,Dd)&&(c(this,kl)||p.isPrimary)&&h(p),Ce(p)},u));const f=p=>{if(!c(this,mr)||c(this,mr)===p.pointerId){h(p);return}Ce(p)};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})},I0=function(){if(c(this,yr)||!this.div)return;A(this,yr,new AbortController);const t=this._uiManager.combinedSignal(c(this,yr));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},BE=function(t){Tt._resizerKeyboardManager.exec(this,t)},HE=function(t){var e;c(this,na)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==c(this,We)&&E(this,pt,Vh).call(this)},UE=function(t){A(this,Od,c(this,na)?t:"")},F0=function(t){if(c(this,Un))for(const e of c(this,Un))e.tabIndex=t},Vh=function(){A(this,na,!1),E(this,pt,F0).call(this,-1),E(this,pt,wp).call(this)},w(Tt,kd),J(Tt,"_l10n",null),J(Tt,"_l10nResizer",null),J(Tt,"_borderLineWidth",-1),J(Tt,"_colorManager",new R0),J(Tt,"_zIndex",1),J(Tt,"_telemetryTimeout",1e3);let re=Tt;class C2 extends re{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Tw=3285377520,_n=4294901760,os=65535;class IE{constructor(t){this.h1=t?t&4294967295:Tw,this.h2=t?t&4294967295:Tw}update(t){let e,s;if(typeof t=="string"){e=new Uint8Array(t.length*2),s=0;for(let T=0,R=t.length;T<R;T++){const M=t.charCodeAt(T);M<=255?e[s++]=M:(e[s++]=M>>>8,e[s++]=M&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),s=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=s>>2,l=s-r*4,u=new Uint32Array(e.buffer,0,r);let h=0,f=0,p=this.h1,m=this.h2;const b=3432918353,v=461845907,S=b&os,x=v&os;for(let T=0;T<r;T++)T&1?(h=u[T],h=h*b&_n|h*S&os,h=h<<15|h>>>17,h=h*v&_n|h*x&os,p^=h,p=p<<13|p>>>19,p=p*5+3864292196):(f=u[T],f=f*b&_n|f*S&os,f=f<<15|f>>>17,f=f*v&_n|f*x&os,m^=f,m=m<<13|m>>>19,m=m*5+3864292196);switch(h=0,l){case 3:h^=e[r*4+2]<<16;case 2:h^=e[r*4+1]<<8;case 1:h^=e[r*4],h=h*b&_n|h*S&os,h=h<<15|h>>>17,h=h*v&_n|h*x&os,r&1?p^=h:m^=h}this.h1=p,this.h2=m}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&_n|t*36045&os,e=e*4283543511&_n|((e<<16|t>>>16)*2950163797&_n)>>>16,t^=e>>>1,t=t*444984403&_n|t*60499&os,e=e*3301882366&_n|((e<<16|t>>>16)*3120437893&_n)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const G0=Object.freeze({map:null,hash:"",transfer:void 0});var zl,Pl,Ze,dm,FE;class Qv{constructor(){w(this,dm);w(this,zl,!1);w(this,Pl,null);w(this,Ze,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const s=c(this,Ze).get(t);return s===void 0?e:Object.assign(e,s)}getRawValue(t){return c(this,Ze).get(t)}remove(t){if(c(this,Ze).delete(t),c(this,Ze).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of c(this,Ze).values())if(e instanceof re)return;this.onAnnotationEditor(null)}}setValue(t,e){const s=c(this,Ze).get(t);let r=!1;if(s!==void 0)for(const[l,u]of Object.entries(e))s[l]!==u&&(r=!0,s[l]=u);else r=!0,c(this,Ze).set(t,e);r&&E(this,dm,FE).call(this),e instanceof re&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return c(this,Ze).has(t)}get size(){return c(this,Ze).size}resetModified(){c(this,zl)&&(A(this,zl,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new GE(this)}get serializable(){if(c(this,Ze).size===0)return G0;const t=new Map,e=new IE,s=[],r=Object.create(null);let l=!1;for(const[u,h]of c(this,Ze)){const f=h instanceof re?h.serialize(!1,r):h;f&&(t.set(u,f),e.update(`${u}:${JSON.stringify(f)}`),l||(l=!!f.bitmap))}if(l)for(const u of t.values())u.bitmap&&s.push(u.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:s}:G0}get editorStats(){let t=null;const e=new Map;for(const s of c(this,Ze).values()){if(!(s instanceof re))continue;const r=s.telemetryFinalData;if(!r)continue;const{type:l}=r;e.has(l)||e.set(l,Object.getPrototypeOf(s).constructor),t||(t=Object.create(null));const u=t[l]||(t[l]=new Map);for(const[h,f]of Object.entries(r)){if(h==="type")continue;let p=u.get(h);p||(p=new Map,u.set(h,p));const m=p.get(f)??0;p.set(f,m+1)}}for(const[s,r]of e)t[s]=r.computeTelemetryFinalData(t[s]);return t}resetModifiedIds(){A(this,Pl,null)}get modifiedIds(){if(c(this,Pl))return c(this,Pl);const t=[];for(const e of c(this,Ze).values())!(e instanceof re)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return A(this,Pl,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return c(this,Ze).entries()}}zl=new WeakMap,Pl=new WeakMap,Ze=new WeakMap,dm=new WeakSet,FE=function(){c(this,zl)||(A(this,zl,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var zd;class GE extends Qv{constructor(e){super();w(this,zd);const{map:s,hash:r,transfer:l}=e.serializable,u=structuredClone(s,l?{transfer:l}:null);A(this,zd,{map:u,hash:r,transfer:l})}get print(){ee("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,zd)}get modifiedIds(){return zt(this,"modifiedIds",{ids:new Set,hash:""})}}zd=new WeakMap;var jc;class R2{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){w(this,jc,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),c(this,jc).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:s}){if(!(!t||c(this,jc).has(t.loadedName))){if(Re(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:l,style:u}=t,h=new FontFace(r,l,u);this.addNativeFontFace(h);try{await h.load(),c(this,jc).add(r),s==null||s(t)}catch{St(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(h)}return}ee("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(r){throw St(`Failed to load font '${s.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const r=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return zt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return zt(this,"isSyncFontLoadingSupported",_i||ai.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Re(!r.done,"completeRequest() cannot be called twice."),r.done=!0;s.length>0&&s[0].done;){const l=s.shift();setTimeout(l.callback,0)}}const{loadingRequests:s}=this,r={done:!1,complete:e,callback:t};return s.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return zt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function s(k,O){return k.charCodeAt(O)<<24|k.charCodeAt(O+1)<<16|k.charCodeAt(O+2)<<8|k.charCodeAt(O+3)&255}function r(k,O,B,G){const Q=k.substring(0,O),W=k.substring(O+B);return Q+G+W}let l,u;const h=this._document.createElement("canvas");h.width=1,h.height=1;const f=h.getContext("2d");let p=0;function m(k,O){if(++p>30){St("Load test font never loaded."),O();return}if(f.font="30px "+k,f.fillText(".",0,20),f.getImageData(0,0,1,1).data[3]>0){O();return}setTimeout(m.bind(null,k,O))}const b=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=r(v,976,b.length,b);const x=16,T=1482184792;let R=s(v,x);for(l=0,u=b.length-3;l<u;l+=4)R=R-T+s(b,l)|0;l<b.length&&(R=R-T+s(b+"XXX",l)|0),v=r(v,x,4,d2(R));const M=`url(data:font/opentype;base64,${btoa(v)});`,D=`@font-face {font-family:"${b}";src:${M}}`;this.insertRule(D);const N=this._document.createElement("div");N.style.visibility="hidden",N.style.width=N.style.height="10px",N.style.position="absolute",N.style.top=N.style.left="0px";for(const k of[t.loadedName,b]){const O=this._document.createElement("span");O.textContent="Hi",O.style.fontFamily=k,N.append(O)}this._document.body.append(N),m(b,()=>{N.remove(),e.complete()})}}jc=new WeakMap;class M2{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const s in t)this[s]=t[s];this._inspectFont=e}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${oE(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${t}}`}return(s=this._inspectFont)==null||s.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const s=this.loadedName+"_path_"+e;let r;try{r=t.get(s)}catch(u){St(`getPathGenerator - ignoring character: "${u}".`)}const l=new Path2D(r||"");return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[e]=l}}function D2(d){if(d instanceof URL)return d.href;if(typeof d=="string"){if(_i)return d;const t=URL.parse(d,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function O2(d){if(_i&&typeof Buffer<"u"&&d instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(d instanceof Uint8Array&&d.byteLength===d.buffer.byteLength)return d;if(typeof d=="string")return Uf(d);if(d instanceof ArrayBuffer||ArrayBuffer.isView(d)||typeof d=="object"&&!isNaN(d==null?void 0:d.length))return new Uint8Array(d);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function cp(d){if(typeof d!="string")return null;if(d.endsWith("/"))return d;throw new Error(`Invalid factory url: "${d}" must include trailing slash.`)}const j0=d=>typeof d=="object"&&Number.isInteger(d==null?void 0:d.num)&&d.num>=0&&Number.isInteger(d==null?void 0:d.gen)&&d.gen>=0,N2=d=>typeof d=="object"&&typeof(d==null?void 0:d.name)=="string",L2=y2.bind(null,j0,N2);var sa,fm;class k2{constructor(){w(this,sa,new Map);w(this,fm,Promise.resolve())}postMessage(t,e){const s={data:structuredClone(t,e?{transfer:e}:null)};c(this,fm).then(()=>{for(const[r]of c(this,sa))r.call(this,s)})}addEventListener(t,e,s=null){let r=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:l}=s;if(l.aborted){St("LoopbackPort - cannot use an `aborted` signal.");return}const u=()=>this.removeEventListener(t,e);r=()=>l.removeEventListener("abort",u),l.addEventListener("abort",u)}c(this,sa).set(e,r)}removeEventListener(t,e){const s=c(this,sa).get(e);s==null||s(),c(this,sa).delete(e)}terminate(){for(const[,t]of c(this,sa))t==null||t();c(this,sa).clear()}}sa=new WeakMap,fm=new WeakMap;const up={DATA:1,ERROR:2},Te={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function xw(){}function Oi(d){if(d instanceof Fr||d instanceof w0||d instanceof _w||d instanceof Zp||d instanceof o0)return d;switch(d instanceof Error||typeof d=="object"&&d!==null||ee('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),d.name){case"AbortException":return new Fr(d.message);case"InvalidPDFException":return new w0(d.message);case"PasswordException":return new _w(d.message,d.code);case"ResponseException":return new Zp(d.message,d.status,d.missing);case"UnknownErrorException":return new o0(d.message,d.details)}return new o0(d.message,d.toString())}var qc,Nn,jE,qE,VE,Ep;class Xh{constructor(t,e,s){w(this,Nn);w(this,qc,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",E(this,Nn,jE).bind(this),{signal:c(this,qc).signal})}on(t,e){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=e}send(t,e,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},s)}sendWithPromise(t,e,s){const r=this.callbackId++,l=Promise.withResolvers();this.callbackCapabilities[r]=l;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},s)}catch(u){l.reject(u)}return l.promise}sendWithStream(t,e,s,r){const l=this.streamId++,u=this.sourceName,h=this.targetName,f=this.comObj;return new ReadableStream({start:p=>{const m=Promise.withResolvers();return this.streamControllers[l]={controller:p,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},f.postMessage({sourceName:u,targetName:h,action:t,streamId:l,data:e,desiredSize:p.desiredSize},r),m.promise},pull:p=>{const m=Promise.withResolvers();return this.streamControllers[l].pullCall=m,f.postMessage({sourceName:u,targetName:h,stream:Te.PULL,streamId:l,desiredSize:p.desiredSize}),m.promise},cancel:p=>{Re(p instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[l].cancelCall=m,this.streamControllers[l].isClosed=!0,f.postMessage({sourceName:u,targetName:h,stream:Te.CANCEL,streamId:l,reason:Oi(p)}),m.promise}},s)}destroy(){var t;(t=c(this,qc))==null||t.abort(),A(this,qc,null)}}qc=new WeakMap,Nn=new WeakSet,jE=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){E(this,Nn,VE).call(this,t);return}if(t.callback){const s=t.callbackId,r=this.callbackCapabilities[s];if(!r)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===up.DATA)r.resolve(t.data);else if(t.callback===up.ERROR)r.reject(Oi(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,r=t.sourceName,l=this.comObj;Promise.try(e,t.data).then(function(u){l.postMessage({sourceName:s,targetName:r,callback:up.DATA,callbackId:t.callbackId,data:u})},function(u){l.postMessage({sourceName:s,targetName:r,callback:up.ERROR,callbackId:t.callbackId,reason:Oi(u)})});return}if(t.streamId){E(this,Nn,qE).call(this,t);return}e(t.data)},qE=function(t){const e=t.streamId,s=this.sourceName,r=t.sourceName,l=this.comObj,u=this,h=this.actionHandler[t.action],f={enqueue(p,m=1,b){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=m,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),l.postMessage({sourceName:s,targetName:r,stream:Te.ENQUEUE,streamId:e,chunk:p},b)},close(){this.isCancelled||(this.isCancelled=!0,l.postMessage({sourceName:s,targetName:r,stream:Te.CLOSE,streamId:e}),delete u.streamSinks[e])},error(p){Re(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,l.postMessage({sourceName:s,targetName:r,stream:Te.ERROR,streamId:e,reason:Oi(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};f.sinkCapability.resolve(),f.ready=f.sinkCapability.promise,this.streamSinks[e]=f,Promise.try(h,t.data,f).then(function(){l.postMessage({sourceName:s,targetName:r,stream:Te.START_COMPLETE,streamId:e,success:!0})},function(p){l.postMessage({sourceName:s,targetName:r,stream:Te.START_COMPLETE,streamId:e,reason:Oi(p)})})},VE=function(t){const e=t.streamId,s=this.sourceName,r=t.sourceName,l=this.comObj,u=this.streamControllers[e],h=this.streamSinks[e];switch(t.stream){case Te.START_COMPLETE:t.success?u.startCall.resolve():u.startCall.reject(Oi(t.reason));break;case Te.PULL_COMPLETE:t.success?u.pullCall.resolve():u.pullCall.reject(Oi(t.reason));break;case Te.PULL:if(!h){l.postMessage({sourceName:s,targetName:r,stream:Te.PULL_COMPLETE,streamId:e,success:!0});break}h.desiredSize<=0&&t.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=t.desiredSize,Promise.try(h.onPull||xw).then(function(){l.postMessage({sourceName:s,targetName:r,stream:Te.PULL_COMPLETE,streamId:e,success:!0})},function(p){l.postMessage({sourceName:s,targetName:r,stream:Te.PULL_COMPLETE,streamId:e,reason:Oi(p)})});break;case Te.ENQUEUE:if(Re(u,"enqueue should have stream controller"),u.isClosed)break;u.controller.enqueue(t.chunk);break;case Te.CLOSE:if(Re(u,"close should have stream controller"),u.isClosed)break;u.isClosed=!0,u.controller.close(),E(this,Nn,Ep).call(this,u,e);break;case Te.ERROR:Re(u,"error should have stream controller"),u.controller.error(Oi(t.reason)),E(this,Nn,Ep).call(this,u,e);break;case Te.CANCEL_COMPLETE:t.success?u.cancelCall.resolve():u.cancelCall.reject(Oi(t.reason)),E(this,Nn,Ep).call(this,u,e);break;case Te.CANCEL:if(!h)break;const f=Oi(t.reason);Promise.try(h.onCancel||xw,f).then(function(){l.postMessage({sourceName:s,targetName:r,stream:Te.CANCEL_COMPLETE,streamId:e,success:!0})},function(p){l.postMessage({sourceName:s,targetName:r,stream:Te.CANCEL_COMPLETE,streamId:e,reason:Oi(p)})}),h.sinkCapability.reject(f),h.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Ep=async function(t,e){var s,r,l;await Promise.allSettled([(s=t.startCall)==null?void 0:s.promise,(r=t.pullCall)==null?void 0:r.promise,(l=t.cancelCall)==null?void 0:l.promise]),delete this.streamControllers[e]};var Pd;class XE{constructor({enableHWA:t=!1}){w(this,Pd,!1);A(this,Pd,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,e);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!c(this,Pd)})}}reset(t,e,s){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){ee("Abstract method `_createCanvas` called.")}}Pd=new WeakMap;class z2 extends XE{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const s=this._document.createElement("canvas");return s.width=t,s.height=e,s}}class YE{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){ee("Abstract method `_fetch` called.")}}class Cw extends YE{async _fetch(t){const e=await If(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Uf(e)}}class $E{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,s,r,l){return"none"}destroy(t=!1){}}var Bl,Vc,aa,ra,di,Hl,Ul,st,ui,Yh,bc,Tp,vc,KE,q0,Ac,$h,Kh,V0,Qh;class P2 extends $E{constructor({docId:e,ownerDocument:s=globalThis.document}){super();w(this,st);w(this,Bl);w(this,Vc);w(this,aa);w(this,ra);w(this,di);w(this,Hl);w(this,Ul,0);A(this,ra,e),A(this,di,s)}addFilter(e){if(!e)return"none";let s=c(this,st,ui).get(e);if(s)return s;const[r,l,u]=E(this,st,Tp).call(this,e),h=e.length===1?r:`${r}${l}${u}`;if(s=c(this,st,ui).get(h),s)return c(this,st,ui).set(e,s),s;const f=`g_${c(this,ra)}_transfer_map_${mi(this,Ul)._++}`,p=E(this,st,vc).call(this,f);c(this,st,ui).set(e,p),c(this,st,ui).set(h,p);const m=E(this,st,Ac).call(this,f);return E(this,st,Kh).call(this,r,l,u,m),p}addHCMFilter(e,s){var x;const r=`${e}-${s}`,l="base";let u=c(this,st,Yh).get(l);if((u==null?void 0:u.key)===r||(u?((x=u.filter)==null||x.remove(),u.key=r,u.url="none",u.filter=null):(u={key:r,url:"none",filter:null},c(this,st,Yh).set(l,u)),!e||!s))return u.url;const h=E(this,st,Qh).call(this,e);e=dt.makeHexColor(...h);const f=E(this,st,Qh).call(this,s);if(s=dt.makeHexColor(...f),c(this,st,bc).style.color="",e==="#000000"&&s==="#ffffff"||e===s)return u.url;const p=new Array(256);for(let T=0;T<=255;T++){const R=T/255;p[T]=R<=.03928?R/12.92:((R+.055)/1.055)**2.4}const m=p.join(","),b=`g_${c(this,ra)}_hcm_filter`,v=u.filter=E(this,st,Ac).call(this,b);E(this,st,Kh).call(this,m,m,m,v),E(this,st,q0).call(this,v);const S=(T,R)=>{const M=h[T]/255,D=f[T]/255,N=new Array(R+1);for(let k=0;k<=R;k++)N[k]=M+k/R*(D-M);return N.join(",")};return E(this,st,Kh).call(this,S(0,5),S(1,5),S(2,5),v),u.url=E(this,st,vc).call(this,b),u.url}addAlphaFilter(e){let s=c(this,st,ui).get(e);if(s)return s;const[r]=E(this,st,Tp).call(this,[e]),l=`alpha_${r}`;if(s=c(this,st,ui).get(l),s)return c(this,st,ui).set(e,s),s;const u=`g_${c(this,ra)}_alpha_map_${mi(this,Ul)._++}`,h=E(this,st,vc).call(this,u);c(this,st,ui).set(e,h),c(this,st,ui).set(l,h);const f=E(this,st,Ac).call(this,u);return E(this,st,V0).call(this,r,f),h}addLuminosityFilter(e){let s=c(this,st,ui).get(e||"luminosity");if(s)return s;let r,l;if(e?([r]=E(this,st,Tp).call(this,[e]),l=`luminosity_${r}`):l="luminosity",s=c(this,st,ui).get(l),s)return c(this,st,ui).set(e,s),s;const u=`g_${c(this,ra)}_luminosity_map_${mi(this,Ul)._++}`,h=E(this,st,vc).call(this,u);c(this,st,ui).set(e,h),c(this,st,ui).set(l,h);const f=E(this,st,Ac).call(this,u);return E(this,st,KE).call(this,f),e&&E(this,st,V0).call(this,r,f),h}addHighlightHCMFilter(e,s,r,l,u){var D;const h=`${s}-${r}-${l}-${u}`;let f=c(this,st,Yh).get(e);if((f==null?void 0:f.key)===h||(f?((D=f.filter)==null||D.remove(),f.key=h,f.url="none",f.filter=null):(f={key:h,url:"none",filter:null},c(this,st,Yh).set(e,f)),!s||!r))return f.url;const[p,m]=[s,r].map(E(this,st,Qh).bind(this));let b=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),v=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[S,x]=[l,u].map(E(this,st,Qh).bind(this));v<b&&([b,v,S,x]=[v,b,x,S]),c(this,st,bc).style.color="";const T=(N,k,O)=>{const B=new Array(256),G=(v-b)/O,Q=N/255,W=(k-N)/(255*O);let nt=0;for(let et=0;et<=O;et++){const yt=Math.round(b+et*G),Lt=Q+et*W;for(let vt=nt;vt<=yt;vt++)B[vt]=Lt;nt=yt+1}for(let et=nt;et<256;et++)B[et]=B[nt-1];return B.join(",")},R=`g_${c(this,ra)}_hcm_${e}_filter`,M=f.filter=E(this,st,Ac).call(this,R);return E(this,st,q0).call(this,M),E(this,st,Kh).call(this,T(S[0],x[0],5),T(S[1],x[1],5),T(S[2],x[2],5),M),f.url=E(this,st,vc).call(this,R),f.url}destroy(e=!1){var s,r,l,u;e&&((s=c(this,Hl))!=null&&s.size)||((r=c(this,aa))==null||r.parentNode.parentNode.remove(),A(this,aa,null),(l=c(this,Vc))==null||l.clear(),A(this,Vc,null),(u=c(this,Hl))==null||u.clear(),A(this,Hl,null),A(this,Ul,0))}}Bl=new WeakMap,Vc=new WeakMap,aa=new WeakMap,ra=new WeakMap,di=new WeakMap,Hl=new WeakMap,Ul=new WeakMap,st=new WeakSet,ui=function(){return c(this,Vc)||A(this,Vc,new Map)},Yh=function(){return c(this,Hl)||A(this,Hl,new Map)},bc=function(){if(!c(this,aa)){const e=c(this,di).createElement("div"),{style:s}=e;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const r=c(this,di).createElementNS(qs,"svg");r.setAttribute("width",0),r.setAttribute("height",0),A(this,aa,c(this,di).createElementNS(qs,"defs")),e.append(r),r.append(c(this,aa)),c(this,di).body.append(e)}return c(this,aa)},Tp=function(e){if(e.length===1){const p=e[0],m=new Array(256);for(let v=0;v<256;v++)m[v]=p[v]/255;const b=m.join(",");return[b,b,b]}const[s,r,l]=e,u=new Array(256),h=new Array(256),f=new Array(256);for(let p=0;p<256;p++)u[p]=s[p]/255,h[p]=r[p]/255,f[p]=l[p]/255;return[u.join(","),h.join(","),f.join(",")]},vc=function(e){if(c(this,Bl)===void 0){A(this,Bl,"");const s=c(this,di).URL;s!==c(this,di).baseURI&&(Lm(s)?St('#createUrl: ignore "data:"-URL for performance reasons.'):A(this,Bl,aE(s,"")))}return`url(${c(this,Bl)}#${e})`},KE=function(e){const s=c(this,di).createElementNS(qs,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(s)},q0=function(e){const s=c(this,di).createElementNS(qs,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(s)},Ac=function(e){const s=c(this,di).createElementNS(qs,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",e),c(this,st,bc).append(s),s},$h=function(e,s,r){const l=c(this,di).createElementNS(qs,s);l.setAttribute("type","discrete"),l.setAttribute("tableValues",r),e.append(l)},Kh=function(e,s,r,l){const u=c(this,di).createElementNS(qs,"feComponentTransfer");l.append(u),E(this,st,$h).call(this,u,"feFuncR",e),E(this,st,$h).call(this,u,"feFuncG",s),E(this,st,$h).call(this,u,"feFuncB",r)},V0=function(e,s){const r=c(this,di).createElementNS(qs,"feComponentTransfer");s.append(r),E(this,st,$h).call(this,r,"feFuncA",e)},Qh=function(e){return c(this,st,bc).style.color=e,Kv(getComputedStyle(c(this,st,bc)).getPropertyValue("color"))};class QE{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){ee("Abstract method `_fetch` called.")}}class Rw extends QE{async _fetch(t){const e=await If(t,"arraybuffer");return new Uint8Array(e)}}class WE{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){ee("Abstract method `_fetch` called.")}}class Mw extends WE{async _fetch(t){const e=await If(t,"arraybuffer");return new Uint8Array(e)}}_i&&St("Please use the `legacy` build in Node.js environments.");async function Wv(d){const e=await process.getBuiltinModule("fs").promises.readFile(d);return new Uint8Array(e)}class B2 extends $E{}class H2 extends XE{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class U2 extends YE{async _fetch(t){return Wv(t)}}class I2 extends QE{async _fetch(t){return Wv(t)}}class F2 extends WE{async _fetch(t){return Wv(t)}}const ii={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function X0(d,t){if(!t)return;const e=t[2]-t[0],s=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],e,s),d.clip(r)}class Zv{isModifyingCurrentTransform(){return!1}getPattern(){ee("Abstract method `getPattern` called.")}}class G2 extends Zv{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)e.addColorStop(s[0],s[1]);return e}getPattern(t,e,s,r){let l;if(r===ii.STROKE||r===ii.FILL){const u=e.current.getClippedPathBoundingBox(r,ge(t))||[0,0,0,0],h=Math.ceil(u[2]-u[0])||1,f=Math.ceil(u[3]-u[1])||1,p=e.cachedCanvases.getCanvas("pattern",h,f),m=p.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-u[0],-u[1]),s=dt.transform(s,[1,0,0,1,u[0],u[1]]),m.transform(...e.baseTransform),this.matrix&&m.transform(...this.matrix),X0(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),l=t.createPattern(p.canvas,"no-repeat");const b=new DOMMatrix(s);l.setTransform(b)}else X0(t,this._bbox),l=this._createGradient(t);return l}}function h0(d,t,e,s,r,l,u,h){const f=t.coords,p=t.colors,m=d.data,b=d.width*4;let v;f[e+1]>f[s+1]&&(v=e,e=s,s=v,v=l,l=u,u=v),f[s+1]>f[r+1]&&(v=s,s=r,r=v,v=u,u=h,h=v),f[e+1]>f[s+1]&&(v=e,e=s,s=v,v=l,l=u,u=v);const S=(f[e]+t.offsetX)*t.scaleX,x=(f[e+1]+t.offsetY)*t.scaleY,T=(f[s]+t.offsetX)*t.scaleX,R=(f[s+1]+t.offsetY)*t.scaleY,M=(f[r]+t.offsetX)*t.scaleX,D=(f[r+1]+t.offsetY)*t.scaleY;if(x>=D)return;const N=p[l],k=p[l+1],O=p[l+2],B=p[u],G=p[u+1],Q=p[u+2],W=p[h],nt=p[h+1],et=p[h+2],yt=Math.round(x),Lt=Math.round(D);let vt,Ft,H,V,ot,Dt,z,$;for(let tt=yt;tt<=Lt;tt++){if(tt<R){const kt=tt<x?0:(x-tt)/(x-R);vt=S-(S-T)*kt,Ft=N-(N-B)*kt,H=k-(k-G)*kt,V=O-(O-Q)*kt}else{let kt;tt>D?kt=1:R===D?kt=0:kt=(R-tt)/(R-D),vt=T-(T-M)*kt,Ft=B-(B-W)*kt,H=G-(G-nt)*kt,V=Q-(Q-et)*kt}let Z;tt<x?Z=0:tt>D?Z=1:Z=(x-tt)/(x-D),ot=S-(S-M)*Z,Dt=N-(N-W)*Z,z=k-(k-nt)*Z,$=O-(O-et)*Z;const ct=Math.round(Math.min(vt,ot)),wt=Math.round(Math.max(vt,ot));let ft=b*tt+ct*4;for(let kt=ct;kt<=wt;kt++)Z=(vt-kt)/(vt-ot),Z<0?Z=0:Z>1&&(Z=1),m[ft++]=Ft-(Ft-Dt)*Z|0,m[ft++]=H-(H-z)*Z|0,m[ft++]=V-(V-$)*Z|0,m[ft++]=255}}function j2(d,t,e){const s=t.coords,r=t.colors;let l,u;switch(t.type){case"lattice":const h=t.verticesPerRow,f=Math.floor(s.length/h)-1,p=h-1;for(l=0;l<f;l++){let m=l*h;for(let b=0;b<p;b++,m++)h0(d,e,s[m],s[m+1],s[m+h],r[m],r[m+1],r[m+h]),h0(d,e,s[m+h+1],s[m+1],s[m+h],r[m+h+1],r[m+1],r[m+h])}break;case"triangles":for(l=0,u=s.length;l<u;l+=3)h0(d,e,s[l],s[l+1],s[l+2],r[l],r[l+1],r[l+2]);break;default:throw new Error("illegal figure")}}class q2 extends Zv{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,s){const h=Math.floor(this._bounds[0]),f=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-h,m=Math.ceil(this._bounds[3])-f,b=Math.min(Math.ceil(Math.abs(p*t[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(m*t[1]*1.1)),3e3),S=p/b,x=m/v,T={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-f,scaleX:1/S,scaleY:1/x},R=b+2*2,M=v+2*2,D=s.getCanvas("mesh",R,M),N=D.context,k=N.createImageData(b,v);if(e){const B=k.data;for(let G=0,Q=B.length;G<Q;G+=4)B[G]=e[0],B[G+1]=e[1],B[G+2]=e[2],B[G+3]=255}for(const B of this._figures)j2(k,B,T);return N.putImageData(k,2,2),{canvas:D.canvas,offsetX:h-2*S,offsetY:f-2*x,scaleX:S,scaleY:x}}isModifyingCurrentTransform(){return!0}getPattern(t,e,s,r){X0(t,this._bbox);const l=new Float32Array(2);if(r===ii.SHADING)dt.singularValueDecompose2dScale(ge(t),l);else if(this.matrix){dt.singularValueDecompose2dScale(this.matrix,l);const[h,f]=l;dt.singularValueDecompose2dScale(e.baseTransform,l),l[0]*=h,l[1]*=f}else dt.singularValueDecompose2dScale(e.baseTransform,l);const u=this._createMeshCanvas(l,r===ii.SHADING?null:this._background,e.cachedCanvases);return r!==ii.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(u.offsetX,u.offsetY),t.scale(u.scaleX,u.scaleY),t.createPattern(u.canvas,"no-repeat")}}class V2 extends Zv{getPattern(){return"hotpink"}}function X2(d){switch(d[0]){case"RadialAxial":return new G2(d);case"Mesh":return new q2(d);case"Dummy":return new V2}throw new Error(`Unknown IR type: ${d[0]}`)}const Dw={COLORED:1,UNCOLORED:2},gm=class gm{constructor(t,e,s,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(t){const{bbox:e,operatorList:s,paintType:r,tilingType:l,color:u,canvasGraphicsFactory:h}=this;let{xstep:f,ystep:p}=this;f=Math.abs(f),p=Math.abs(p),Nm("TilingType: "+l);const m=e[0],b=e[1],v=e[2],S=e[3],x=v-m,T=S-b,R=new Float32Array(2);dt.singularValueDecompose2dScale(this.matrix,R);const[M,D]=R;dt.singularValueDecompose2dScale(this.baseTransform,R);const N=M*R[0],k=D*R[1];let O=x,B=T,G=!1,Q=!1;const W=Math.ceil(f*N),nt=Math.ceil(p*k),et=Math.ceil(x*N),yt=Math.ceil(T*k);W>=et?O=f:G=!0,nt>=yt?B=p:Q=!0;const Lt=this.getSizeAndScale(O,this.ctx.canvas.width,N),vt=this.getSizeAndScale(B,this.ctx.canvas.height,k),Ft=t.cachedCanvases.getCanvas("pattern",Lt.size,vt.size),H=Ft.context,V=h.createCanvasGraphics(H);if(V.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(V,r,u),H.translate(-Lt.scale*m,-vt.scale*b),V.transform(Lt.scale,0,0,vt.scale,0,0),H.save(),this.clipBbox(V,m,b,v,S),V.baseTransform=ge(V.ctx),V.executeOperatorList(s),V.endDrawing(),H.restore(),G||Q){const ot=Ft.canvas;G&&(O=f),Q&&(B=p);const Dt=this.getSizeAndScale(O,this.ctx.canvas.width,N),z=this.getSizeAndScale(B,this.ctx.canvas.height,k),$=Dt.size,tt=z.size,Z=t.cachedCanvases.getCanvas("pattern-workaround",$,tt),ct=Z.context,wt=G?Math.floor(x/f):0,ft=Q?Math.floor(T/p):0;for(let kt=0;kt<=wt;kt++)for(let Vt=0;Vt<=ft;Vt++)ct.drawImage(ot,$*kt,tt*Vt,$,tt,0,0,$,tt);return{canvas:Z.canvas,scaleX:Dt.scale,scaleY:z.scale,offsetX:m,offsetY:b}}return{canvas:Ft.canvas,scaleX:Lt.scale,scaleY:vt.scale,offsetX:m,offsetY:b}}getSizeAndScale(t,e,s){const r=Math.max(gm.MAX_PATTERN_SIZE,e);let l=Math.ceil(t*s);return l>=r?l=r:s=l/t,{scale:s,size:l}}clipBbox(t,e,s,r,l){const u=r-e,h=l-s;t.ctx.rect(e,s,u,h),dt.axialAlignedBoundingBox([e,s,r,l],ge(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,s){const r=t.ctx,l=t.current;switch(e){case Dw.COLORED:const{fillStyle:u,strokeStyle:h}=this.ctx;r.fillStyle=l.fillColor=u,r.strokeStyle=l.strokeColor=h;break;case Dw.UNCOLORED:r.fillStyle=r.strokeStyle=s,l.fillColor=l.strokeColor=s;break;default:throw new h2(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,s,r){let l=s;r!==ii.SHADING&&(l=dt.transform(l,e.baseTransform),this.matrix&&(l=dt.transform(l,this.matrix)));const u=this.createPatternCanvas(e);let h=new DOMMatrix(l);h=h.translate(u.offsetX,u.offsetY),h=h.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(h),f}};J(gm,"MAX_PATTERN_SIZE",3e3);let Y0=gm;function Y2({src:d,srcPos:t=0,dest:e,width:s,height:r,nonBlackColor:l=4294967295,inverseDecode:u=!1}){const h=ai.isLittleEndian?4278190080:255,[f,p]=u?[l,h]:[h,l],m=s>>3,b=s&7,v=d.length;e=new Uint32Array(e.buffer);let S=0;for(let x=0;x<r;x++){for(const R=t+m;t<R;t++){const M=t<v?d[t]:255;e[S++]=M&128?p:f,e[S++]=M&64?p:f,e[S++]=M&32?p:f,e[S++]=M&16?p:f,e[S++]=M&8?p:f,e[S++]=M&4?p:f,e[S++]=M&2?p:f,e[S++]=M&1?p:f}if(b===0)continue;const T=t<v?d[t++]:255;for(let R=0;R<b;R++)e[S++]=T&1<<7-R?p:f}return{srcPos:t,destPos:S}}const Ow=16,Nw=100,$2=15,Lw=10,Pi=16,d0=new DOMMatrix,on=new Float32Array(2),Ec=new Float32Array([1/0,1/0,-1/0,-1/0]);function K2(d,t){if(d._removeMirroring)throw new Error("Context is already forwarding operations.");d.__originalSave=d.save,d.__originalRestore=d.restore,d.__originalRotate=d.rotate,d.__originalScale=d.scale,d.__originalTranslate=d.translate,d.__originalTransform=d.transform,d.__originalSetTransform=d.setTransform,d.__originalResetTransform=d.resetTransform,d.__originalClip=d.clip,d.__originalMoveTo=d.moveTo,d.__originalLineTo=d.lineTo,d.__originalBezierCurveTo=d.bezierCurveTo,d.__originalRect=d.rect,d.__originalClosePath=d.closePath,d.__originalBeginPath=d.beginPath,d._removeMirroring=()=>{d.save=d.__originalSave,d.restore=d.__originalRestore,d.rotate=d.__originalRotate,d.scale=d.__originalScale,d.translate=d.__originalTranslate,d.transform=d.__originalTransform,d.setTransform=d.__originalSetTransform,d.resetTransform=d.__originalResetTransform,d.clip=d.__originalClip,d.moveTo=d.__originalMoveTo,d.lineTo=d.__originalLineTo,d.bezierCurveTo=d.__originalBezierCurveTo,d.rect=d.__originalRect,d.closePath=d.__originalClosePath,d.beginPath=d.__originalBeginPath,delete d._removeMirroring},d.save=function(){t.save(),this.__originalSave()},d.restore=function(){t.restore(),this.__originalRestore()},d.translate=function(e,s){t.translate(e,s),this.__originalTranslate(e,s)},d.scale=function(e,s){t.scale(e,s),this.__originalScale(e,s)},d.transform=function(e,s,r,l,u,h){t.transform(e,s,r,l,u,h),this.__originalTransform(e,s,r,l,u,h)},d.setTransform=function(e,s,r,l,u,h){t.setTransform(e,s,r,l,u,h),this.__originalSetTransform(e,s,r,l,u,h)},d.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},d.rotate=function(e){t.rotate(e),this.__originalRotate(e)},d.clip=function(e){t.clip(e),this.__originalClip(e)},d.moveTo=function(e,s){t.moveTo(e,s),this.__originalMoveTo(e,s)},d.lineTo=function(e,s){t.lineTo(e,s),this.__originalLineTo(e,s)},d.bezierCurveTo=function(e,s,r,l,u,h){t.bezierCurveTo(e,s,r,l,u,h),this.__originalBezierCurveTo(e,s,r,l,u,h)},d.rect=function(e,s,r,l){t.rect(e,s,r,l),this.__originalRect(e,s,r,l)},d.closePath=function(){t.closePath(),this.__originalClosePath()},d.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class Q2{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,s){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,e,s)):(r=this.canvasFactory.create(e,s),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function hp(d,t,e,s,r,l,u,h,f,p){const[m,b,v,S,x,T]=ge(d);if(b===0&&v===0){const D=u*m+x,N=Math.round(D),k=h*S+T,O=Math.round(k),B=(u+f)*m+x,G=Math.abs(Math.round(B)-N)||1,Q=(h+p)*S+T,W=Math.abs(Math.round(Q)-O)||1;return d.setTransform(Math.sign(m),0,0,Math.sign(S),N,O),d.drawImage(t,e,s,r,l,0,0,G,W),d.setTransform(m,b,v,S,x,T),[G,W]}if(m===0&&S===0){const D=h*v+x,N=Math.round(D),k=u*b+T,O=Math.round(k),B=(h+p)*v+x,G=Math.abs(Math.round(B)-N)||1,Q=(u+f)*b+T,W=Math.abs(Math.round(Q)-O)||1;return d.setTransform(0,Math.sign(b),Math.sign(v),0,N,O),d.drawImage(t,e,s,r,l,0,0,W,G),d.setTransform(m,b,v,S,x,T),[W,G]}d.drawImage(t,e,s,r,l,u,h,f,p);const R=Math.hypot(m,b),M=Math.hypot(v,S);return[R*f,M*p]}class kw{constructor(t,e){J(this,"alphaIsShape",!1);J(this,"fontSize",0);J(this,"fontSizeScale",1);J(this,"textMatrix",null);J(this,"textMatrixScale",1);J(this,"fontMatrix",_0);J(this,"leading",0);J(this,"x",0);J(this,"y",0);J(this,"lineX",0);J(this,"lineY",0);J(this,"charSpacing",0);J(this,"wordSpacing",0);J(this,"textHScale",1);J(this,"textRenderingMode",ci.FILL);J(this,"textRise",0);J(this,"fillColor","#000000");J(this,"strokeColor","#000000");J(this,"patternFill",!1);J(this,"patternStroke",!1);J(this,"fillAlpha",1);J(this,"strokeAlpha",1);J(this,"lineWidth",1);J(this,"activeSMask",null);J(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Ec.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=ii.FILL,e=null){const s=this.minMax.slice();if(t===ii.STROKE){e||ee("Stroke bounding box must include transform."),dt.singularValueDecompose2dScale(e,on);const r=on[0]*this.lineWidth/2,l=on[1]*this.lineWidth/2;s[0]-=r,s[1]-=l,s[2]+=r,s[3]+=l}return s}updateClipFromPath(){const t=dt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Ec,0)}getClippedPathBoundingBox(t=ii.FILL,e=null){return dt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function zw(d,t){if(t instanceof ImageData){d.putImageData(t,0,0);return}const e=t.height,s=t.width,r=e%Pi,l=(e-r)/Pi,u=r===0?l:l+1,h=d.createImageData(s,Pi);let f=0,p;const m=t.data,b=h.data;let v,S,x,T;if(t.kind===pp.GRAYSCALE_1BPP){const R=m.byteLength,M=new Uint32Array(b.buffer,0,b.byteLength>>2),D=M.length,N=s+7>>3,k=4294967295,O=ai.isLittleEndian?4278190080:255;for(v=0;v<u;v++){for(x=v<l?Pi:r,p=0,S=0;S<x;S++){const B=R-f;let G=0;const Q=B>N?s:B*8-7,W=Q&-8;let nt=0,et=0;for(;G<W;G+=8)et=m[f++],M[p++]=et&128?k:O,M[p++]=et&64?k:O,M[p++]=et&32?k:O,M[p++]=et&16?k:O,M[p++]=et&8?k:O,M[p++]=et&4?k:O,M[p++]=et&2?k:O,M[p++]=et&1?k:O;for(;G<Q;G++)nt===0&&(et=m[f++],nt=128),M[p++]=et&nt?k:O,nt>>=1}for(;p<D;)M[p++]=0;d.putImageData(h,0,v*Pi)}}else if(t.kind===pp.RGBA_32BPP){for(S=0,T=s*Pi*4,v=0;v<l;v++)b.set(m.subarray(f,f+T)),f+=T,d.putImageData(h,0,S),S+=Pi;v<u&&(T=s*r*4,b.set(m.subarray(f,f+T)),d.putImageData(h,0,S))}else if(t.kind===pp.RGB_24BPP)for(x=Pi,T=s*x,v=0;v<u;v++){for(v>=l&&(x=r,T=s*x),p=0,S=T;S--;)b[p++]=m[f++],b[p++]=m[f++],b[p++]=m[f++],b[p++]=255;d.putImageData(h,0,v*Pi)}else throw new Error(`bad image kind: ${t.kind}`)}function Pw(d,t){if(t.bitmap){d.drawImage(t.bitmap,0,0);return}const e=t.height,s=t.width,r=e%Pi,l=(e-r)/Pi,u=r===0?l:l+1,h=d.createImageData(s,Pi);let f=0;const p=t.data,m=h.data;for(let b=0;b<u;b++){const v=b<l?Pi:r;({srcPos:f}=Y2({src:p,srcPos:f,dest:m,width:s,height:v,nonBlackColor:0})),d.putImageData(h,0,b*Pi)}}function Ph(d,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of e)d[s]!==void 0&&(t[s]=d[s]);d.setLineDash!==void 0&&(t.setLineDash(d.getLineDash()),t.lineDashOffset=d.lineDashOffset)}function dp(d){d.strokeStyle=d.fillStyle="#000000",d.fillRule="nonzero",d.globalAlpha=1,d.lineWidth=1,d.lineCap="butt",d.lineJoin="miter",d.miterLimit=10,d.globalCompositeOperation="source-over",d.font="10px sans-serif",d.setLineDash!==void 0&&(d.setLineDash([]),d.lineDashOffset=0);const{filter:t}=d;t!=="none"&&t!==""&&(d.filter="none")}function Bw(d,t){if(t)return!0;dt.singularValueDecompose2dScale(d,on);const e=Math.fround(Cs.pixelRatio*Gr.PDF_TO_CSS_UNITS);return on[0]<=e&&on[1]<=e}const W2=["butt","round","square"],Z2=["miter","round","bevel"],J2={},Hw={};var Jn,$0,K0,Q0;const sA=class sA{constructor(t,e,s,r,l,{optionalContentConfig:u,markedContentStack:h=null},f,p){w(this,Jn);this.ctx=t,this.current=new kw(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=s,this.canvasFactory=r,this.filterFactory=l,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=h||[],this.optionalContentConfig=u,this.cachedCanvases=new Q2(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=f,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:s=!1,background:r=null}){const l=this.ctx.canvas.width,u=this.ctx.canvas.height,h=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,l,u),this.ctx.fillStyle=h,s){const f=this.cachedCanvases.getCanvas("transparent",l,u);this.compositeCtx=this.ctx,this.transparentCanvas=f.canvas,this.ctx=f.context,this.ctx.save(),this.ctx.transform(...ge(this.compositeCtx))}this.ctx.save(),dp(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=ge(this.ctx)}executeOperatorList(t,e,s,r){const l=t.argsArray,u=t.fnArray;let h=e||0;const f=l.length;if(f===h)return h;const p=f-h>Lw&&typeof s=="function",m=p?Date.now()+$2:0;let b=0;const v=this.commonObjs,S=this.objs;let x;for(;;){if(r!==void 0&&h===r.nextBreakPoint)return r.breakIt(h,s),h;if(x=u[h],x!==Wp.dependency)this[x].apply(this,l[h]);else for(const T of l[h]){const R=T.startsWith("g_")?v:S;if(!R.has(T))return R.get(T,s),h}if(h++,h===f)return h;if(p&&++b>Lw){if(Date.now()>m)return s(),h;b=0}}}endDrawing(){E(this,Jn,$0).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),E(this,Jn,K0).call(this)}_scaleImage(t,e){const s=t.width??t.displayWidth,r=t.height??t.displayHeight;let l=Math.max(Math.hypot(e[0],e[1]),1),u=Math.max(Math.hypot(e[2],e[3]),1),h=s,f=r,p="prescale1",m,b;for(;l>2&&h>1||u>2&&f>1;){let v=h,S=f;l>2&&h>1&&(v=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h/2),l/=h/v),u>2&&f>1&&(S=f>=16384?Math.floor(f/2)-1||1:Math.ceil(f)/2,u/=f/S),m=this.cachedCanvases.getCanvas(p,v,S),b=m.context,b.clearRect(0,0,v,S),b.drawImage(t,0,0,h,f,0,0,v,S),t=m.canvas,h=v,f=S,p=p==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:h,paintHeight:f}}_createMaskCanvas(t){const e=this.ctx,{width:s,height:r}=t,l=this.current.fillColor,u=this.current.patternFill,h=ge(e);let f,p,m,b;if((t.bitmap||t.data)&&t.count>1){const W=t.bitmap||t.data.buffer;p=JSON.stringify(u?h:[h.slice(0,4),l]),f=this._cachedBitmapsMap.get(W),f||(f=new Map,this._cachedBitmapsMap.set(W,f));const nt=f.get(p);if(nt&&!u){const et=Math.round(Math.min(h[0],h[2])+h[4]),yt=Math.round(Math.min(h[1],h[3])+h[5]);return{canvas:nt,offsetX:et,offsetY:yt}}m=nt}m||(b=this.cachedCanvases.getCanvas("maskCanvas",s,r),Pw(b.context,t));let v=dt.transform(h,[1/s,0,0,-1/r,0,0]);v=dt.transform(v,[1,0,0,1,0,-r]);const S=Ec.slice();dt.axialAlignedBoundingBox([0,0,s,r],v,S);const[x,T,R,M]=S,D=Math.round(R-x)||1,N=Math.round(M-T)||1,k=this.cachedCanvases.getCanvas("fillCanvas",D,N),O=k.context,B=x,G=T;O.translate(-B,-G),O.transform(...v),m||(m=this._scaleImage(b.canvas,ls(O)),m=m.img,f&&u&&f.set(p,m)),O.imageSmoothingEnabled=Bw(ge(O),t.interpolate),hp(O,m,0,0,m.width,m.height,0,0,s,r),O.globalCompositeOperation="source-in";const Q=dt.transform(ls(O),[1,0,0,1,-B,-G]);return O.fillStyle=u?l.getPattern(e,this,Q,ii.FILL):l,O.fillRect(0,0,s,r),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(p,k.canvas)),{canvas:k.canvas,offsetX:Math.round(B),offsetY:Math.round(G)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=W2[t]}setLineJoin(t){this.ctx.lineJoin=Z2[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,s]of t)switch(e){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(s,t,e);this.suspendedCtx=this.ctx;const l=this.ctx=r.context;l.setTransform(this.suspendedCtx.getTransform()),Ph(this.suspendedCtx,l),K2(l,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Ph(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,s,r){const l=r[0],u=r[1],h=r[2]-l,f=r[3]-u;h===0||f===0||(this.genericComposeSMask(e.context,s,h,f,e.subtype,e.backdrop,e.transferMap,l,u,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,e,s,r,l,u,h,f,p,m,b){let v=t.canvas,S=f-m,x=p-b;if(u)if(S<0||x<0||S+s>v.width||x+r>v.height){const R=this.cachedCanvases.getCanvas("maskExtension",s,r),M=R.context;M.drawImage(v,-S,-x),M.globalCompositeOperation="destination-atop",M.fillStyle=u,M.fillRect(0,0,s,r),M.globalCompositeOperation="source-over",v=R.canvas,S=x=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const R=new Path2D;R.rect(S,x,s,r),t.clip(R),t.globalCompositeOperation="destination-atop",t.fillStyle=u,t.fillRect(S,x,s,r),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),l==="Alpha"&&h?e.filter=this.filterFactory.addAlphaFilter(h):l==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(h));const T=new Path2D;T.rect(f,p,s,r),e.clip(T),e.globalCompositeOperation="destination-in",e.drawImage(v,S,x,s,r,f,p,s,r),e.restore()}save(){this.inSMaskMode&&Ph(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Ph(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,s,r,l,u){this.ctx.transform(t,e,s,r,l,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,s){let[r]=e;if(!s){r||(r=e[0]=new Path2D),this[t](r);return}if(!(r instanceof Path2D)){const l=e[0]=new Path2D;for(let u=0,h=r.length;u<h;)switch(r[u++]){case op.moveTo:l.moveTo(r[u++],r[u++]);break;case op.lineTo:l.lineTo(r[u++],r[u++]);break;case op.curveTo:l.bezierCurveTo(r[u++],r[u++],r[u++],r[u++],r[u++],r[u++]);break;case op.closePath:l.closePath();break;default:St(`Unrecognized drawing path operator: ${r[u-1]}`);break}r=l}dt.axialAlignedBoundingBox(s,ge(this.ctx),this.current.minMax),this[t](r)}closePath(){this.ctx.closePath()}stroke(t,e=!0){const s=this.ctx,r=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&(r!=null&&r.getPattern)){const l=r.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=r.getPattern(s,this,ls(s),ii.STROKE),l){const u=new Path2D;u.addPath(t,s.getTransform().invertSelf().multiplySelf(l)),t=u}this.rescaleAndStroke(t,!1),s.restore()}else this.rescaleAndStroke(t,!0);e&&this.consumePath(t,this.current.getClippedPathBoundingBox(ii.STROKE,ge(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,e=!0){const s=this.ctx,r=this.current.fillColor,l=this.current.patternFill;let u=!1;if(l){const f=r.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.fillStyle=r.getPattern(s,this,ls(s),ii.FILL),f){const p=new Path2D;p.addPath(t,s.getTransform().invertSelf().multiplySelf(f)),t=p}u=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(s.fill(t,"evenodd"),this.pendingEOFill=!1):s.fill(t)),u&&s.restore(),e&&this.consumePath(t,h)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=J2}eoClip(){this.pendingClip=Hw}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0)return;const s=new Path2D,r=e.getTransform().invertSelf();for(const{transform:l,x:u,y:h,fontSize:f,path:p}of t)s.addPath(p,new DOMMatrix(l).preMultiplySelf(r).translate(u,h).scale(f,-f));e.clip(s),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var m;const s=this.commonObjs.get(t),r=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=s.fontMatrix||_0,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&St("Invalid font matrix for font "+t),e<0?(e=-e,r.fontDirection=-1):r.fontDirection=1,this.current.font=s,this.current.fontSize=e,s.isType3Font)return;const l=s.loadedName||"sans-serif",u=((m=s.systemFontInfo)==null?void 0:m.css)||`"${l}", ${s.fallbackName}`;let h="normal";s.black?h="900":s.bold&&(h="bold");const f=s.italic?"italic":"normal";let p=e;e<Ow?p=Ow:e>Nw&&(p=Nw),this.current.fontSizeScale=e/p,this.ctx.font=`${f} ${h} ${p}px ${u}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t){const{current:e}=this;e.textMatrix=t,e.textMatrixScale=Math.hypot(t[0],t[1]),e.x=e.lineX=0,e.y=e.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,s,r,l){const u=this.ctx,h=this.current,f=h.font,p=h.textRenderingMode,m=h.fontSize/h.fontSizeScale,b=p&ci.FILL_STROKE_MASK,v=!!(p&ci.ADD_TO_PATH_FLAG),S=h.patternFill&&!f.missingFile,x=h.patternStroke&&!f.missingFile;let T;if((f.disableFontFace||v||S||x)&&(T=f.getPathGenerator(this.commonObjs,t)),f.disableFontFace||S||x){u.save(),u.translate(e,s),u.scale(m,-m);let R;if((b===ci.FILL||b===ci.FILL_STROKE)&&(r?(R=u.getTransform(),u.setTransform(...r),u.fill(E(this,Jn,Q0).call(this,T,R,r))):u.fill(T)),b===ci.STROKE||b===ci.FILL_STROKE)if(l){R||(R=u.getTransform()),u.setTransform(...l);const{a:M,b:D,c:N,d:k}=R,O=dt.inverseTransform(l),B=dt.transform([M,D,N,k,0,0],O);dt.singularValueDecompose2dScale(B,on),u.lineWidth*=Math.max(on[0],on[1])/m,u.stroke(E(this,Jn,Q0).call(this,T,R,l))}else u.lineWidth/=m,u.stroke(T);u.restore()}else(b===ci.FILL||b===ci.FILL_STROKE)&&u.fillText(t,e,s),(b===ci.STROKE||b===ci.FILL_STROKE)&&u.strokeText(t,e,s);v&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ge(u),x:e,y:s,fontSize:m,path:T})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<e.length;r+=4)if(e[r]>0&&e[r]<255){s=!0;break}return zt(this,"isFontSubpixelAAEnabled",s)}showText(t){const e=this.current,s=e.font;if(s.isType3Font)return this.showType3Text(t);const r=e.fontSize;if(r===0)return;const l=this.ctx,u=e.fontSizeScale,h=e.charSpacing,f=e.wordSpacing,p=e.fontDirection,m=e.textHScale*p,b=t.length,v=s.vertical,S=v?1:-1,x=s.defaultVMetrics,T=r*e.fontMatrix[0],R=e.textRenderingMode===ci.FILL&&!s.disableFontFace&&!e.patternFill;l.save(),e.textMatrix&&l.transform(...e.textMatrix),l.translate(e.x,e.y+e.textRise),p>0?l.scale(m,-1):l.scale(m,1);let M,D;if(e.patternFill){l.save();const G=e.fillColor.getPattern(l,this,ls(l),ii.FILL);M=ge(l),l.restore(),l.fillStyle=G}if(e.patternStroke){l.save();const G=e.strokeColor.getPattern(l,this,ls(l),ii.STROKE);D=ge(l),l.restore(),l.strokeStyle=G}let N=e.lineWidth;const k=e.textMatrixScale;if(k===0||N===0){const G=e.textRenderingMode&ci.FILL_STROKE_MASK;(G===ci.STROKE||G===ci.FILL_STROKE)&&(N=this.getSinglePixelWidth())}else N/=k;if(u!==1&&(l.scale(u,u),N/=u),l.lineWidth=N,s.isInvalidPDFjsFont){const G=[];let Q=0;for(const W of t)G.push(W.unicode),Q+=W.width;l.fillText(G.join(""),0,0),e.x+=Q*T*m,l.restore(),this.compose();return}let O=0,B;for(B=0;B<b;++B){const G=t[B];if(typeof G=="number"){O+=S*G*r/1e3;continue}let Q=!1;const W=(G.isSpace?f:0)+h,nt=G.fontChar,et=G.accent;let yt,Lt,vt=G.width;if(v){const H=G.vmetric||x,V=-(G.vmetric?H[1]:vt*.5)*T,ot=H[2]*T;vt=H?-H[0]:vt,yt=V/u,Lt=(O+ot)/u}else yt=O/u,Lt=0;if(s.remeasure&&vt>0){const H=l.measureText(nt).width*1e3/r*u;if(vt<H&&this.isFontSubpixelAAEnabled){const V=vt/H;Q=!0,l.save(),l.scale(V,1),yt/=V}else vt!==H&&(yt+=(vt-H)/2e3*r/u)}if(this.contentVisible&&(G.isInFont||s.missingFile)){if(R&&!et)l.fillText(nt,yt,Lt);else if(this.paintChar(nt,yt,Lt,M,D),et){const H=yt+r*et.offset.x/u,V=Lt-r*et.offset.y/u;this.paintChar(et.fontChar,H,V,M,D)}}const Ft=v?vt*T-W*p:vt*T+W*p;O+=Ft,Q&&l.restore()}v?e.y-=O:e.x+=O*m,l.restore(),this.compose()}showType3Text(t){const e=this.ctx,s=this.current,r=s.font,l=s.fontSize,u=s.fontDirection,h=r.vertical?1:-1,f=s.charSpacing,p=s.wordSpacing,m=s.textHScale*u,b=s.fontMatrix||_0,v=t.length,S=s.textRenderingMode===ci.INVISIBLE;let x,T,R,M;if(!(S||l===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),s.textMatrix&&e.transform(...s.textMatrix),e.translate(s.x,s.y+s.textRise),e.scale(m,u),x=0;x<v;++x){if(T=t[x],typeof T=="number"){M=h*T*l/1e3,this.ctx.translate(M,0),s.x+=M*m;continue}const D=(T.isSpace?p:0)+f,N=r.charProcOperatorList[T.operatorListId];N?this.contentVisible&&(this.save(),e.scale(l,l),e.transform(...b),this.executeOperatorList(N),this.restore()):St(`Type3 character "${T.operatorListId}" is not available.`);const k=[T.width,0];dt.applyTransform(k,b),R=k[0]*l+D,e.translate(R,0),s.x+=R*m}e.restore()}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,s,r,l,u){const h=new Path2D;h.rect(s,r,l-s,u-r),this.ctx.clip(h),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const s=this.baseTransform||ge(this.ctx),r={createCanvasGraphics:l=>new sA(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new Y0(t,this.ctx,r,s)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t){this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t){this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=X2(this.getObject(t)),this.cachedPatterns.set(t,s)),e&&(s.matrix=e),s}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const s=this._getPattern(t);e.fillStyle=s.getPattern(e,this,ls(e),ii.SHADING);const r=ls(e);if(r){const{width:l,height:u}=e.canvas,h=Ec.slice();dt.axialAlignedBoundingBox([0,0,l,u],r,h);const[f,p,m,b]=h;this.ctx.fillRect(f,p,m-f,b-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){ee("Should not call beginInlineImage")}beginImageData(){ee("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=ge(this.ctx),e)){dt.axialAlignedBoundingBox(e,this.baseTransform,this.current.minMax);const[s,r,l,u]=e,h=new Path2D;h.rect(s,r,l-s,u-r),this.ctx.clip(h),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||Nm("TODO: Support non-isolated groups."),t.knockout&&St("Knockout groups not supported.");const s=ge(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=Ec.slice();dt.axialAlignedBoundingBox(t.bbox,ge(e),r);const l=[0,0,e.canvas.width,e.canvas.height];r=dt.intersect(r,l)||[0,0,0,0];const u=Math.floor(r[0]),h=Math.floor(r[1]),f=Math.max(Math.ceil(r[2])-u,1),p=Math.max(Math.ceil(r[3])-h,1);this.current.startNewPathAndClipBox([0,0,f,p]);let m="groupAt"+this.groupLevel;t.smask&&(m+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(m,f,p),v=b.context;v.translate(-u,-h),v.transform(...s);let S=new Path2D;const[x,T,R,M]=t.bbox;if(S.rect(x,T,R-x,M-T),t.matrix){const D=new Path2D;D.addPath(S,new DOMMatrix(t.matrix)),S=D}v.clip(S),t.smask?this.smaskStack.push({canvas:b.canvas,context:v,offsetX:u,offsetY:h,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(u,h),e.save()),Ph(e,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=ge(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const l=Ec.slice();dt.axialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],r,l),this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,e,s,r,l){if(E(this,Jn,$0).call(this),dp(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const u=e[2]-e[0],h=e[3]-e[1];if(l&&this.annotationCanvasMap){s=s.slice(),s[4]-=e[0],s[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=u,e[3]=h,dt.singularValueDecompose2dScale(ge(this.ctx),on);const{viewportScale:f}=this,p=Math.ceil(u*this.outputScaleX*f),m=Math.ceil(h*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(p,m);const{canvas:b,context:v}=this.annotationCanvas;this.annotationCanvasMap.set(t,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=v,this.ctx.save(),this.ctx.setTransform(on[0],0,0,-on[1],0,h*on[1]),dp(this.ctx)}else{dp(this.ctx),this.endPath();const f=new Path2D;f.rect(e[0],e[1],u,h),this.ctx.clip(f)}}this.current=new kw(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),E(this,Jn,K0).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const s=this.ctx,r=this._createMaskCanvas(t),l=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(l,r.offsetX,r.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,s=0,r=0,l,u){if(!this.contentVisible)return;t=this.getObject(t.data,t);const h=this.ctx;h.save();const f=ge(h);h.transform(e,s,r,l,0,0);const p=this._createMaskCanvas(t);h.setTransform(1,0,0,1,p.offsetX-f[4],p.offsetY-f[5]);for(let m=0,b=u.length;m<b;m+=2){const v=dt.transform(f,[e,s,r,l,u[m],u[m+1]]);h.drawImage(p.canvas,v[4],v[5])}h.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,s=this.current.fillColor,r=this.current.patternFill;for(const l of t){const{data:u,width:h,height:f,transform:p}=l,m=this.cachedCanvases.getCanvas("maskCanvas",h,f),b=m.context;b.save();const v=this.getObject(u,l);Pw(b,v),b.globalCompositeOperation="source-in",b.fillStyle=r?s.getPattern(b,this,ls(e),ii.FILL):s,b.fillRect(0,0,h,f),b.restore(),e.save(),e.transform(...p),e.scale(1,-1),hp(e,m.canvas,0,0,h,f,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){St("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,s,r){if(!this.contentVisible)return;const l=this.getObject(t);if(!l){St("Dependent image isn't ready yet");return}const u=l.width,h=l.height,f=[];for(let p=0,m=r.length;p<m;p+=2)f.push({transform:[e,0,0,s,r[p],r[p+1]],x:0,y:0,w:u,h});this.paintInlineImageXObjectGroup(l,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:s,height:r}=t,l=this.cachedCanvases.getCanvas("inlineImage",s,r),u=l.context;return u.filter=this.current.transferMaps,u.drawImage(e,0,0),u.filter="none",l.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,s=t.height,r=this.ctx;this.save();const{filter:l}=r;l!=="none"&&l!==""&&(r.filter="none"),r.scale(1/e,-1/s);let u;if(t.bitmap)u=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)u=t;else{const p=this.cachedCanvases.getCanvas("inlineImage",e,s).context;zw(p,t),u=this.applyTransferMapsToCanvas(p)}const h=this._scaleImage(u,ls(r));r.imageSmoothingEnabled=Bw(ge(r),t.interpolate),hp(r,h.img,0,0,h.paintWidth,h.paintHeight,0,-s,e,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const s=this.ctx;let r;if(t.bitmap)r=t.bitmap;else{const l=t.width,u=t.height,f=this.cachedCanvases.getCanvas("inlineImage",l,u).context;zw(f,t),r=this.applyTransferMapsToCanvas(f)}for(const l of e)s.save(),s.transform(...l.transform),s.scale(1,-1),hp(s,r,l.x,l.y,l.w,l.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,e){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const r=this.ctx;this.pendingClip&&(s||(this.pendingClip===Hw?r.clip(t,"evenodd"):r.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=ge(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:s,c:r,d:l}=this.ctx.getTransform();let u,h;if(s===0&&r===0){const f=Math.abs(e),p=Math.abs(l);if(f===p)if(t===0)u=h=1/f;else{const m=f*t;u=h=m<1?1/m:1}else if(t===0)u=1/f,h=1/p;else{const m=f*t,b=p*t;u=m<1?1/m:1,h=b<1?1/b:1}}else{const f=Math.abs(e*l-s*r),p=Math.hypot(e,s),m=Math.hypot(r,l);if(t===0)u=m/f,h=p/f;else{const b=t*f;u=m>b?m/b:1,h=p>b?p/b:1}}this._cachedScaleForStroking[0]=u,this._cachedScaleForStroking[1]=h}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:s,current:{lineWidth:r}}=this,[l,u]=this.getScaleForStroking();if(l===u){s.lineWidth=(r||1)*l,s.stroke(t);return}const h=s.getLineDash();e&&s.save(),s.scale(l,u),d0.a=1/l,d0.d=1/u;const f=new Path2D;if(f.addPath(t,d0),h.length>0){const p=Math.max(l,u);s.setLineDash(h.map(m=>m/p)),s.lineDashOffset/=p}s.lineWidth=r||1,s.stroke(f),e&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};Jn=new WeakSet,$0=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},K0=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},Q0=function(t,e,s){const r=new Path2D;return r.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(e)),r};let Cc=sA;for(const d in Wp)Cc.prototype[d]!==void 0&&(Cc.prototype[Wp[d]]=Cc.prototype[d]);var Bd,Hd;class xs{static get workerPort(){return c(this,Bd)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");A(this,Bd,t)}static get workerSrc(){return c(this,Hd)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");A(this,Hd,t)}}Bd=new WeakMap,Hd=new WeakMap,w(xs,Bd,null),w(xs,Hd,"");var Xc,Ud;class tD{constructor({parsedData:t,rawData:e}){w(this,Xc);w(this,Ud);A(this,Xc,t),A(this,Ud,e)}getRaw(){return c(this,Ud)}get(t){return c(this,Xc).get(t)??null}[Symbol.iterator](){return c(this,Xc).entries()}}Xc=new WeakMap,Ud=new WeakMap;const Sc=Symbol("INTERNAL");var Id,Fd,Gd,Yc;class eD{constructor(t,{name:e,intent:s,usage:r,rbGroups:l}){w(this,Id,!1);w(this,Fd,!1);w(this,Gd,!1);w(this,Yc,!0);A(this,Id,!!(t&ln.DISPLAY)),A(this,Fd,!!(t&ln.PRINT)),this.name=e,this.intent=s,this.usage=r,this.rbGroups=l}get visible(){if(c(this,Gd))return c(this,Yc);if(!c(this,Yc))return!1;const{print:t,view:e}=this.usage;return c(this,Id)?(e==null?void 0:e.viewState)!=="OFF":c(this,Fd)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,s=!1){t!==Sc&&ee("Internal method `_setVisible` called."),A(this,Gd,s),A(this,Yc,e)}}Id=new WeakMap,Fd=new WeakMap,Gd=new WeakMap,Yc=new WeakMap;var br,Jt,$c,Kc,jd,W0;class iD{constructor(t,e=ln.DISPLAY){w(this,jd);w(this,br,null);w(this,Jt,new Map);w(this,$c,null);w(this,Kc,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,A(this,Kc,t.order);for(const s of t.groups)c(this,Jt).set(s.id,new eD(e,s));if(t.baseState==="OFF")for(const s of c(this,Jt).values())s._setVisible(Sc,!1);for(const s of t.on)c(this,Jt).get(s)._setVisible(Sc,!0);for(const s of t.off)c(this,Jt).get(s)._setVisible(Sc,!1);A(this,$c,this.getHash())}}isVisible(t){if(c(this,Jt).size===0)return!0;if(!t)return Nm("Optional content group not defined."),!0;if(t.type==="OCG")return c(this,Jt).has(t.id)?c(this,Jt).get(t.id).visible:(St(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return E(this,jd,W0).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!c(this,Jt).has(e))return St(`Optional content group not found: ${e}`),!0;if(c(this,Jt).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!c(this,Jt).has(e))return St(`Optional content group not found: ${e}`),!0;if(!c(this,Jt).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!c(this,Jt).has(e))return St(`Optional content group not found: ${e}`),!0;if(!c(this,Jt).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!c(this,Jt).has(e))return St(`Optional content group not found: ${e}`),!0;if(c(this,Jt).get(e).visible)return!1}return!0}return St(`Unknown optional content policy ${t.policy}.`),!0}return St(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,s=!0){var l;const r=c(this,Jt).get(t);if(!r){St(`Optional content group not found: ${t}`);return}if(s&&e&&r.rbGroups.length)for(const u of r.rbGroups)for(const h of u)h!==t&&((l=c(this,Jt).get(h))==null||l._setVisible(Sc,!1,!0));r._setVisible(Sc,!!e,!0),A(this,br,null)}setOCGState({state:t,preserveRB:e}){let s;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":s=r;continue}const l=c(this,Jt).get(r);if(l)switch(s){case"ON":this.setVisibility(r,!0,e);break;case"OFF":this.setVisibility(r,!1,e);break;case"Toggle":this.setVisibility(r,!l.visible,e);break}}A(this,br,null)}get hasInitialVisibility(){return c(this,$c)===null||this.getHash()===c(this,$c)}getOrder(){return c(this,Jt).size?c(this,Kc)?c(this,Kc).slice():[...c(this,Jt).keys()]:null}getGroup(t){return c(this,Jt).get(t)||null}getHash(){if(c(this,br)!==null)return c(this,br);const t=new IE;for(const[e,s]of c(this,Jt))t.update(`${e}:${s.visible}`);return A(this,br,t.hexdigest())}[Symbol.iterator](){return c(this,Jt).entries()}}br=new WeakMap,Jt=new WeakMap,$c=new WeakMap,Kc=new WeakMap,jd=new WeakSet,W0=function(t){const e=t.length;if(e<2)return!0;const s=t[0];for(let r=1;r<e;r++){const l=t[r];let u;if(Array.isArray(l))u=E(this,jd,W0).call(this,l);else if(c(this,Jt).has(l))u=c(this,Jt).get(l).visible;else return St(`Optional content group not found: ${l}`),!0;switch(s){case"And":if(!u)return!1;break;case"Or":if(u)return!0;break;case"Not":return!u;default:return!0}}return s==="And"};class nD{constructor(t,{disableRange:e=!1,disableStream:s=!1}){Re(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:l,progressiveDone:u,contentDispositionFilename:h}=t;if(this._queuedChunks=[],this._progressiveDone=u,this._contentDispositionFilename=h,(l==null?void 0:l.length)>0){const f=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(f)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!e,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((f,p)=>{this._onReceiveData({begin:f,chunk:p})}),t.addProgressListener((f,p)=>{this._onProgress({loaded:f,total:p})}),t.addProgressiveReadListener(f=>{this._onReceiveData({chunk:f})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const s=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.some(function(l){return l._begin!==t?!1:(l._enqueue(s),!0)});Re(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,s,r,l;t.total===void 0?(s=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||s.call(e,{loaded:t.loaded}):(l=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||l.call(r,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Re(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new sD(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new aD(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeReaders.slice(0))s.cancel(t);this._pdfDataRangeTransport.abort()}}class sD{constructor(t,e,s=!1,r=null){this._stream=t,this._done=s||!1,this._filename=Yv(r)?r:null,this._queuedChunks=e||[],this._loaded=0;for(const l of this._queuedChunks)this._loaded+=l.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class aD{constructor(t,e,s){this._stream=t,this._begin=e,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function rD(d){let t=!0,e=s("filename\\*","i").exec(d);if(e){e=e[1];let m=h(e);return m=unescape(m),m=f(m),m=p(m),l(m)}if(e=u(d),e){const m=p(e);return l(m)}if(e=s("filename","i").exec(d),e){e=e[1];let m=h(e);return m=p(m),l(m)}function s(m,b){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',b)}function r(m,b){if(m){if(!/^[\x00-\xFF]+$/.test(b))return b;try{const v=new TextDecoder(m,{fatal:!0}),S=Uf(b);b=v.decode(S),t=!1}catch{}}return b}function l(m){return t&&/[\x80-\xff]/.test(m)&&(m=r("utf-8",m),t&&(m=r("iso-8859-1",m))),m}function u(m){const b=[];let v;const S=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=S.exec(m))!==null;){let[,T,R,M]=v;if(T=parseInt(T,10),T in b){if(T===0)break;continue}b[T]=[R,M]}const x=[];for(let T=0;T<b.length&&T in b;++T){let[R,M]=b[T];M=h(M),R&&(M=unescape(M),T===0&&(M=f(M))),x.push(M)}return x.join("")}function h(m){if(m.startsWith('"')){const b=m.slice(1).split('\\"');for(let v=0;v<b.length;++v){const S=b[v].indexOf('"');S!==-1&&(b[v]=b[v].slice(0,S),b.length=v+1),b[v]=b[v].replaceAll(/\\(.)/g,"$1")}m=b.join('"')}return m}function f(m){const b=m.indexOf("'");if(b===-1)return m;const v=m.slice(0,b),x=m.slice(b+1).replace(/^[^']*'/,"");return r(v,x)}function p(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(b,v,S,x){if(S==="q"||S==="Q")return x=x.replaceAll("_"," "),x=x.replaceAll(/=([0-9a-fA-F]{2})/g,function(T,R){return String.fromCharCode(parseInt(R,16))}),r(v,x);try{x=atob(x)}catch{}return r(v,x)})}return""}function ZE(d,t){const e=new Headers;if(!d||!t||typeof t!="object")return e;for(const s in t){const r=t[s];r!==void 0&&e.append(s,r)}return e}function km(d){var t;return((t=URL.parse(d))==null?void 0:t.origin)??null}function JE({responseHeaders:d,isHttp:t,rangeChunkSize:e,disableRange:s}){const r={allowRangeRequests:!1,suggestedLength:void 0},l=parseInt(d.get("Content-Length"),10);return!Number.isInteger(l)||(r.suggestedLength=l,l<=2*e)||s||!t||d.get("Accept-Ranges")!=="bytes"||(d.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function tT(d){const t=d.get("Content-Disposition");if(t){let e=rD(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Yv(e))return e}return null}function jf(d,t){return new Zp(`Unexpected server response (${d}) while retrieving PDF "${t}".`,d,d===404||d===0&&t.startsWith("file:"))}function eT(d){return d===200||d===206}function iT(d,t,e){return{method:"GET",headers:d,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function nT(d){return d instanceof Uint8Array?d.buffer:d instanceof ArrayBuffer?d:(St(`getArrayBuffer - unexpected data format: ${d}`),new Uint8Array(d).buffer)}class lD{constructor(t){J(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=ZE(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Re(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new oD(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new cD(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class oD{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const s=new Headers(t.headers),r=e.url;fetch(r,iT(s,this._withCredentials,this._abortController)).then(l=>{if(t._responseOrigin=km(l.url),!eT(l.status))throw jf(l.status,r);this._reader=l.body.getReader(),this._headersCapability.resolve();const u=l.headers,{allowRangeRequests:h,suggestedLength:f}=JE({responseHeaders:u,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=f||this._contentLength,this._filename=tT(u),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Fr("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:nT(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class cD{constructor(t,e,s){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const l=new Headers(t.headers);l.append("Range",`bytes=${e}-${s-1}`);const u=r.url;fetch(u,iT(l,this._withCredentials,this._abortController)).then(h=>{const f=km(h.url);if(f!==t._responseOrigin)throw new Error(`Expected range response-origin "${f}" to match "${t._responseOrigin}".`);if(!eT(h.status))throw jf(h.status,u);this._readCapability.resolve(),this._reader=h.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:nT(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const f0=200,g0=206;function uD(d){const t=d.response;return typeof t!="string"?t:Uf(t).buffer}class hD{constructor({url:t,httpHeaders:e,withCredentials:s}){J(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=ZE(this.isHttp,e),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,s=this.currXhrId++,r=this.pendingRequests[s]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[l,u]of this.headers)e.setRequestHeader(l,u);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=g0):r.expectedStatus=f0,e.responseType="arraybuffer",Re(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,s),e.onprogress=this.onProgress.bind(this,s),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,e.send(null),s}onProgress(t,e){var r;const s=this.pendingRequests[t];s&&((r=s.onProgress)==null||r.call(s,e))}onStateChange(t,e){const s=this.pendingRequests[t];if(!s)return;const r=s.xhr;if(r.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){s.onError(r.status);return}const l=r.status||f0;if(!(l===f0&&s.expectedStatus===g0)&&l!==s.expectedStatus){s.onError(r.status);return}const h=uD(r);if(l===g0){const f=r.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(f);p?s.onDone({begin:parseInt(p[1],10),chunk:h}):(St('Missing or invalid "Content-Range" header.'),s.onError(0))}else h?s.onDone({begin:0,chunk:h}):s.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class dD{constructor(t){this._source=t,this._manager=new hD(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Re(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new fD(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const s=new gD(this._manager,t,e);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class fD{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=km(e.responseURL);const s=e.getAllResponseHeaders(),r=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(h=>{const[f,...p]=h.split(": ");return[f,p.join(": ")]}):[]),{allowRangeRequests:l,suggestedLength:u}=JE({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});l&&(this._isRangeSupported=!0),this._contentLength=u||this._contentLength,this._filename=tT(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=jf(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class gD{constructor(t,e,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=km((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=jf(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const pD=/^[a-z][a-z0-9\-+.]+:/i;function mD(d){if(pD.test(d))return new URL(d);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(d))}class yD{constructor(t){this.source=t,this.url=mD(t.url),Re(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Re(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new bD(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new vD(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class bD{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=jf(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Fr("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class vD{constructor(t,e,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const l=process.getBuiltinModule("fs");this._setReadableStream(l.createReadStream(this._url,{start:e,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Bh=Symbol("INITIAL_DATA");var Qi,qd,Z0;class sT{constructor(){w(this,qd);w(this,Qi,Object.create(null))}get(t,e=null){if(e){const r=E(this,qd,Z0).call(this,t);return r.promise.then(()=>e(r.data)),null}const s=c(this,Qi)[t];if(!s||s.data===Bh)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const e=c(this,Qi)[t];return!!e&&e.data!==Bh}delete(t){const e=c(this,Qi)[t];return!e||e.data===Bh?!1:(delete c(this,Qi)[t],!0)}resolve(t,e=null){const s=E(this,qd,Z0).call(this,t);s.data=e,s.resolve()}clear(){var t;for(const e in c(this,Qi)){const{data:s}=c(this,Qi)[e];(t=s==null?void 0:s.bitmap)==null||t.close()}A(this,Qi,Object.create(null))}*[Symbol.iterator](){for(const t in c(this,Qi)){const{data:e}=c(this,Qi)[t];e!==Bh&&(yield[t,e])}}}Qi=new WeakMap,qd=new WeakSet,Z0=function(t){var e;return(e=c(this,Qi))[t]||(e[t]={...Promise.withResolvers(),data:Bh})};const AD=1e5,Uw=30;var jw,vr,ki,Vd,Xd,Il,la,Yd,$d,Fl,Qc,Wc,Ar,Zc,Kd,Jc,Gl,Qd,Wd,tu,jl,Zd,Sr,eu,Ma,aT,rT,J0,un,xp,tv,lT,oT;const Ne=class Ne{constructor({textContentSource:t,container:e,viewport:s}){w(this,Ma);w(this,vr,Promise.withResolvers());w(this,ki,null);w(this,Vd,!1);w(this,Xd,!!((jw=globalThis.FontInspector)!=null&&jw.enabled));w(this,Il,null);w(this,la,null);w(this,Yd,0);w(this,$d,0);w(this,Fl,null);w(this,Qc,null);w(this,Wc,0);w(this,Ar,0);w(this,Zc,Object.create(null));w(this,Kd,[]);w(this,Jc,null);w(this,Gl,[]);w(this,Qd,new WeakMap);w(this,Wd,null);var f;if(t instanceof ReadableStream)A(this,Jc,t);else if(typeof t=="object")A(this,Jc,new ReadableStream({start(p){p.enqueue(t),p.close()}}));else throw new Error('No "textContentSource" parameter specified.');A(this,ki,A(this,Qc,e)),A(this,Ar,s.scale*Cs.pixelRatio),A(this,Wc,s.rotation),A(this,la,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:l,pageX:u,pageY:h}=s.rawDims;A(this,Wd,[1,0,0,-1,-u,h+l]),A(this,$d,r),A(this,Yd,l),E(f=Ne,un,lT).call(f),xo(e,s),c(this,vr).promise.finally(()=>{c(Ne,eu).delete(this),A(this,la,null),A(this,Zc,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=ai.platform;return zt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{c(this,Fl).read().then(({value:e,done:s})=>{if(s){c(this,vr).resolve();return}c(this,Il)??A(this,Il,e.lang),Object.assign(c(this,Zc),e.styles),E(this,Ma,aT).call(this,e.items),t()},c(this,vr).reject)};return A(this,Fl,c(this,Jc).getReader()),c(Ne,eu).add(this),t(),c(this,vr).promise}update({viewport:t,onBefore:e=null}){var l;const s=t.scale*Cs.pixelRatio,r=t.rotation;if(r!==c(this,Wc)&&(e==null||e(),A(this,Wc,r),xo(c(this,Qc),{rotation:r})),s!==c(this,Ar)){e==null||e(),A(this,Ar,s);const u={div:null,properties:null,ctx:E(l=Ne,un,xp).call(l,c(this,Il))};for(const h of c(this,Gl))u.properties=c(this,Qd).get(h),u.div=h,E(this,Ma,J0).call(this,u)}}cancel(){var e;const t=new Fr("TextLayer task cancelled.");(e=c(this,Fl))==null||e.cancel(t).catch(()=>{}),A(this,Fl,null),c(this,vr).reject(t)}get textDivs(){return c(this,Gl)}get textContentItemsStr(){return c(this,Kd)}static cleanup(){if(!(c(this,eu).size>0)){c(this,tu).clear();for(const{canvas:t}of c(this,jl).values())t.remove();c(this,jl).clear()}}};vr=new WeakMap,ki=new WeakMap,Vd=new WeakMap,Xd=new WeakMap,Il=new WeakMap,la=new WeakMap,Yd=new WeakMap,$d=new WeakMap,Fl=new WeakMap,Qc=new WeakMap,Wc=new WeakMap,Ar=new WeakMap,Zc=new WeakMap,Kd=new WeakMap,Jc=new WeakMap,Gl=new WeakMap,Qd=new WeakMap,Wd=new WeakMap,tu=new WeakMap,jl=new WeakMap,Zd=new WeakMap,Sr=new WeakMap,eu=new WeakMap,Ma=new WeakSet,aT=function(t){var r,l;if(c(this,Vd))return;(l=c(this,la)).ctx??(l.ctx=E(r=Ne,un,xp).call(r,c(this,Il)));const e=c(this,Gl),s=c(this,Kd);for(const u of t){if(e.length>AD){St("Ignoring additional textDivs for performance reasons."),A(this,Vd,!0);return}if(u.str===void 0){if(u.type==="beginMarkedContentProps"||u.type==="beginMarkedContent"){const h=c(this,ki);A(this,ki,document.createElement("span")),c(this,ki).classList.add("markedContent"),u.id!==null&&c(this,ki).setAttribute("id",`${u.id}`),h.append(c(this,ki))}else u.type==="endMarkedContent"&&A(this,ki,c(this,ki).parentNode);continue}s.push(u.str),E(this,Ma,rT).call(this,u)}},rT=function(t){var T;const e=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};c(this,Gl).push(e);const r=dt.transform(c(this,Wd),t.transform);let l=Math.atan2(r[1],r[0]);const u=c(this,Zc)[t.fontName];u.vertical&&(l+=Math.PI/2);let h=c(this,Xd)&&u.fontSubstitution||u.fontFamily;h=Ne.fontFamilyMap.get(h)||h;const f=Math.hypot(r[2],r[3]),p=f*E(T=Ne,un,oT).call(T,h,u,c(this,Il));let m,b;l===0?(m=r[4],b=r[5]-p):(m=r[4]+p*Math.sin(l),b=r[5]-p*Math.cos(l));const v="calc(var(--total-scale-factor) *",S=e.style;c(this,ki)===c(this,Qc)?(S.left=`${(100*m/c(this,$d)).toFixed(2)}%`,S.top=`${(100*b/c(this,Yd)).toFixed(2)}%`):(S.left=`${v}${m.toFixed(2)}px)`,S.top=`${v}${b.toFixed(2)}px)`),S.fontSize=`${v}${(c(Ne,Sr)*f).toFixed(2)}px)`,S.fontFamily=h,s.fontSize=f,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,c(this,Xd)&&(e.dataset.fontName=u.fontSubstitutionLoadedName||t.fontName),l!==0&&(s.angle=l*(180/Math.PI));let x=!1;if(t.str.length>1)x=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const R=Math.abs(t.transform[0]),M=Math.abs(t.transform[3]);R!==M&&Math.max(R,M)/Math.min(R,M)>1.5&&(x=!0)}if(x&&(s.canvasWidth=u.vertical?t.height:t.width),c(this,Qd).set(e,s),c(this,la).div=e,c(this,la).properties=s,E(this,Ma,J0).call(this,c(this,la)),s.hasText&&c(this,ki).append(e),s.hasEOL){const R=document.createElement("br");R.setAttribute("role","presentation"),c(this,ki).append(R)}},J0=function(t){var h;const{div:e,properties:s,ctx:r}=t,{style:l}=e;let u="";if(c(Ne,Sr)>1&&(u=`scale(${1/c(Ne,Sr)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:f}=l,{canvasWidth:p,fontSize:m}=s;E(h=Ne,un,tv).call(h,r,m*c(this,Ar),f);const{width:b}=r.measureText(e.textContent);b>0&&(u=`scaleX(${p*c(this,Ar)/b}) ${u}`)}s.angle!==0&&(u=`rotate(${s.angle}deg) ${u}`),u.length>0&&(l.transform=u)},un=new WeakSet,xp=function(t=null){let e=c(this,jl).get(t||(t=""));if(!e){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),e=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,jl).set(t,e),c(this,Zd).set(e,{size:0,family:""})}return e},tv=function(t,e,s){const r=c(this,Zd).get(t);e===r.size&&s===r.family||(t.font=`${e}px ${s}`,r.size=e,r.family=s)},lT=function(){if(c(this,Sr)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),A(this,Sr,t.getBoundingClientRect().height),t.remove()},oT=function(t,e,s){const r=c(this,tu).get(t);if(r)return r;const l=E(this,un,xp).call(this,s);l.canvas.width=l.canvas.height=Uw,E(this,un,tv).call(this,l,Uw,t);const u=l.measureText(""),h=u.fontBoundingBoxAscent,f=Math.abs(u.fontBoundingBoxDescent);l.canvas.width=l.canvas.height=0;let p=.8;return h?p=h/(h+f):(ai.platform.isFirefox&&St("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?p=e.ascent:e.descent&&(p=1+e.descent)),c(this,tu).set(t,p),p},w(Ne,un),w(Ne,tu,new Map),w(Ne,jl,new Map),w(Ne,Zd,new WeakMap),w(Ne,Sr,null),w(Ne,eu,new Set);let od=Ne;class cd{static textContent(t){const e=[],s={items:e,styles:Object.create(null)};function r(l){var f;if(!l)return;let u=null;const h=l.name;if(h==="#text")u=l.value;else if(cd.shouldBuildText(h))(f=l==null?void 0:l.attributes)!=null&&f.textContent?u=l.attributes.textContent:l.value&&(u=l.value);else return;if(u!==null&&e.push({str:u}),!!l.children)for(const p of l.children)r(p)}return r(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const SD=100;function cT(d={}){typeof d=="string"||d instanceof URL?d={url:d}:(d instanceof ArrayBuffer||ArrayBuffer.isView(d))&&(d={data:d});const t=new ev,{docId:e}=t,s=d.url?D2(d.url):null,r=d.data?O2(d.data):null,l=d.httpHeaders||null,u=d.withCredentials===!0,h=d.password??null,f=d.range instanceof uT?d.range:null,p=Number.isInteger(d.rangeChunkSize)&&d.rangeChunkSize>0?d.rangeChunkSize:2**16;let m=d.worker instanceof ud?d.worker:null;const b=d.verbosity,v=typeof d.docBaseUrl=="string"&&!Lm(d.docBaseUrl)?d.docBaseUrl:null,S=cp(d.cMapUrl),x=d.cMapPacked!==!1,T=d.CMapReaderFactory||(_i?U2:Cw),R=cp(d.iccUrl),M=cp(d.standardFontDataUrl),D=d.StandardFontDataFactory||(_i?I2:Rw),N=cp(d.wasmUrl),k=d.WasmFactory||(_i?F2:Mw),O=d.stopAtErrors!==!0,B=Number.isInteger(d.maxImageSize)&&d.maxImageSize>-1?d.maxImageSize:-1,G=d.isEvalSupported!==!1,Q=typeof d.isOffscreenCanvasSupported=="boolean"?d.isOffscreenCanvasSupported:!_i,W=typeof d.isImageDecoderSupported=="boolean"?d.isImageDecoderSupported:!_i&&(ai.platform.isFirefox||!globalThis.chrome),nt=Number.isInteger(d.canvasMaxAreaInBytes)?d.canvasMaxAreaInBytes:-1,et=typeof d.disableFontFace=="boolean"?d.disableFontFace:_i,yt=d.fontExtraProperties===!0,Lt=d.enableXfa===!0,vt=d.ownerDocument||globalThis.document,Ft=d.disableRange===!0,H=d.disableStream===!0,V=d.disableAutoFetch===!0,ot=d.pdfBug===!0,Dt=d.CanvasFactory||(_i?H2:z2),z=d.FilterFactory||(_i?B2:P2),$=d.enableHWA===!0,tt=d.useWasm!==!1,Z=f?f.length:d.length??NaN,ct=typeof d.useSystemFonts=="boolean"?d.useSystemFonts:!_i&&!et,wt=typeof d.useWorkerFetch=="boolean"?d.useWorkerFetch:!!(T===Cw&&D===Rw&&k===Mw&&S&&M&&N&&Fh(S,document.baseURI)&&Fh(M,document.baseURI)&&Fh(N,document.baseURI)),ft=null;o2(b);const kt={canvasFactory:new Dt({ownerDocument:vt,enableHWA:$}),filterFactory:new z({docId:e,ownerDocument:vt}),cMapReaderFactory:wt?null:new T({baseUrl:S,isCompressed:x}),standardFontDataFactory:wt?null:new D({baseUrl:M}),wasmFactory:wt?null:new k({baseUrl:N})};m||(m=ud.create({verbosity:b,port:xs.workerPort}),t._worker=m);const Vt={docId:e,apiVersion:"5.3.31",data:r,password:h,disableAutoFetch:V,rangeChunkSize:p,length:Z,docBaseUrl:v,enableXfa:Lt,evaluatorOptions:{maxImageSize:B,disableFontFace:et,ignoreErrors:O,isEvalSupported:G,isOffscreenCanvasSupported:Q,isImageDecoderSupported:W,canvasMaxAreaInBytes:nt,fontExtraProperties:yt,useSystemFonts:ct,useWasm:tt,useWorkerFetch:wt,cMapUrl:S,iccUrl:R,standardFontDataUrl:M,wasmUrl:N}},ts={ownerDocument:vt,pdfBug:ot,styleElement:ft,loadingParams:{disableAutoFetch:V,enableXfa:Lt}};return m.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const zu=m.messageHandler.sendWithPromise("GetDocRequest",Vt,r?[r.buffer]:null);let Da;if(f)Da=new nD(f,{disableRange:Ft,disableStream:H});else if(!r){if(!s)throw new Error("getDocument - no `url` parameter provided.");const Xr=Fh(s)?lD:_i?yD:dD;Da=new Xr({url:s,length:Z,httpHeaders:l,withCredentials:u,rangeChunkSize:p,disableRange:Ft,disableStream:H})}return zu.then(Xr=>{if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const Oo=new Xh(e,Xr,m.port),Pu=new ED(Oo,t,Da,ts,kt);t._transport=Pu,Oo.send("Ready",null)})}).catch(t._capability.reject),t}var pm;const mm=class mm{constructor(){J(this,"_capability",Promise.withResolvers());J(this,"_transport",null);J(this,"_worker",null);J(this,"docId",`d${mi(mm,pm)._++}`);J(this,"destroyed",!1);J(this,"onPassword",null);J(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,s,r;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(l){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,l}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};pm=new WeakMap,w(mm,pm,0);let ev=mm;var ql,Jd,tf,ef,nf;class uT{constructor(t,e,s=!1,r=null){w(this,ql,Promise.withResolvers());w(this,Jd,[]);w(this,tf,[]);w(this,ef,[]);w(this,nf,[]);this.length=t,this.initialData=e,this.progressiveDone=s,this.contentDispositionFilename=r}addRangeListener(t){c(this,nf).push(t)}addProgressListener(t){c(this,ef).push(t)}addProgressiveReadListener(t){c(this,tf).push(t)}addProgressiveDoneListener(t){c(this,Jd).push(t)}onDataRange(t,e){for(const s of c(this,nf))s(t,e)}onDataProgress(t,e){c(this,ql).promise.then(()=>{for(const s of c(this,ef))s(t,e)})}onDataProgressiveRead(t){c(this,ql).promise.then(()=>{for(const e of c(this,tf))e(t)})}onDataProgressiveDone(){c(this,ql).promise.then(()=>{for(const t of c(this,Jd))t()})}transportReady(){c(this,ql).resolve()}requestDataRange(t,e){ee("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}ql=new WeakMap,Jd=new WeakMap,tf=new WeakMap,ef=new WeakMap,nf=new WeakMap;class _D{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return zt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var oa,Vl,Wh;class wD{constructor(t,e,s,r=!1){w(this,Vl);w(this,oa,!1);this._pageIndex=t,this._pageInfo=e,this._transport=s,this._stats=r?new Ew:null,this._pdfBug=r,this.commonObjs=s.commonObjs,this.objs=new sT,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:l=!1}={}){return new Ff({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:r,dontFlip:l})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return zt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:s="display",annotationMode:r=ir.ENABLE,transform:l=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:m=null,isEditing:b=!1}){var k,O;(k=this._stats)==null||k.time("Overall");const v=this._transport.getRenderingIntent(s,r,m,b),{renderingIntent:S,cacheKey:x}=v;A(this,oa,!1),h||(h=this._transport.getOptionalContentConfig(S));let T=this._intentStates.get(x);T||(T=Object.create(null),this._intentStates.set(x,T)),T.streamReaderCancelTimeout&&(clearTimeout(T.streamReaderCancelTimeout),T.streamReaderCancelTimeout=null);const R=!!(S&ln.PRINT);T.displayReadyCapability||(T.displayReadyCapability=Promise.withResolvers(),T.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(O=this._stats)==null||O.time("Page Request"),this._pumpOperatorList(v));const M=B=>{var G;T.renderTasks.delete(D),R&&A(this,oa,!0),E(this,Vl,Wh).call(this),B?(D.capability.reject(B),this._abortOperatorList({intentState:T,reason:B instanceof Error?B:new Error(B)})):D.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(G=globalThis.Stats)!=null&&G.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},D=new iv({callback:M,params:{canvasContext:t,viewport:e,transform:l,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:T.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!R,pdfBug:this._pdfBug,pageColors:p});(T.renderTasks||(T.renderTasks=new Set)).add(D);const N=D.task;return Promise.all([T.displayReadyCapability.promise,h]).then(([B,G])=>{var Q;if(this.destroyed){M();return}if((Q=this._stats)==null||Q.time("Rendering"),!(G.renderingIntent&S))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");D.initializeGraphics({transparency:B,optionalContentConfig:G}),D.operatorListChanged()}).catch(M),N}getOperatorList({intent:t="display",annotationMode:e=ir.ENABLE,printAnnotationStorage:s=null,isEditing:r=!1}={}){var p;function l(){h.operatorList.lastChunk&&(h.opListReadCapability.resolve(h.operatorList),h.renderTasks.delete(f))}const u=this._transport.getRenderingIntent(t,e,s,r,!0);let h=this._intentStates.get(u.cacheKey);h||(h=Object.create(null),this._intentStates.set(u.cacheKey,h));let f;return h.opListReadCapability||(f=Object.create(null),f.operatorListChanged=l,h.opListReadCapability=Promise.withResolvers(),(h.renderTasks||(h.renderTasks=new Set)).add(f),h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(p=this._stats)==null||p.time("Page Request"),this._pumpOperatorList(u)),h.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>cd.textContent(s));const e=this.streamTextContent(t);return new Promise(function(s,r){function l(){u.read().then(function({value:f,done:p}){if(p){s(h);return}h.lang??(h.lang=f.lang),Object.assign(h.styles,f.styles),h.items.push(...f.items),l()},r)}const u=e.getReader(),h={items:[],styles:Object.create(null),lang:null};l()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const s of e.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),A(this,oa,!1),Promise.all(t)}cleanup(t=!1){A(this,oa,!0);const e=E(this,Vl,Wh).call(this);return t&&e&&this._stats&&(this._stats=new Ew),e}_startRenderPage(t,e){var r,l;const s=this._intentStates.get(e);s&&((r=this._stats)==null||r.timeEnd("Page Request"),(l=s.displayReadyCapability)==null||l.resolve(t))}_renderPageChunk(t,e){for(let s=0,r=t.length;s<r;s++)e.operatorList.fnArray.push(t.fnArray[s]),e.operatorList.argsArray.push(t.argsArray[s]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const s of e.renderTasks)s.operatorListChanged();t.lastChunk&&E(this,Vl,Wh).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:s,modifiedIds:r}){const{map:l,transfer:u}=s,f=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:l,modifiedIds:r},u).getReader(),p=this._intentStates.get(e);p.streamReader=f;const m=()=>{f.read().then(({value:b,done:v})=>{if(v){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(b,p),m())},b=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const v of p.renderTasks)v.operatorListChanged();E(this,Vl,Wh).call(this)}if(p.displayReadyCapability)p.displayReadyCapability.reject(b);else if(p.opListReadCapability)p.opListReadCapability.reject(b);else throw b}})};m()}_abortOperatorList({intentState:t,reason:e,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(e instanceof Xv){let r=SD;e.extraDelay>0&&e.extraDelay<1e3&&(r+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},r);return}}if(t.streamReader.cancel(new Fr(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,l]of this._intentStates)if(l===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}oa=new WeakMap,Vl=new WeakSet,Wh=function(){if(!c(this,oa)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),A(this,oa,!1),!0};var _r,In,ca,Xl,ym,Yl,$l,Ei,Cp,hT,dT,Zh,iu,Rp;const ce=class ce{constructor({name:t=null,port:e=null,verbosity:s=c2()}={}){w(this,Ei);w(this,_r,Promise.withResolvers());w(this,In,null);w(this,ca,null);w(this,Xl,null);if(this.name=t,this.destroyed=!1,this.verbosity=s,e){if(c(ce,$l).has(e))throw new Error("Cannot use more than one PDFWorker per port.");c(ce,$l).set(e,this),E(this,Ei,hT).call(this,e)}else E(this,Ei,dT).call(this)}get promise(){return c(this,_r).promise}get port(){return c(this,ca)}get messageHandler(){return c(this,In)}destroy(){var t,e;this.destroyed=!0,(t=c(this,Xl))==null||t.terminate(),A(this,Xl,null),c(ce,$l).delete(c(this,ca)),A(this,ca,null),(e=c(this,In))==null||e.destroy(),A(this,In,null)}static create(t){const e=c(this,$l).get(t==null?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new ce(t)}static get workerSrc(){if(xs.workerSrc)return xs.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return zt(this,"_setupFakeWorkerGlobal",(async()=>c(this,iu,Rp)?c(this,iu,Rp):(await import(this.workerSrc)).WorkerMessageHandler)())}};_r=new WeakMap,In=new WeakMap,ca=new WeakMap,Xl=new WeakMap,ym=new WeakMap,Yl=new WeakMap,$l=new WeakMap,Ei=new WeakSet,Cp=function(){c(this,_r).resolve(),c(this,In).send("configure",{verbosity:this.verbosity})},hT=function(t){A(this,ca,t),A(this,In,new Xh("main","worker",t)),c(this,In).on("ready",()=>{}),E(this,Ei,Cp).call(this)},dT=function(){if(c(ce,Yl)||c(ce,iu,Rp)){E(this,Ei,Zh).call(this);return}let{workerSrc:t}=ce;try{ce._isSameOrigin(window.location,t)||(t=ce._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),s=new Xh("main","worker",e),r=()=>{l.abort(),s.destroy(),e.terminate(),this.destroyed?c(this,_r).reject(new Error("Worker was destroyed")):E(this,Ei,Zh).call(this)},l=new AbortController;e.addEventListener("error",()=>{c(this,Xl)||r()},{signal:l.signal}),s.on("test",h=>{if(l.abort(),this.destroyed||!h){r();return}A(this,In,s),A(this,ca,e),A(this,Xl,e),E(this,Ei,Cp).call(this)}),s.on("ready",h=>{if(l.abort(),this.destroyed){r();return}try{u()}catch{E(this,Ei,Zh).call(this)}});const u=()=>{const h=new Uint8Array;s.send("test",h,[h.buffer])};u();return}catch{Nm("The worker has been disabled.")}E(this,Ei,Zh).call(this)},Zh=function(){c(ce,Yl)||(St("Setting up fake worker."),A(ce,Yl,!0)),ce._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){c(this,_r).reject(new Error("Worker was destroyed"));return}const e=new k2;A(this,ca,e);const s=`fake${mi(ce,ym)._++}`,r=new Xh(s+"_worker",s,e);t.setup(r,e),A(this,In,new Xh(s,s+"_worker",e)),E(this,Ei,Cp).call(this)}).catch(t=>{c(this,_r).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},iu=new WeakSet,Rp=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},w(ce,iu),w(ce,ym,0),w(ce,Yl,!1),w(ce,$l,new WeakMap),_i&&(A(ce,Yl,!0),xs.workerSrc||(xs.workerSrc="./pdf.worker.mjs")),ce._isSameOrigin=(t,e)=>{const s=URL.parse(t);if(!(s!=null&&s.origin)||s.origin==="null")return!1;const r=new URL(e,s);return s.origin===r.origin},ce._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},ce.fromPort=t=>{if(S2("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return ce.create(t)};let ud=ce;var ua,vs,nu,su,ha,Kl,Jh;class ED{constructor(t,e,s,r,l){w(this,Kl);w(this,ua,new Map);w(this,vs,new Map);w(this,nu,new Map);w(this,su,new Map);w(this,ha,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new sT,this.fontLoader=new R2({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=l.canvasFactory,this.filterFactory=l.filterFactory,this.cMapReaderFactory=l.cMapReaderFactory,this.standardFontDataFactory=l.standardFontDataFactory,this.wasmFactory=l.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return zt(this,"annotationStorage",new Qv)}getRenderingIntent(t,e=ir.ENABLE,s=null,r=!1,l=!1){let u=ln.DISPLAY,h=G0;switch(t){case"any":u=ln.ANY;break;case"display":break;case"print":u=ln.PRINT;break;default:St(`getRenderingIntent - invalid intent: ${t}`)}const f=u&ln.PRINT&&s instanceof GE?s:this.annotationStorage;switch(e){case ir.DISABLE:u+=ln.ANNOTATIONS_DISABLE;break;case ir.ENABLE:break;case ir.ENABLE_FORMS:u+=ln.ANNOTATIONS_FORMS;break;case ir.ENABLE_STORAGE:u+=ln.ANNOTATIONS_STORAGE,h=f.serializable;break;default:St(`getRenderingIntent - invalid annotationMode: ${e}`)}r&&(u+=ln.IS_EDITING),l&&(u+=ln.OPLIST);const{ids:p,hash:m}=f.modifiedIds,b=[u,h.hash,m];return{renderingIntent:u,cacheKey:b.join("_"),annotationStorageSerializable:h,modifiedIds:p}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=c(this,ha))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const r of c(this,vs).values())t.push(r._destroy());c(this,vs).clear(),c(this,nu).clear(),c(this,su).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var r,l;this.commonObjs.clear(),this.fontLoader.clear(),c(this,ua).clear(),this.filterFactory.destroy(),od.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new Fr("Worker was terminated.")),(l=this.messageHandler)==null||l.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(s,r)=>{Re(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=l=>{this._lastProgress={loaded:l.loaded,total:l.total}},r.onPull=()=>{this._fullReader.read().then(function({value:l,done:u}){if(u){r.close();return}Re(l instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{r.error(l)})},r.onCancel=l=>{this._fullReader.cancel(l),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("ReaderHeadersReady",async s=>{var h;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:l,contentLength:u}=this._fullReader;return(!r||!l)&&(this._lastProgress&&((h=e.onProgress)==null||h.call(e,this._lastProgress)),this._fullReader.onProgress=f=>{var p;(p=e.onProgress)==null||p.call(e,{loaded:f.loaded,total:f.total})}),{isStreamingSupported:r,isRangeSupported:l,contentLength:u}}),t.on("GetRangeReader",(s,r)=>{Re(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const l=this._networkStream.getRangeReader(s.begin,s.end);if(!l){r.close();return}r.onPull=()=>{l.read().then(function({value:u,done:h}){if(h){r.close();return}Re(u instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(u),1,[u])}).catch(u=>{r.error(u)})},r.onCancel=u=>{l.cancel(u),r.ready.catch(h=>{if(!this.destroyed)throw h})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,e._capability.resolve(new _D(s,this))}),t.on("DocException",s=>{e._capability.reject(Oi(s))}),t.on("PasswordRequest",s=>{A(this,ha,Promise.withResolvers());try{if(!e.onPassword)throw Oi(s);const r=l=>{l instanceof Error?c(this,ha).reject(l):c(this,ha).resolve({password:l})};e.onPassword(r,s.code)}catch(r){c(this,ha).reject(r)}return c(this,ha).promise}),t.on("DataLoaded",s=>{var r;(r=e.onProgress)==null||r.call(e,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;c(this,vs).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,r,l])=>{var u;if(this.destroyed||this.commonObjs.has(s))return null;switch(r){case"Font":if("error"in l){const m=l.error;St(`Error during font loading: ${m}`),this.commonObjs.resolve(s,m);break}const h=this._params.pdfBug&&((u=globalThis.FontInspector)!=null&&u.enabled)?(m,b)=>globalThis.FontInspector.fontAdded(m,b):null,f=new M2(l,h);this.fontLoader.bind(f).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!f.fontExtraProperties&&f.data&&(f.data=null),this.commonObjs.resolve(s,f)});break;case"CopyLocalImage":const{imageRef:p}=l;Re(p,"The imageRef must be defined.");for(const m of c(this,vs).values())for(const[,b]of m.objs)if((b==null?void 0:b.ref)===p)return b.dataLen?(this.commonObjs.resolve(s,structuredClone(b)),b.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,l);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([s,r,l,u])=>{var f;if(this.destroyed)return;const h=c(this,vs).get(r);if(!h.objs.has(s)){if(h._intentStates.size===0){(f=u==null?void 0:u.bitmap)==null||f.close();return}switch(l){case"Image":case"Pattern":h.objs.resolve(s,u);break;default:throw new Error(`Got unknown object type ${l}`)}}}),t.on("DocProgress",s=>{var r;this.destroyed||(r=e.onProgress)==null||r.call(e,{loaded:s.loaded,total:s.total})}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[s.type];if(!r)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&St("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((s=this._fullReader)==null?void 0:s.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,s=c(this,nu).get(e);if(s)return s;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");l.refStr&&c(this,su).set(l.refStr,t);const u=new wD(e,l,this,this._params.pdfBug);return c(this,vs).set(e,u),u});return c(this,nu).set(e,r),r}getPageIndex(t){return j0(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return E(this,Kl,Jh).call(this,"GetFieldObjects")}hasJSActions(){return E(this,Kl,Jh).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return E(this,Kl,Jh).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return E(this,Kl,Jh).call(this,"GetOptionalContentConfig").then(e=>new iD(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=c(this,ua).get(t);if(e)return e;const s=this.messageHandler.sendWithPromise(t,null).then(r=>{var l,u;return{info:r[0],metadata:r[1]?new tD(r[1]):null,contentDispositionFilename:((l=this._fullReader)==null?void 0:l.filename)??null,contentLength:((u=this._fullReader)==null?void 0:u.contentLength)??null}});return c(this,ua).set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of c(this,vs).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),c(this,ua).clear(),this.filterFactory.destroy(!0),od.cleanup()}}cachedPageNumber(t){if(!j0(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return c(this,su).get(e)??null}}ua=new WeakMap,vs=new WeakMap,nu=new WeakMap,su=new WeakMap,ha=new WeakMap,Kl=new WeakSet,Jh=function(t,e=null){const s=c(this,ua).get(t);if(s)return s;const r=this.messageHandler.sendWithPromise(t,e);return c(this,ua).set(t,r),r};var wr;class TD{constructor(t){w(this,wr,null);J(this,"onContinue",null);J(this,"onError",null);A(this,wr,t)}get promise(){return c(this,wr).capability.promise}cancel(t=0){c(this,wr).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=c(this,wr).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=c(this,wr);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}wr=new WeakMap;var Er,Ql;const ml=class ml{constructor({callback:t,params:e,objs:s,commonObjs:r,annotationCanvasMap:l,operatorList:u,pageIndex:h,canvasFactory:f,filterFactory:p,useRequestAnimationFrame:m=!1,pdfBug:b=!1,pageColors:v=null}){w(this,Er,null);this.callback=t,this.params=e,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=l,this.operatorListIdx=null,this.operatorList=u,this._pageIndex=h,this.canvasFactory=f,this.filterFactory=p,this._pdfBug=b,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new TD(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var h,f;if(this.cancelled)return;if(this._canvas){if(c(ml,Ql).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(ml,Ql).add(this._canvas)}this._pdfBug&&((h=globalThis.StepperManager)!=null&&h.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:r,transform:l,background:u}=this.params;this.gfx=new Cc(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:l,viewport:r,transparency:t,background:u}),this.operatorListIdx=0,this.graphicsReady=!0,(f=this.graphicsReadyCallback)==null||f.call(this)}cancel(t=null,e=0){var s,r,l;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),c(this,Er)&&(window.cancelAnimationFrame(c(this,Er)),A(this,Er,null)),c(ml,Ql).delete(this._canvas),t||(t=new Xv(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(l=(r=this.task).onError)==null||l.call(r,t)}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?A(this,Er,window.requestAnimationFrame(()=>{A(this,Er,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c(ml,Ql).delete(this._canvas),this.callback())))}};Er=new WeakMap,Ql=new WeakMap,w(ml,Ql,new WeakSet);let iv=ml;const xD="5.3.31",CD="47ad820d9";function Iw(d){return Math.floor(Math.max(0,Math.min(1,d))*255).toString(16).padStart(2,"0")}function Hh(d){return Math.max(0,Math.min(255,255*d))}class Fw{static CMYK_G([t,e,s,r]){return["G",1-Math.min(1,.3*t+.59*s+.11*e+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Hh(t),[t,t,t]}static G_HTML([t]){const e=Iw(t);return`#${e}${e}${e}`}static RGB_G([t,e,s]){return["G",.3*t+.59*e+.11*s]}static RGB_rgb(t){return t.map(Hh)}static RGB_HTML(t){return`#${t.map(Iw).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,s,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,s+r),1-Math.min(1,e+r)]}static CMYK_rgb([t,e,s,r]){return[Hh(1-Math.min(1,t+r)),Hh(1-Math.min(1,s+r)),Hh(1-Math.min(1,e+r))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,s]){const r=1-t,l=1-e,u=1-s,h=Math.min(r,l,u);return["CMYK",r,l,u,h]}}class RD{create(t,e,s=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),s||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${e}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${e}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){ee("Abstract method `_createSVG` called.")}}class em extends RD{_createSVG(t){return document.createElementNS(qs,t)}}class fT{static setupStorage(t,e,s,r,l){const u=r.getValue(e,{value:null});switch(s.name){case"textarea":if(u.value!==null&&(t.textContent=u.value),l==="print")break;t.addEventListener("input",h=>{r.setValue(e,{value:h.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(u.value===s.attributes.xfaOn?t.setAttribute("checked",!0):u.value===s.attributes.xfaOff&&t.removeAttribute("checked"),l==="print")break;t.addEventListener("change",h=>{r.setValue(e,{value:h.target.checked?h.target.getAttribute("xfaOn"):h.target.getAttribute("xfaOff")})})}else{if(u.value!==null&&t.setAttribute("value",u.value),l==="print")break;t.addEventListener("input",h=>{r.setValue(e,{value:h.target.value})})}break;case"select":if(u.value!==null){t.setAttribute("value",u.value);for(const h of s.children)h.attributes.value===u.value?h.attributes.selected=!0:h.attributes.hasOwnProperty("selected")&&delete h.attributes.selected}t.addEventListener("input",h=>{const f=h.target.options,p=f.selectedIndex===-1?"":f[f.selectedIndex].value;r.setValue(e,{value:p})});break}}static setAttributes({html:t,element:e,storage:s=null,intent:r,linkService:l}){const{attributes:u}=e,h=t instanceof HTMLAnchorElement;u.type==="radio"&&(u.name=`${u.name}-${r}`);for(const[f,p]of Object.entries(u))if(p!=null)switch(f){case"class":p.length&&t.setAttribute(f,p.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",p);break;case"style":Object.assign(t.style,p);break;case"textContent":t.textContent=p;break;default:(!h||f!=="href"&&f!=="newWindow")&&t.setAttribute(f,p)}h&&l.addLinkAttributes(t,u.href,u.newWindow),s&&u.dataId&&this.setupStorage(t,u.dataId,e,s)}static render(t){var b,v;const e=t.annotationStorage,s=t.linkService,r=t.xfaHtml,l=t.intent||"display",u=document.createElement(r.name);r.attributes&&this.setAttributes({html:u,element:r,intent:l,linkService:s});const h=l!=="richText",f=t.div;if(f.append(u),t.viewport){const S=`matrix(${t.viewport.transform.join(",")})`;f.style.transform=S}h&&f.setAttribute("class","xfaLayer xfaFont");const p=[];if(r.children.length===0){if(r.value){const S=document.createTextNode(r.value);u.append(S),h&&cd.shouldBuildText(r.name)&&p.push(S)}return{textDivs:p}}const m=[[r,-1,u]];for(;m.length>0;){const[S,x,T]=m.at(-1);if(x+1===S.children.length){m.pop();continue}const R=S.children[++m.at(-1)[1]];if(R===null)continue;const{name:M}=R;if(M==="#text"){const N=document.createTextNode(R.value);p.push(N),T.append(N);continue}const D=(b=R==null?void 0:R.attributes)!=null&&b.xmlns?document.createElementNS(R.attributes.xmlns,M):document.createElement(M);if(T.append(D),R.attributes&&this.setAttributes({html:D,element:R,storage:e,intent:l,linkService:s}),((v=R.children)==null?void 0:v.length)>0)m.push([R,-1,D]);else if(R.value){const N=document.createTextNode(R.value);h&&cd.shouldBuildText(M)&&p.push(N),D.append(N)}}for(const S of f.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))S.setAttribute("readOnly",!0);return{textDivs:p}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const qf=1e3,MD=9,Ro=new WeakSet;class Gw{static create(t){switch(t.data.annotationType){case xe.LINK:return new gT(t);case xe.TEXT:return new DD(t);case xe.WIDGET:switch(t.data.fieldType){case"Tx":return new OD(t);case"Btn":return t.data.radioButton?new yT(t):t.data.checkBox?new LD(t):new kD(t);case"Ch":return new zD(t);case"Sig":return new ND(t)}return new Do(t);case xe.POPUP:return new sv(t);case xe.FREETEXT:return new _T(t);case xe.LINE:return new BD(t);case xe.SQUARE:return new HD(t);case xe.CIRCLE:return new UD(t);case xe.POLYLINE:return new wT(t);case xe.CARET:return new FD(t);case xe.INK:return new Jv(t);case xe.POLYGON:return new ID(t);case xe.HIGHLIGHT:return new ET(t);case xe.UNDERLINE:return new GD(t);case xe.SQUIGGLY:return new jD(t);case xe.STRIKEOUT:return new qD(t);case xe.STAMP:return new TT(t);case xe.FILEATTACHMENT:return new VD(t);default:return new _e(t)}}}var Wl,au,ru,sf,nv;const aA=class aA{constructor(t,{isRenderable:e=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){w(this,sf);w(this,Wl,null);w(this,au,!1);w(this,ru,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(s)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:s}){return!!(t!=null&&t.str||e!=null&&e.str||s!=null&&s.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return aA._hasPopupData(this.data)}updateEdited(t){var s;if(!this.container)return;c(this,Wl)||A(this,Wl,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&E(this,sf,nv).call(this,e),(s=c(this,ru))==null||s.popup.updateEdited(t)}resetEdited(){var t;c(this,Wl)&&(E(this,sf,nv).call(this,c(this,Wl).rect),(t=c(this,ru))==null||t.popup.resetEdited(),A(this,Wl,null))}_createContainer(t){const{data:e,parent:{page:s,viewport:r}}=this,l=document.createElement("section");l.setAttribute("data-annotation-id",e.id),this instanceof Do||(l.tabIndex=qf);const{style:u}=l;if(u.zIndex=this.parent.zIndex++,e.alternativeText&&(l.title=e.alternativeText),e.noRotate&&l.classList.add("norotate"),!e.rect||this instanceof sv){const{rotation:T}=e;return!e.hasOwnCanvas&&T!==0&&this.setRotation(T,l),l}const{width:h,height:f}=this;if(!t&&e.borderStyle.width>0){u.borderWidth=`${e.borderStyle.width}px`;const T=e.borderStyle.horizontalCornerRadius,R=e.borderStyle.verticalCornerRadius;if(T>0||R>0){const D=`calc(${T}px * var(--total-scale-factor)) / calc(${R}px * var(--total-scale-factor))`;u.borderRadius=D}else if(this instanceof yT){const D=`calc(${h}px * var(--total-scale-factor)) / calc(${f}px * var(--total-scale-factor))`;u.borderRadius=D}switch(e.borderStyle.style){case yc.SOLID:u.borderStyle="solid";break;case yc.DASHED:u.borderStyle="dashed";break;case yc.BEVELED:St("Unimplemented border style: beveled");break;case yc.INSET:St("Unimplemented border style: inset");break;case yc.UNDERLINE:u.borderBottomStyle="solid";break}const M=e.borderColor||null;M?(A(this,au,!0),u.borderColor=dt.makeHexColor(M[0]|0,M[1]|0,M[2]|0)):u.borderWidth=0}const p=dt.normalizeRect([e.rect[0],s.view[3]-e.rect[1]+s.view[1],e.rect[2],s.view[3]-e.rect[3]+s.view[1]]),{pageWidth:m,pageHeight:b,pageX:v,pageY:S}=r.rawDims;u.left=`${100*(p[0]-v)/m}%`,u.top=`${100*(p[1]-S)/b}%`;const{rotation:x}=e;return e.hasOwnCanvas||x===0?(u.width=`${100*h/m}%`,u.height=`${100*f/b}%`):this.setRotation(x,l),l}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:r}=this.parent.viewport.rawDims;let{width:l,height:u}=this;t%180!==0&&([l,u]=[u,l]),e.style.width=`${100*l/s}%`,e.style.height=`${100*u/r}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,s,r)=>{const l=r.detail[e],u=l[0],h=l.slice(1);r.target.style[s]=Fw[`${u}_HTML`](h),this.annotationStorage.setValue(this.data.id,{[s]:Fw[`${u}_rgb`](h)})};return zt(this,"_commonActions",{display:e=>{const{display:s}=e.detail,r=s%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:s===1||s===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:s}=e.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const s=e.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,e){const s=this._commonActions;for(const r of Object.keys(e.detail)){const l=t[r]||s[r];l==null||l(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const s=this._commonActions;for(const[r,l]of Object.entries(e)){const u=s[r];if(u){const h={detail:{[r]:l},target:t};u(h),delete e[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,s,r,l]=this.data.rect.map(T=>Math.fround(T));if(t.length===8){const[T,R,M,D]=t.subarray(2,6);if(r===T&&l===R&&e===M&&s===D)return}const{style:u}=this.container;let h;if(c(this,au)){const{borderColor:T,borderWidth:R}=u;u.borderWidth=0,h=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${T}" stroke-width="${R}">`],this.container.classList.add("hasBorder")}const f=r-e,p=l-s,{svgFactory:m}=this,b=m.createElement("svg");b.classList.add("quadrilateralsContainer"),b.setAttribute("width",0),b.setAttribute("height",0);const v=m.createElement("defs");b.append(v);const S=m.createElement("clipPath"),x=`clippath_${this.data.id}`;S.setAttribute("id",x),S.setAttribute("clipPathUnits","objectBoundingBox"),v.append(S);for(let T=2,R=t.length;T<R;T+=8){const M=t[T],D=t[T+1],N=t[T+2],k=t[T+3],O=m.createElement("rect"),B=(N-e)/f,G=(l-D)/p,Q=(M-N)/f,W=(D-k)/p;O.setAttribute("x",B),O.setAttribute("y",G),O.setAttribute("width",Q),O.setAttribute("height",W),S.append(O),h==null||h.push(`<rect vector-effect="non-scaling-stroke" x="${B}" y="${G}" width="${Q}" height="${W}"/>`)}c(this,au)&&(h.push("</g></svg>')"),u.backgroundImage=h.join("")),this.container.append(b),this.container.style.clipPath=`url(#${x})`}_createPopup(){const{data:t}=this,e=A(this,ru,new sv({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){ee("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:l,id:u,exportValues:h}of r){if(l===-1||u===e)continue;const f=typeof h=="string"?h:null,p=document.querySelector(`[data-element-id="${u}"]`);if(p&&!Ro.has(p)){St(`_getElementsByName - element not allowed: ${u}`);continue}s.push({id:u,exportValue:f,domElement:p})}return s}for(const r of document.getElementsByName(t)){const{exportValue:l}=r,u=r.getAttribute("data-element-id");u!==e&&Ro.has(r)&&s.push({id:u,exportValue:l,domElement:r})}return s}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Wl=new WeakMap,au=new WeakMap,ru=new WeakMap,sf=new WeakSet,nv=function(t){const{container:{style:e},data:{rect:s,rotation:r},parent:{viewport:{rawDims:{pageWidth:l,pageHeight:u,pageX:h,pageY:f}}}}=this;s==null||s.splice(0,4,...t),e.left=`${100*(t[0]-h)/l}%`,e.top=`${100*(u-t[3]+f)/u}%`,r===0?(e.width=`${100*(t[2]-t[0])/l}%`,e.height=`${100*(t[3]-t[1])/u}%`):this.setRotation(r)};let _e=aA;var cn,dl,pT,mT;class gT extends _e{constructor(e,s=null){super(e,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});w(this,cn);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:s}=this,r=document.createElement("a");r.setAttribute("data-element-id",e.id);let l=!1;return e.url?(s.addLinkAttributes(r,e.url,e.newWindow),l=!0):e.action?(this._bindNamedAction(r,e.action),l=!0):e.attachment?(E(this,cn,pT).call(this,r,e.attachment,e.attachmentDest),l=!0):e.setOCGState?(E(this,cn,mT).call(this,r,e.setOCGState),l=!0):e.dest?(this._bindLink(r,e.dest),l=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,e),l=!0),e.resetForm?(this._bindResetFormAction(r,e.resetForm),l=!0):this.isTooltipOnly&&!l&&(this._bindLink(r,""),l=!0)),this.container.classList.add("linkAnnotation"),l&&this.container.append(r),this.container}_bindLink(e,s){e.href=this.linkService.getDestinationHash(s),e.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&E(this,cn,dl).call(this)}_bindNamedAction(e,s){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(s),!1),E(this,cn,dl).call(this)}_bindJSAction(e,s){e.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const l of Object.keys(s.actions)){const u=r.get(l);u&&(e[u]=()=>{var h;return(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:l}}),!1})}e.onclick||(e.onclick=()=>!1),E(this,cn,dl).call(this)}_bindResetFormAction(e,s){const r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),E(this,cn,dl).call(this),!this._fieldObjects){St('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(e.onclick=()=>!1);return}e.onclick=()=>{var b;r==null||r();const{fields:l,refs:u,include:h}=s,f=[];if(l.length!==0||u.length!==0){const v=new Set(u);for(const S of l){const x=this._fieldObjects[S]||[];for(const{id:T}of x)v.add(T)}for(const S of Object.values(this._fieldObjects))for(const x of S)v.has(x.id)===h&&f.push(x)}else for(const v of Object.values(this._fieldObjects))f.push(...v);const p=this.annotationStorage,m=[];for(const v of f){const{id:S}=v;switch(m.push(S),v.type){case"text":{const T=v.defaultValue||"";p.setValue(S,{value:T});break}case"checkbox":case"radiobutton":{const T=v.defaultValue===v.exportValues;p.setValue(S,{value:T});break}case"combobox":case"listbox":{const T=v.defaultValue||"";p.setValue(S,{value:T});break}default:continue}const x=document.querySelector(`[data-element-id="${S}"]`);if(x){if(!Ro.has(x)){St(`_bindResetFormAction - element not allowed: ${S}`);continue}}else continue;x.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}})),!1}}}cn=new WeakSet,dl=function(){this.container.setAttribute("data-internal-link","")},pT=function(e,s,r=null){e.href=this.linkService.getAnchorUrl(""),s.description&&(e.title=s.description),e.onclick=()=>{var l;return(l=this.downloadManager)==null||l.openOrDownloadData(s.content,s.filename,r),!1},E(this,cn,dl).call(this)},mT=function(e,s){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(s),!1),E(this,cn,dl).call(this)};class DD extends _e{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Do extends _e{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return ai.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,s,r,l){s.includes("mouse")?t.addEventListener(s,u=>{var h;(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:l(u),shift:u.shiftKey,modifier:this._getKeyModifier(u)}})}):t.addEventListener(s,u=>{var h;if(s==="blur"){if(!e.focused||!u.relatedTarget)return;e.focused=!1}else if(s==="focus"){if(e.focused)return;e.focused=!0}l&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:l(u)}}))})}_setEventListeners(t,e,s,r){var l,u,h;for(const[f,p]of s)(p==="Action"||(l=this.data.actions)!=null&&l[p])&&((p==="Focus"||p==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,f,p,r),p==="Focus"&&!((u=this.data.actions)!=null&&u.Blur)?this._setEventListener(t,e,"blur","Blur",null):p==="Blur"&&!((h=this.data.actions)!=null&&h.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":dt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||MD,l=t.style;let u;const h=2,f=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-h),m=Math.round(p/(l0*r))||1,b=p/m;u=Math.min(r,f(b/l0))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-h);u=Math.min(r,f(p/l0))}l.fontSize=`calc(${u}px * var(--total-scale-factor))`,l.color=dt.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(l.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class OD extends Do{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,s,r){const l=this.annotationStorage;for(const u of this._getElementsByName(t.name,t.id))u.domElement&&(u.domElement[e]=s),l.setValue(u.id,{[r]:s})}render(){var r,l;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const u=t.getValue(e,{value:this.data.fieldValue});let h=u.value||"";const f=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;f&&h.length>f&&(h=h.slice(0,f));let p=u.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;p&&this.data.comb&&(p=p.replaceAll(/\s+/g,""));const m={userValue:h,formattedValue:p,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=p??h,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",p??h),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Ro.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=qf,this._setRequired(s,this.data.required),f&&(s.maxLength=f),s.addEventListener("input",v=>{t.setValue(e,{value:v.target.value}),this.setPropertyOnSiblings(s,"value",v.target.value,"value"),m.formattedValue=null}),s.addEventListener("resetform",v=>{const S=this.data.defaultFieldValue??"";s.value=m.userValue=S,m.formattedValue=null});let b=v=>{const{formattedValue:S}=m;S!=null&&(v.target.value=S),v.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",S=>{var T;if(m.focused)return;const{target:x}=S;m.userValue&&(x.value=m.userValue),m.lastCommittedValue=x.value,m.commitKey=1,(T=this.data.actions)!=null&&T.Focus||(m.focused=!0)}),s.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const x={value(T){m.userValue=T.detail.value??"",t.setValue(e,{value:m.userValue.toString()}),T.target.value=m.userValue},formattedValue(T){const{formattedValue:R}=T.detail;m.formattedValue=R,R!=null&&T.target!==document.activeElement&&(T.target.value=R),t.setValue(e,{formattedValue:R})},selRange(T){T.target.setSelectionRange(...T.detail.selRange)},charLimit:T=>{var N;const{charLimit:R}=T.detail,{target:M}=T;if(R===0){M.removeAttribute("maxLength");return}M.setAttribute("maxLength",R);let D=m.userValue;!D||D.length<=R||(D=D.slice(0,R),M.value=m.userValue=D,t.setValue(e,{value:D}),(N=this.linkService.eventBus)==null||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:D,willCommit:!0,commitKey:1,selStart:M.selectionStart,selEnd:M.selectionEnd}}))}};this._dispatchEventFromSandbox(x,S)}),s.addEventListener("keydown",S=>{var R;m.commitKey=1;let x=-1;if(S.key==="Escape"?x=0:S.key==="Enter"&&!this.data.multiLine?x=2:S.key==="Tab"&&(m.commitKey=3),x===-1)return;const{value:T}=S.target;m.lastCommittedValue!==T&&(m.lastCommittedValue=T,m.userValue=T,(R=this.linkService.eventBus)==null||R.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,willCommit:!0,commitKey:x,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const v=b;b=null,s.addEventListener("blur",S=>{var T,R;if(!m.focused||!S.relatedTarget)return;(T=this.data.actions)!=null&&T.Blur||(m.focused=!1);const{value:x}=S.target;m.userValue=x,m.lastCommittedValue!==x&&((R=this.linkService.eventBus)==null||R.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,willCommit:!0,commitKey:m.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}})),v(S)}),(l=this.data.actions)!=null&&l.Keystroke&&s.addEventListener("beforeinput",S=>{var O;m.lastCommittedValue=null;const{data:x,target:T}=S,{value:R,selectionStart:M,selectionEnd:D}=T;let N=M,k=D;switch(S.inputType){case"deleteWordBackward":{const B=R.substring(0,M).match(/\w*[^\w]*$/);B&&(N-=B[0].length);break}case"deleteWordForward":{const B=R.substring(M).match(/^[^\w]*\w*/);B&&(k+=B[0].length);break}case"deleteContentBackward":M===D&&(N-=1);break;case"deleteContentForward":M===D&&(k+=1);break}S.preventDefault(),(O=this.linkService.eventBus)==null||O.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:R,change:x||"",willCommit:!1,selStart:N,selEnd:k}})}),this._setEventListeners(s,m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(b&&s.addEventListener("blur",b),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/f;s.classList.add("comb"),s.style.letterSpacing=`calc(${S}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class ND extends Do{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class LD extends Do{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,s=e.id;let r=t.getValue(s,{value:e.exportValue===e.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(s,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const l=document.createElement("input");return Ro.add(l),l.setAttribute("data-element-id",s),l.disabled=e.readOnly,this._setRequired(l,this.data.required),l.type="checkbox",l.name=e.fieldName,r&&l.setAttribute("checked",!0),l.setAttribute("exportValue",e.exportValue),l.tabIndex=qf,l.addEventListener("change",u=>{const{name:h,checked:f}=u.target;for(const p of this._getElementsByName(h,s)){const m=f&&p.exportValue===e.exportValue;p.domElement&&(p.domElement.checked=m),t.setValue(p.id,{value:m})}t.setValue(s,{value:f})}),l.addEventListener("resetform",u=>{const h=e.defaultFieldValue||"Off";u.target.checked=h===e.exportValue}),this.enableScripting&&this.hasJSActions&&(l.addEventListener("updatefromsandbox",u=>{const h={value(f){f.target.checked=f.detail.value!=="Off",t.setValue(s,{value:f.target.checked})}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)),this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class yT extends Do{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,s=e.id;let r=t.getValue(s,{value:e.fieldValue===e.buttonValue}).value;if(typeof r=="string"&&(r=r!==e.buttonValue,t.setValue(s,{value:r})),r)for(const u of this._getElementsByName(e.fieldName,s))t.setValue(u.id,{value:!1});const l=document.createElement("input");if(Ro.add(l),l.setAttribute("data-element-id",s),l.disabled=e.readOnly,this._setRequired(l,this.data.required),l.type="radio",l.name=e.fieldName,r&&l.setAttribute("checked",!0),l.tabIndex=qf,l.addEventListener("change",u=>{const{name:h,checked:f}=u.target;for(const p of this._getElementsByName(h,s))t.setValue(p.id,{value:!1});t.setValue(s,{value:f})}),l.addEventListener("resetform",u=>{const h=e.defaultFieldValue;u.target.checked=h!=null&&h===e.buttonValue}),this.enableScripting&&this.hasJSActions){const u=e.buttonValue;l.addEventListener("updatefromsandbox",h=>{const f={value:p=>{const m=u===p.detail.value;for(const b of this._getElementsByName(p.target.name)){const v=m&&b.id===s;b.domElement&&(b.domElement.checked=v),t.setValue(b.id,{value:v})}}};this._dispatchEventFromSandbox(f,h)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.checked)}return this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class kD extends gT{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class zD extends Do{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,s=t.getValue(e,{value:this.data.fieldValue}),r=document.createElement("select");Ro.add(r),r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=qf;let l=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",m=>{const b=this.data.defaultFieldValue;for(const v of r.options)v.selected=v.value===b});for(const m of this.data.options){const b=document.createElement("option");b.textContent=m.displayValue,b.value=m.exportValue,s.value.includes(m.exportValue)&&(b.setAttribute("selected",!0),l=!1),r.append(b)}let u=null;if(l){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),r.prepend(m),u=()=>{m.remove(),r.removeEventListener("input",u),u=null},r.addEventListener("input",u)}const h=m=>{const b=m?"value":"textContent",{options:v,multiple:S}=r;return S?Array.prototype.filter.call(v,x=>x.selected).map(x=>x[b]):v.selectedIndex===-1?null:v[v.selectedIndex][b]};let f=h(!1);const p=m=>{const b=m.target.options;return Array.prototype.map.call(b,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",m=>{const b={value(v){u==null||u();const S=v.detail.value,x=new Set(Array.isArray(S)?S:[S]);for(const T of r.options)T.selected=x.has(T.value);t.setValue(e,{value:h(!0)}),f=h(!1)},multipleSelection(v){r.multiple=!0},remove(v){const S=r.options,x=v.detail.remove;S[x].selected=!1,r.remove(x),S.length>0&&Array.prototype.findIndex.call(S,R=>R.selected)===-1&&(S[0].selected=!0),t.setValue(e,{value:h(!0),items:p(v)}),f=h(!1)},clear(v){for(;r.length!==0;)r.remove(0);t.setValue(e,{value:null,items:[]}),f=h(!1)},insert(v){const{index:S,displayValue:x,exportValue:T}=v.detail.insert,R=r.children[S],M=document.createElement("option");M.textContent=x,M.value=T,R?R.before(M):r.append(M),t.setValue(e,{value:h(!0),items:p(v)}),f=h(!1)},items(v){const{items:S}=v.detail;for(;r.length!==0;)r.remove(0);for(const x of S){const{displayValue:T,exportValue:R}=x,M=document.createElement("option");M.textContent=T,M.value=R,r.append(M)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(e,{value:h(!0),items:p(v)}),f=h(!1)},indices(v){const S=new Set(v.detail.indices);for(const x of v.target.options)x.selected=S.has(x.index);t.setValue(e,{value:h(!0)}),f=h(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(b,m)}),r.addEventListener("input",m=>{var S;const b=h(!0),v=h(!1);t.setValue(e,{value:b}),m.preventDefault(),(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:f,change:v,changeEx:b,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):r.addEventListener("input",function(m){t.setValue(e,{value:h(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class sv extends _e{constructor(t){const{data:e,elements:s}=t;super(t,{isRenderable:_e._hasPopupData(e)}),this.elements=s,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new PD({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const s of this.elements)s.popup=t,s.container.ariaHasPopup="dialog",e.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(s=>`${Vv}${s}`).join(",")),this.container}}var lu,bm,vm,ou,cu,ye,da,uu,af,rf,hu,fa,Fn,ga,lf,pa,of,Zl,Jl,ie,Mp,av,bT,vT,AT,ST,Dp,Op,rv;class PD{constructor({container:t,color:e,elements:s,titleObj:r,modificationDate:l,contentsObj:u,richText:h,parent:f,rect:p,parentRect:m,open:b}){w(this,ie);w(this,lu,E(this,ie,AT).bind(this));w(this,bm,E(this,ie,rv).bind(this));w(this,vm,E(this,ie,Op).bind(this));w(this,ou,E(this,ie,Dp).bind(this));w(this,cu,null);w(this,ye,null);w(this,da,null);w(this,uu,null);w(this,af,null);w(this,rf,null);w(this,hu,null);w(this,fa,!1);w(this,Fn,null);w(this,ga,null);w(this,lf,null);w(this,pa,null);w(this,of,null);w(this,Zl,null);w(this,Jl,!1);var v;A(this,ye,t),A(this,of,r),A(this,da,u),A(this,pa,h),A(this,rf,f),A(this,cu,e),A(this,lf,p),A(this,hu,m),A(this,af,s),A(this,uu,$v.toDateObject(l)),this.trigger=s.flatMap(S=>S.getElementsToTriggerPopup());for(const S of this.trigger)S.addEventListener("click",c(this,ou)),S.addEventListener("mouseenter",c(this,vm)),S.addEventListener("mouseleave",c(this,bm)),S.classList.add("popupTriggerArea");for(const S of s)(v=S.container)==null||v.addEventListener("keydown",c(this,lu));c(this,ye).hidden=!0,b&&E(this,ie,Dp).call(this)}render(){if(c(this,Fn))return;const t=A(this,Fn,document.createElement("div"));if(t.className="popup",c(this,cu)){const l=t.style.outlineColor=dt.makeHexColor(...c(this,cu));t.style.backgroundColor=`color-mix(in srgb, ${l} 30%, white)`}const e=document.createElement("span");e.className="header";const s=document.createElement("h1");if(e.append(s),{dir:s.dir,str:s.textContent}=c(this,of),t.append(e),c(this,uu)){const l=document.createElement("span");l.classList.add("popupDate"),l.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),l.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(this,uu).valueOf()})),e.append(l)}const r=c(this,ie,Mp);if(r)fT.render({xfaHtml:r,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const l=this._formatContents(c(this,da));t.append(l)}c(this,ye).append(t)}_formatContents({str:t,dir:e}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=e;const r=t.split(/(?:\r\n?|\n)/);for(let l=0,u=r.length;l<u;++l){const h=r[l];s.append(document.createTextNode(h)),l<u-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:t,popupContent:e}){var s;c(this,Zl)||A(this,Zl,{contentsObj:c(this,da),richText:c(this,pa)}),t&&A(this,ga,null),e&&(A(this,pa,E(this,ie,vT).call(this,e)),A(this,da,null)),(s=c(this,Fn))==null||s.remove(),A(this,Fn,null)}resetEdited(){var t;c(this,Zl)&&({contentsObj:mi(this,da)._,richText:mi(this,pa)._}=c(this,Zl),A(this,Zl,null),(t=c(this,Fn))==null||t.remove(),A(this,Fn,null),A(this,ga,null))}forceHide(){A(this,Jl,this.isVisible),c(this,Jl)&&(c(this,ye).hidden=!0)}maybeShow(){c(this,Jl)&&(c(this,Fn)||E(this,ie,Op).call(this),A(this,Jl,!1),c(this,ye).hidden=!1)}get isVisible(){return c(this,ye).hidden===!1}}lu=new WeakMap,bm=new WeakMap,vm=new WeakMap,ou=new WeakMap,cu=new WeakMap,ye=new WeakMap,da=new WeakMap,uu=new WeakMap,af=new WeakMap,rf=new WeakMap,hu=new WeakMap,fa=new WeakMap,Fn=new WeakMap,ga=new WeakMap,lf=new WeakMap,pa=new WeakMap,of=new WeakMap,Zl=new WeakMap,Jl=new WeakMap,ie=new WeakSet,Mp=function(){const t=c(this,pa),e=c(this,da);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&c(this,pa).html||null},av=function(){var t,e,s;return((s=(e=(t=c(this,ie,Mp))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:s.fontSize)||0},bT=function(){var t,e,s;return((s=(e=(t=c(this,ie,Mp))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:s.color)||null},vT=function(t){const e=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},r={style:{color:c(this,ie,bT),fontSize:c(this,ie,av)?`calc(${c(this,ie,av)}px * var(--total-scale-factor))`:""}};for(const l of t.split(`
`))e.push({name:"span",value:l,attributes:r});return s},AT=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&c(this,fa))&&E(this,ie,Dp).call(this)},ST=function(){if(c(this,ga)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:s,pageX:r,pageY:l}}}=c(this,rf);let u=!!c(this,hu),h=u?c(this,hu):c(this,lf);for(const x of c(this,af))if(!h||dt.intersect(x.data.rect,h)!==null){h=x.data.rect,u=!0;break}const f=dt.normalizeRect([h[0],t[3]-h[1]+t[1],h[2],t[3]-h[3]+t[1]]),m=u?h[2]-h[0]+5:0,b=f[0]+m,v=f[1];A(this,ga,[100*(b-r)/e,100*(v-l)/s]);const{style:S}=c(this,ye);S.left=`${c(this,ga)[0]}%`,S.top=`${c(this,ga)[1]}%`},Dp=function(){A(this,fa,!c(this,fa)),c(this,fa)?(E(this,ie,Op).call(this),c(this,ye).addEventListener("click",c(this,ou)),c(this,ye).addEventListener("keydown",c(this,lu))):(E(this,ie,rv).call(this),c(this,ye).removeEventListener("click",c(this,ou)),c(this,ye).removeEventListener("keydown",c(this,lu)))},Op=function(){c(this,Fn)||this.render(),this.isVisible?c(this,fa)&&c(this,ye).classList.add("focused"):(E(this,ie,ST).call(this),c(this,ye).hidden=!1,c(this,ye).style.zIndex=parseInt(c(this,ye).style.zIndex)+1e3)},rv=function(){c(this,ye).classList.remove("focused"),!(c(this,fa)||!this.isVisible)&&(c(this,ye).hidden=!0,c(this,ye).style.zIndex=parseInt(c(this,ye).style.zIndex)-1e3)};class _T extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=At.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const s=document.createElement("span");s.textContent=e,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var cf;class BD extends _e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,cf,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:s,height:r}=this,l=this.svgFactory.create(s,r,!0),u=A(this,cf,this.svgFactory.createElement("svg:line"));return u.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),u.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),u.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),u.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),u.setAttribute("stroke-width",e.borderStyle.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),l.append(u),this.container.append(l),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,cf)}addHighlightArea(){this.container.classList.add("highlightArea")}}cf=new WeakMap;var uf;class HD extends _e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,uf,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:s,height:r}=this,l=this.svgFactory.create(s,r,!0),u=e.borderStyle.width,h=A(this,uf,this.svgFactory.createElement("svg:rect"));return h.setAttribute("x",u/2),h.setAttribute("y",u/2),h.setAttribute("width",s-u),h.setAttribute("height",r-u),h.setAttribute("stroke-width",u||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),l.append(h),this.container.append(l),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,uf)}addHighlightArea(){this.container.classList.add("highlightArea")}}uf=new WeakMap;var hf;class UD extends _e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,hf,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:s,height:r}=this,l=this.svgFactory.create(s,r,!0),u=e.borderStyle.width,h=A(this,hf,this.svgFactory.createElement("svg:ellipse"));return h.setAttribute("cx",s/2),h.setAttribute("cy",r/2),h.setAttribute("rx",s/2-u/2),h.setAttribute("ry",r/2-u/2),h.setAttribute("stroke-width",u||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),l.append(h),this.container.append(l),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,hf)}addHighlightArea(){this.container.classList.add("highlightArea")}}hf=new WeakMap;var df;class wT extends _e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,df,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:s,borderStyle:r,popupRef:l},width:u,height:h}=this;if(!s)return this.container;const f=this.svgFactory.create(u,h,!0);let p=[];for(let b=0,v=s.length;b<v;b+=2){const S=s[b]-e[0],x=e[3]-s[b+1];p.push(`${S},${x}`)}p=p.join(" ");const m=A(this,df,this.svgFactory.createElement(this.svgElementName));return m.setAttribute("points",p),m.setAttribute("stroke-width",r.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),f.append(m),this.container.append(f),!l&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,df)}addHighlightArea(){this.container.classList.add("highlightArea")}}df=new WeakMap;class ID extends wT{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class FD extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var ff,to,gf,lv;class Jv extends _e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,gf);w(this,ff,null);w(this,to,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?At.HIGHLIGHT:At.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:s,inkLists:r,borderStyle:l,popupRef:u}}=this,{transform:h,width:f,height:p}=E(this,gf,lv).call(this,s,e),m=this.svgFactory.create(f,p,!0),b=A(this,ff,this.svgFactory.createElement("svg:g"));m.append(b),b.setAttribute("stroke-width",l.width||1),b.setAttribute("stroke-linecap","round"),b.setAttribute("stroke-linejoin","round"),b.setAttribute("stroke-miterlimit",10),b.setAttribute("stroke","transparent"),b.setAttribute("fill","transparent"),b.setAttribute("transform",h);for(let v=0,S=r.length;v<S;v++){const x=this.svgFactory.createElement(this.svgElementName);c(this,to).push(x),x.setAttribute("points",r[v].join(",")),b.append(x)}return!u&&this.hasPopupData&&this._createPopup(),this.container.append(m),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:s,points:r,rect:l}=e,u=c(this,ff);if(s>=0&&u.setAttribute("stroke-width",s||1),r)for(let h=0,f=c(this,to).length;h<f;h++)c(this,to)[h].setAttribute("points",r[h].join(","));if(l){const{transform:h,width:f,height:p}=E(this,gf,lv).call(this,this.data.rotation,l);u.parentElement.setAttribute("viewBox",`0 0 ${f} ${p}`),u.setAttribute("transform",h)}}getElementsToTriggerPopup(){return c(this,to)}addHighlightArea(){this.container.classList.add("highlightArea")}}ff=new WeakMap,to=new WeakMap,gf=new WeakSet,lv=function(e,s){switch(e){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class ET extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=At.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class GD extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class jD extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class qD extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class TT extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=At.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var pf,mf,ov;class VD extends _e{constructor(e){var r;super(e,{isRenderable:!0});w(this,mf);w(this,pf,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:s}=this;let r;s.hasAppearance||s.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),r.addEventListener("dblclick",E(this,mf,ov).bind(this)),A(this,pf,r);const{isMac:l}=ai.platform;return e.addEventListener("keydown",u=>{u.key==="Enter"&&(l?u.metaKey:u.ctrlKey)&&E(this,mf,ov).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),e.append(r),e}getElementsToTriggerPopup(){return c(this,pf)}addHighlightArea(){this.container.classList.add("highlightArea")}}pf=new WeakMap,mf=new WeakSet,ov=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var yf,eo,Tr,bf,Vr,uv,hv;const rA=class rA{constructor({div:t,accessibilityManager:e,annotationCanvasMap:s,annotationEditorUIManager:r,page:l,viewport:u,structTreeLayer:h}){w(this,Vr);w(this,yf,null);w(this,eo,null);w(this,Tr,new Map);w(this,bf,null);this.div=t,A(this,yf,e),A(this,eo,s),A(this,bf,h||null),this.page=l,this.viewport=u,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return c(this,Tr).size>0}async render(t){var u;const{annotations:e}=t,s=this.div;xo(s,this.viewport);const r=new Map,l={data:null,layer:s,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new em,annotationStorage:t.annotationStorage||new Qv,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const h of e){if(h.noHTML)continue;const f=h.annotationType===xe.POPUP;if(f){const b=r.get(h.id);if(!b)continue;l.elements=b}else if(h.rect[2]===h.rect[0]||h.rect[3]===h.rect[1])continue;l.data=h;const p=Gw.create(l);if(!p.isRenderable)continue;if(!f&&h.popupRef){const b=r.get(h.popupRef);b?b.push(p):r.set(h.popupRef,[p])}const m=p.render();h.hidden&&(m.style.visibility="hidden"),await E(this,Vr,uv).call(this,m,h.id),p._isEditable&&(c(this,Tr).set(p.data.id,p),(u=this._annotationEditorUIManager)==null||u.renderAnnotationElement(p))}E(this,Vr,hv).call(this)}async addLinkAnnotations(t,e){const s={data:null,layer:this.div,linkService:e,svgFactory:new em,parent:this};for(const r of t){r.borderStyle||(r.borderStyle=rA._defaultBorderStyle),s.data=r;const l=Gw.create(s);if(!l.isRenderable)continue;const u=l.render();await E(this,Vr,uv).call(this,u,r.id)}}update({viewport:t}){const e=this.div;this.viewport=t,xo(e,{rotation:t.rotation}),E(this,Vr,hv).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(c(this,Tr).values())}getEditableAnnotation(t){return c(this,Tr).get(t)}static get _defaultBorderStyle(){return zt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:yc.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};yf=new WeakMap,eo=new WeakMap,Tr=new WeakMap,bf=new WeakMap,Vr=new WeakSet,uv=async function(t,e){var u,h;const s=t.firstChild||t,r=s.id=`${Vv}${e}`,l=await((u=c(this,bf))==null?void 0:u.getAriaAttributes(r));if(l)for(const[f,p]of l)s.setAttribute(f,p);this.div.append(t),(h=c(this,yf))==null||h.moveElementInDOM(this.div,t,s,!1)},hv=function(){var e;if(!c(this,eo))return;const t=this.div;for(const[s,r]of c(this,eo)){const l=t.querySelector(`[data-annotation-id="${s}"]`);if(!l)continue;r.className="annotationContent";const{firstChild:u}=l;u?u.nodeName==="CANVAS"?u.replaceWith(r):u.classList.contains("annotationContent")?u.after(r):u.before(r):l.append(r);const h=c(this,Tr).get(s);h&&(h._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(s,l.id,r),h._hasNoCanvas=!1):h.canvas=r)}c(this,eo).clear()};let cv=rA;const fp=/\r\n?|\n/g;var Gn,Wi,vf,io,Zi,Me,xT,CT,RT,Np,Ca,Lp,kp,MT,fv,DT;const ae=class ae extends re{constructor(e){super({...e,name:"freeTextEditor"});w(this,Me);w(this,Gn);w(this,Wi,"");w(this,vf,`${this.id}-editor`);w(this,io,null);w(this,Zi);A(this,Gn,e.color||ae._defaultColor||re._defaultLineColor),A(this,Zi,e.fontSize||ae._defaultFontSize)}static get _keyboardManager(){const e=ae.prototype,s=u=>u.isEmpty(),r=Co.TRANSLATE_SMALL,l=Co.TRANSLATE_BIG;return zt(this,"_keyboardManager",new Gf([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-l,0],checker:s}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[r,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[l,0],checker:s}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-l],checker:s}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,r],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,l],checker:s}]]))}static initialize(e,s){re.initialize(e,s);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,s){switch(e){case Pt.FREETEXT_SIZE:ae._defaultFontSize=s;break;case Pt.FREETEXT_COLOR:ae._defaultColor=s;break}}updateParams(e,s){switch(e){case Pt.FREETEXT_SIZE:E(this,Me,xT).call(this,s);break;case Pt.FREETEXT_COLOR:E(this,Me,CT).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[Pt.FREETEXT_SIZE,ae._defaultFontSize],[Pt.FREETEXT_COLOR,ae._defaultColor||re._defaultLineColor]]}get propertiesToUpdate(){return[[Pt.FREETEXT_SIZE,c(this,Zi)],[Pt.FREETEXT_COLOR,c(this,Gn)]]}_translateEmpty(e,s){this._uiManager.translateSelectedEditors(e,s,!0)}getInitialTranslation(){const e=this.parentScale;return[-ae._internalPadding*e,-(ae._internalPadding+c(this,Zi))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),A(this,io,new AbortController);const e=this._uiManager.combinedSignal(c(this,io));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,vf)),this._isDraggable=!0,(e=c(this,io))==null||e.abort(),A(this,io,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var s;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=c(this,Wi),s=A(this,Wi,E(this,Me,RT).call(this).trimEnd());if(e===s)return;const r=l=>{if(A(this,Wi,l),!l){this.remove();return}E(this,Me,kp).call(this),this._uiManager.rebuild(this),E(this,Me,Np).call(this)};this.addCommands({cmd:()=>{r(s)},undo:()=>{r(e)},mustExec:!1}),E(this,Me,Np).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){ae._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,s;(this._isCopy||this.annotationElementId)&&(e=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,vf)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${c(this,Zi)}px * var(--total-scale-factor))`,r.color=c(this,Gn),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[l,u]=this.parentDimensions;if(this.annotationElementId){const{position:h}=this._initialData;let[f,p]=this.getInitialTranslation();[f,p]=this.pageTranslationToScreen(f,p);const[m,b]=this.pageDimensions,[v,S]=this.pageTranslation;let x,T;switch(this.rotation){case 0:x=e+(h[0]-v)/m,T=s+this.height-(h[1]-S)/b;break;case 90:x=e+(h[0]-v)/m,T=s-(h[1]-S)/b,[f,p]=[p,-f];break;case 180:x=e-this.width+(h[0]-v)/m,T=s-(h[1]-S)/b,[f,p]=[-f,-p];break;case 270:x=e+(h[0]-v-this.height*b)/m,T=s+(h[1]-S-this.width*m)/b,[f,p]=[-p,f];break}this.setAt(x*l,T*u,f,p)}else this._moveAfterPaste(e,s);E(this,Me,kp).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var x,T,R;const s=e.clipboardData||window.clipboardData,{types:r}=s;if(r.length===1&&r[0]==="text/plain")return;e.preventDefault();const l=E(x=ae,Ca,fv).call(x,s.getData("text")||"").replaceAll(fp,`
`);if(!l)return;const u=window.getSelection();if(!u.rangeCount)return;this.editorDiv.normalize(),u.deleteFromDocument();const h=u.getRangeAt(0);if(!l.includes(`
`)){h.insertNode(document.createTextNode(l)),this.editorDiv.normalize(),u.collapseToStart();return}const{startContainer:f,startOffset:p}=h,m=[],b=[];if(f.nodeType===Node.TEXT_NODE){const M=f.parentElement;if(b.push(f.nodeValue.slice(p).replaceAll(fp,"")),M!==this.editorDiv){let D=m;for(const N of this.editorDiv.childNodes){if(N===M){D=b;continue}D.push(E(T=ae,Ca,Lp).call(T,N))}}m.push(f.nodeValue.slice(0,p).replaceAll(fp,""))}else if(f===this.editorDiv){let M=m,D=0;for(const N of this.editorDiv.childNodes)D++===p&&(M=b),M.push(E(R=ae,Ca,Lp).call(R,N))}A(this,Wi,`${m.join(`
`)}${l}${b.join(`
`)}`),E(this,Me,kp).call(this);const v=new Range;let S=Math.sumPrecise(m.map(M=>M.length));for(const{firstChild:M}of this.editorDiv.childNodes)if(M.nodeType===Node.TEXT_NODE){const D=M.nodeValue.length;if(S<=D){v.setStart(M,S),v.setEnd(M,S);break}S-=D}u.removeAllRanges(),u.addRange(v)}get contentDiv(){return this.editorDiv}static async deserialize(e,s,r){var h;let l=null;if(e instanceof _T){const{data:{defaultAppearanceData:{fontSize:f,fontColor:p},rect:m,rotation:b,id:v,popupRef:S},textContent:x,textPosition:T,parent:{page:{pageNumber:R}}}=e;if(!x||x.length===0)return null;l=e={annotationType:At.FREETEXT,color:Array.from(p),fontSize:f,value:x.join(`
`),position:T,pageIndex:R-1,rect:m.slice(0),rotation:b,id:v,deleted:!1,popupRef:S}}const u=await super.deserialize(e,s,r);return A(u,Zi,e.fontSize),A(u,Gn,dt.makeHexColor(...e.color)),A(u,Wi,E(h=ae,Ca,fv).call(h,e.value)),u.annotationElementId=e.id||null,u._initialData=l,u}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=ae._internalPadding*this.parentScale,r=this.getRect(s,s),l=re._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:c(this,Gn)),u={annotationType:At.FREETEXT,color:l,fontSize:c(this,Zi),value:E(this,Me,MT).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(u.isCopy=!0,u):this.annotationElementId&&!E(this,Me,DT).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(e){const s=super.renderAnnotationElement(e);if(this.deleted)return s;const{style:r}=s;r.fontSize=`calc(${c(this,Zi)}px * var(--total-scale-factor))`,r.color=c(this,Gn),s.replaceChildren();for(const u of c(this,Wi).split(`
`)){const h=document.createElement("div");h.append(u?document.createTextNode(u):document.createElement("br")),s.append(h)}const l=ae._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(l,l),popupContent:c(this,Wi)}),s}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Gn=new WeakMap,Wi=new WeakMap,vf=new WeakMap,io=new WeakMap,Zi=new WeakMap,Me=new WeakSet,xT=function(e){const s=l=>{this.editorDiv.style.fontSize=`calc(${l}px * var(--total-scale-factor))`,this.translate(0,-(l-c(this,Zi))*this.parentScale),A(this,Zi,l),E(this,Me,Np).call(this)},r=c(this,Zi);this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Pt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},CT=function(e){const s=l=>{A(this,Gn,this.editorDiv.style.color=l)},r=c(this,Gn);this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Pt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},RT=function(){var r;const e=[];this.editorDiv.normalize();let s=null;for(const l of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&l.nodeName==="BR"||(e.push(E(r=ae,Ca,Lp).call(r,l)),s=l);return e.join(`
`)},Np=function(){const[e,s]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:l,div:u}=this,h=u.style.display,f=u.classList.contains("hidden");u.classList.remove("hidden"),u.style.display="hidden",l.div.append(this.div),r=u.getBoundingClientRect(),u.remove(),u.style.display=h,u.classList.toggle("hidden",f)}this.rotation%180===this.parentRotation%180?(this.width=r.width/e,this.height=r.height/s):(this.width=r.height/e,this.height=r.width/s),this.fixAndSetPosition()},Ca=new WeakSet,Lp=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(fp,"")},kp=function(){if(this.editorDiv.replaceChildren(),!!c(this,Wi))for(const e of c(this,Wi).split(`
`)){const s=document.createElement("div");s.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(s)}},MT=function(){return c(this,Wi).replaceAll(" "," ")},fv=function(e){return e.replaceAll(" "," ")},DT=function(e){const{value:s,fontSize:r,color:l,pageIndex:u}=this._initialData;return this._hasBeenMoved||e.value!==s||e.fontSize!==r||e.color.some((h,f)=>h!==l[f])||e.pageIndex!==u},w(ae,Ca),J(ae,"_freeTextDefaultContent",""),J(ae,"_internalPadding",0),J(ae,"_defaultColor",null),J(ae,"_defaultFontSize",10),J(ae,"_type","freetext"),J(ae,"_editorType",At.FREETEXT);let dv=ae;class at{toSVGPath(){ee("Abstract method `toSVGPath` must be implemented.")}get box(){ee("Abstract getter `box` must be implemented.")}serialize(t,e){ee("Abstract method `serialize` must be implemented.")}static _rescale(t,e,s,r,l,u){u||(u=new Float32Array(t.length));for(let h=0,f=t.length;h<f;h+=2)u[h]=e+t[h]*r,u[h+1]=s+t[h+1]*l;return u}static _rescaleAndSwap(t,e,s,r,l,u){u||(u=new Float32Array(t.length));for(let h=0,f=t.length;h<f;h+=2)u[h]=e+t[h+1]*r,u[h+1]=s+t[h]*l;return u}static _translate(t,e,s,r){r||(r=new Float32Array(t.length));for(let l=0,u=t.length;l<u;l+=2)r[l]=e+t[l],r[l+1]=s+t[l+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,s,r,l){switch(l){case 90:return[1-e/s,t/r];case 180:return[1-t/s,1-e/r];case 270:return[e/s,1-t/r];default:return[t/s,e/r]}}static _normalizePagePoint(t,e,s){switch(s){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,s,r,l,u){return[(t+5*s)/6,(e+5*r)/6,(5*s+l)/6,(5*r+u)/6,(s+l)/2,(r+u)/2]}}J(at,"PRECISION",1e-4);var Ji,jn,du,fu,As,Rt,no,so,Af,Sf,gu,pu,xr,_f,Am,Sm,Pe,td,OT,NT,LT,kT,zT,PT;const $s=class $s{constructor({x:t,y:e},s,r,l,u,h=0){w(this,Pe);w(this,Ji);w(this,jn,[]);w(this,du);w(this,fu);w(this,As,[]);w(this,Rt,new Float32Array(18));w(this,no);w(this,so);w(this,Af);w(this,Sf);w(this,gu);w(this,pu);w(this,xr,[]);A(this,Ji,s),A(this,pu,l*r),A(this,fu,u),c(this,Rt).set([NaN,NaN,NaN,NaN,t,e],6),A(this,du,h),A(this,Sf,c($s,_f)*r),A(this,Af,c($s,Sm)*r),A(this,gu,r),c(this,xr).push(t,e)}isEmpty(){return isNaN(c(this,Rt)[8])}add({x:t,y:e}){var W;A(this,no,t),A(this,so,e);const[s,r,l,u]=c(this,Ji);let[h,f,p,m]=c(this,Rt).subarray(8,12);const b=t-p,v=e-m,S=Math.hypot(b,v);if(S<c(this,Af))return!1;const x=S-c(this,Sf),T=x/S,R=T*b,M=T*v;let D=h,N=f;h=p,f=m,p+=R,m+=M,(W=c(this,xr))==null||W.push(t,e);const k=-M/x,O=R/x,B=k*c(this,pu),G=O*c(this,pu);return c(this,Rt).set(c(this,Rt).subarray(2,8),0),c(this,Rt).set([p+B,m+G],4),c(this,Rt).set(c(this,Rt).subarray(14,18),12),c(this,Rt).set([p-B,m-G],16),isNaN(c(this,Rt)[6])?(c(this,As).length===0&&(c(this,Rt).set([h+B,f+G],2),c(this,As).push(NaN,NaN,NaN,NaN,(h+B-s)/l,(f+G-r)/u),c(this,Rt).set([h-B,f-G],14),c(this,jn).push(NaN,NaN,NaN,NaN,(h-B-s)/l,(f-G-r)/u)),c(this,Rt).set([D,N,h,f,p,m],6),!this.isEmpty()):(c(this,Rt).set([D,N,h,f,p,m],6),Math.abs(Math.atan2(N-f,D-h)-Math.atan2(M,R))<Math.PI/2?([h,f,p,m]=c(this,Rt).subarray(2,6),c(this,As).push(NaN,NaN,NaN,NaN,((h+p)/2-s)/l,((f+m)/2-r)/u),[h,f,D,N]=c(this,Rt).subarray(14,18),c(this,jn).push(NaN,NaN,NaN,NaN,((D+h)/2-s)/l,((N+f)/2-r)/u),!0):([D,N,h,f,p,m]=c(this,Rt).subarray(0,6),c(this,As).push(((D+5*h)/6-s)/l,((N+5*f)/6-r)/u,((5*h+p)/6-s)/l,((5*f+m)/6-r)/u,((h+p)/2-s)/l,((f+m)/2-r)/u),[p,m,h,f,D,N]=c(this,Rt).subarray(12,18),c(this,jn).push(((D+5*h)/6-s)/l,((N+5*f)/6-r)/u,((5*h+p)/6-s)/l,((5*f+m)/6-r)/u,((h+p)/2-s)/l,((f+m)/2-r)/u),!0))}toSVGPath(){if(this.isEmpty())return"";const t=c(this,As),e=c(this,jn);if(isNaN(c(this,Rt)[6])&&!this.isEmpty())return E(this,Pe,OT).call(this);const s=[];s.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?s.push(`L${t[r+4]} ${t[r+5]}`):s.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);E(this,Pe,LT).call(this,s);for(let r=e.length-6;r>=6;r-=6)isNaN(e[r])?s.push(`L${e[r+4]} ${e[r+5]}`):s.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);return E(this,Pe,NT).call(this,s),s.join(" ")}newFreeDrawOutline(t,e,s,r,l,u){return new BT(t,e,s,r,l,u)}getOutlines(){var b;const t=c(this,As),e=c(this,jn),s=c(this,Rt),[r,l,u,h]=c(this,Ji),f=new Float32Array((((b=c(this,xr))==null?void 0:b.length)??0)+2);for(let v=0,S=f.length-2;v<S;v+=2)f[v]=(c(this,xr)[v]-r)/u,f[v+1]=(c(this,xr)[v+1]-l)/h;if(f[f.length-2]=(c(this,no)-r)/u,f[f.length-1]=(c(this,so)-l)/h,isNaN(s[6])&&!this.isEmpty())return E(this,Pe,kT).call(this,f);const p=new Float32Array(c(this,As).length+24+c(this,jn).length);let m=t.length;for(let v=0;v<m;v+=2){if(isNaN(t[v])){p[v]=p[v+1]=NaN;continue}p[v]=t[v],p[v+1]=t[v+1]}m=E(this,Pe,PT).call(this,p,m);for(let v=e.length-6;v>=6;v-=6)for(let S=0;S<6;S+=2){if(isNaN(e[v+S])){p[m]=p[m+1]=NaN,m+=2;continue}p[m]=e[v+S],p[m+1]=e[v+S+1],m+=2}return E(this,Pe,zT).call(this,p,m),this.newFreeDrawOutline(p,f,c(this,Ji),c(this,gu),c(this,du),c(this,fu))}};Ji=new WeakMap,jn=new WeakMap,du=new WeakMap,fu=new WeakMap,As=new WeakMap,Rt=new WeakMap,no=new WeakMap,so=new WeakMap,Af=new WeakMap,Sf=new WeakMap,gu=new WeakMap,pu=new WeakMap,xr=new WeakMap,_f=new WeakMap,Am=new WeakMap,Sm=new WeakMap,Pe=new WeakSet,td=function(){const t=c(this,Rt).subarray(4,6),e=c(this,Rt).subarray(16,18),[s,r,l,u]=c(this,Ji);return[(c(this,no)+(t[0]-e[0])/2-s)/l,(c(this,so)+(t[1]-e[1])/2-r)/u,(c(this,no)+(e[0]-t[0])/2-s)/l,(c(this,so)+(e[1]-t[1])/2-r)/u]},OT=function(){const[t,e,s,r]=c(this,Ji),[l,u,h,f]=E(this,Pe,td).call(this);return`M${(c(this,Rt)[2]-t)/s} ${(c(this,Rt)[3]-e)/r} L${(c(this,Rt)[4]-t)/s} ${(c(this,Rt)[5]-e)/r} L${l} ${u} L${h} ${f} L${(c(this,Rt)[16]-t)/s} ${(c(this,Rt)[17]-e)/r} L${(c(this,Rt)[14]-t)/s} ${(c(this,Rt)[15]-e)/r} Z`},NT=function(t){const e=c(this,jn);t.push(`L${e[4]} ${e[5]} Z`)},LT=function(t){const[e,s,r,l]=c(this,Ji),u=c(this,Rt).subarray(4,6),h=c(this,Rt).subarray(16,18),[f,p,m,b]=E(this,Pe,td).call(this);t.push(`L${(u[0]-e)/r} ${(u[1]-s)/l} L${f} ${p} L${m} ${b} L${(h[0]-e)/r} ${(h[1]-s)/l}`)},kT=function(t){const e=c(this,Rt),[s,r,l,u]=c(this,Ji),[h,f,p,m]=E(this,Pe,td).call(this),b=new Float32Array(36);return b.set([NaN,NaN,NaN,NaN,(e[2]-s)/l,(e[3]-r)/u,NaN,NaN,NaN,NaN,(e[4]-s)/l,(e[5]-r)/u,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,(e[16]-s)/l,(e[17]-r)/u,NaN,NaN,NaN,NaN,(e[14]-s)/l,(e[15]-r)/u],0),this.newFreeDrawOutline(b,t,c(this,Ji),c(this,gu),c(this,du),c(this,fu))},zT=function(t,e){const s=c(this,jn);return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],e),e+=6},PT=function(t,e){const s=c(this,Rt).subarray(4,6),r=c(this,Rt).subarray(16,18),[l,u,h,f]=c(this,Ji),[p,m,b,v]=E(this,Pe,td).call(this);return t.set([NaN,NaN,NaN,NaN,(s[0]-l)/h,(s[1]-u)/f,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,b,v,NaN,NaN,NaN,NaN,(r[0]-l)/h,(r[1]-u)/f],e),e+=24},w($s,_f,8),w($s,Am,2),w($s,Sm,c($s,_f)+c($s,Am));let im=$s;var mu,ao,ma,wf,tn,Ef,Se,_m,HT;class BT extends at{constructor(e,s,r,l,u,h){super();w(this,_m);w(this,mu);w(this,ao,new Float32Array(4));w(this,ma);w(this,wf);w(this,tn);w(this,Ef);w(this,Se);A(this,Se,e),A(this,tn,s),A(this,mu,r),A(this,Ef,l),A(this,ma,u),A(this,wf,h),this.lastPoint=[NaN,NaN],E(this,_m,HT).call(this,h);const[f,p,m,b]=c(this,ao);for(let v=0,S=e.length;v<S;v+=2)e[v]=(e[v]-f)/m,e[v+1]=(e[v+1]-p)/b;for(let v=0,S=s.length;v<S;v+=2)s[v]=(s[v]-f)/m,s[v+1]=(s[v+1]-p)/b}toSVGPath(){const e=[`M${c(this,Se)[4]} ${c(this,Se)[5]}`];for(let s=6,r=c(this,Se).length;s<r;s+=6){if(isNaN(c(this,Se)[s])){e.push(`L${c(this,Se)[s+4]} ${c(this,Se)[s+5]}`);continue}e.push(`C${c(this,Se)[s]} ${c(this,Se)[s+1]} ${c(this,Se)[s+2]} ${c(this,Se)[s+3]} ${c(this,Se)[s+4]} ${c(this,Se)[s+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,s,r,l],u){const h=r-e,f=l-s;let p,m;switch(u){case 0:p=at._rescale(c(this,Se),e,l,h,-f),m=at._rescale(c(this,tn),e,l,h,-f);break;case 90:p=at._rescaleAndSwap(c(this,Se),e,s,h,f),m=at._rescaleAndSwap(c(this,tn),e,s,h,f);break;case 180:p=at._rescale(c(this,Se),r,s,-h,f),m=at._rescale(c(this,tn),r,s,-h,f);break;case 270:p=at._rescaleAndSwap(c(this,Se),r,l,-h,-f),m=at._rescaleAndSwap(c(this,tn),r,l,-h,-f);break}return{outline:Array.from(p),points:[Array.from(m)]}}get box(){return c(this,ao)}newOutliner(e,s,r,l,u,h=0){return new im(e,s,r,l,u,h)}getNewOutline(e,s){const[r,l,u,h]=c(this,ao),[f,p,m,b]=c(this,mu),v=u*m,S=h*b,x=r*m+f,T=l*b+p,R=this.newOutliner({x:c(this,tn)[0]*v+x,y:c(this,tn)[1]*S+T},c(this,mu),c(this,Ef),e,c(this,wf),s??c(this,ma));for(let M=2;M<c(this,tn).length;M+=2)R.add({x:c(this,tn)[M]*v+x,y:c(this,tn)[M+1]*S+T});return R.getOutlines()}}mu=new WeakMap,ao=new WeakMap,ma=new WeakMap,wf=new WeakMap,tn=new WeakMap,Ef=new WeakMap,Se=new WeakMap,_m=new WeakSet,HT=function(e){const s=c(this,Se);let r=s[4],l=s[5];const u=[r,l,r,l];let h=r,f=l;const p=e?Math.max:Math.min;for(let b=6,v=s.length;b<v;b+=6){const S=s[b+4],x=s[b+5];if(isNaN(s[b]))dt.pointBoundingBox(S,x,u),f<x?(h=S,f=x):f===x&&(h=p(h,S));else{const T=[1/0,1/0,-1/0,-1/0];dt.bezierBoundingBox(r,l,...s.slice(b,b+6),T),dt.rectBoundingBox(...T,u),f<T[3]?(h=T[2],f=T[3]):f===T[3]&&(h=p(h,T[2]))}r=S,l=x}const m=c(this,ao);m[0]=u[0]-c(this,ma),m[1]=u[1]-c(this,ma),m[2]=u[2]-u[0]+2*c(this,ma),m[3]=u[3]-u[1]+2*c(this,ma),this.lastPoint=[h,f]};var Tf,xf,Cr,qn,Ti,UT,zp,IT,FT,pv;class gv{constructor(t,e=0,s=0,r=!0){w(this,Ti);w(this,Tf);w(this,xf);w(this,Cr,[]);w(this,qn,[]);const l=[1/0,1/0,-1/0,-1/0],u=10**-4;for(const{x:S,y:x,width:T,height:R}of t){const M=Math.floor((S-e)/u)*u,D=Math.ceil((S+T+e)/u)*u,N=Math.floor((x-e)/u)*u,k=Math.ceil((x+R+e)/u)*u,O=[M,N,k,!0],B=[D,N,k,!1];c(this,Cr).push(O,B),dt.rectBoundingBox(M,N,D,k,l)}const h=l[2]-l[0]+2*s,f=l[3]-l[1]+2*s,p=l[0]-s,m=l[1]-s,b=c(this,Cr).at(r?-1:-2),v=[b[0],b[2]];for(const S of c(this,Cr)){const[x,T,R]=S;S[0]=(x-p)/h,S[1]=(T-m)/f,S[2]=(R-m)/f}A(this,Tf,new Float32Array([p,m,h,f])),A(this,xf,v)}getOutlines(){c(this,Cr).sort((e,s)=>e[0]-s[0]||e[1]-s[1]||e[2]-s[2]);const t=[];for(const e of c(this,Cr))e[3]?(t.push(...E(this,Ti,pv).call(this,e)),E(this,Ti,IT).call(this,e)):(E(this,Ti,FT).call(this,e),t.push(...E(this,Ti,pv).call(this,e)));return E(this,Ti,UT).call(this,t)}}Tf=new WeakMap,xf=new WeakMap,Cr=new WeakMap,qn=new WeakMap,Ti=new WeakSet,UT=function(t){const e=[],s=new Set;for(const u of t){const[h,f,p]=u;e.push([h,f,u],[h,p,u])}e.sort((u,h)=>u[1]-h[1]||u[0]-h[0]);for(let u=0,h=e.length;u<h;u+=2){const f=e[u][2],p=e[u+1][2];f.push(p),p.push(f),s.add(f),s.add(p)}const r=[];let l;for(;s.size>0;){const u=s.values().next().value;let[h,f,p,m,b]=u;s.delete(u);let v=h,S=f;for(l=[h,p],r.push(l);;){let x;if(s.has(m))x=m;else if(s.has(b))x=b;else break;s.delete(x),[h,f,p,m,b]=x,v!==h&&(l.push(v,S,h,S===f?f:p),v=h),S=S===f?p:f}l.push(v,S)}return new XD(r,c(this,Tf),c(this,xf))},zp=function(t){const e=c(this,qn);let s=0,r=e.length-1;for(;s<=r;){const l=s+r>>1,u=e[l][0];if(u===t)return l;u<t?s=l+1:r=l-1}return r+1},IT=function([,t,e]){const s=E(this,Ti,zp).call(this,t);c(this,qn).splice(s,0,[t,e])},FT=function([,t,e]){const s=E(this,Ti,zp).call(this,t);for(let r=s;r<c(this,qn).length;r++){const[l,u]=c(this,qn)[r];if(l!==t)break;if(l===t&&u===e){c(this,qn).splice(r,1);return}}for(let r=s-1;r>=0;r--){const[l,u]=c(this,qn)[r];if(l!==t)break;if(l===t&&u===e){c(this,qn).splice(r,1);return}}},pv=function(t){const[e,s,r]=t,l=[[e,s,r]],u=E(this,Ti,zp).call(this,r);for(let h=0;h<u;h++){const[f,p]=c(this,qn)[h];for(let m=0,b=l.length;m<b;m++){const[,v,S]=l[m];if(!(p<=v||S<=f)){if(v>=f){if(S>p)l[m][1]=p;else{if(b===1)return[];l.splice(m,1),m--,b--}continue}l[m][2]=f,S>p&&l.push([e,p,S])}}}return l};var Cf,yu;class XD extends at{constructor(e,s,r){super();w(this,Cf);w(this,yu);A(this,yu,e),A(this,Cf,s),this.lastPoint=r}toSVGPath(){const e=[];for(const s of c(this,yu)){let[r,l]=s;e.push(`M${r} ${l}`);for(let u=2;u<s.length;u+=2){const h=s[u],f=s[u+1];h===r?(e.push(`V${f}`),l=f):f===l&&(e.push(`H${h}`),r=h)}e.push("Z")}return e.join(" ")}serialize([e,s,r,l],u){const h=[],f=r-e,p=l-s;for(const m of c(this,yu)){const b=new Array(m.length);for(let v=0;v<m.length;v+=2)b[v]=e+m[v]*f,b[v+1]=l-m[v+1]*p;h.push(b)}return h}get box(){return c(this,Cf)}get classNamesForOutlining(){return["highlightOutline"]}}Cf=new WeakMap,yu=new WeakMap;class mv extends im{newFreeDrawOutline(t,e,s,r,l,u){return new YD(t,e,s,r,l,u)}}class YD extends BT{newOutliner(t,e,s,r,l,u=0){return new mv(t,e,s,r,l,u)}}var Vn,ro,bu,ze,Rf,vu,Mf,Df,Rr,Xn,Au,Of,te,yv,bv,vv,fl,GT,er;const Ni=class Ni{constructor({editor:t=null,uiManager:e=null}){w(this,te);w(this,Vn,null);w(this,ro,null);w(this,bu);w(this,ze,null);w(this,Rf,!1);w(this,vu,!1);w(this,Mf,null);w(this,Df);w(this,Rr,null);w(this,Xn,null);w(this,Au);var s;t?(A(this,vu,!1),A(this,Au,Pt.HIGHLIGHT_COLOR),A(this,Mf,t)):(A(this,vu,!0),A(this,Au,Pt.HIGHLIGHT_DEFAULT_COLOR)),A(this,Xn,(t==null?void 0:t._uiManager)||e),A(this,Df,c(this,Xn)._eventBus),A(this,bu,(t==null?void 0:t.color)||((s=c(this,Xn))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),c(Ni,Of)||A(Ni,Of,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return zt(this,"_keyboardManager",new Gf([[["Escape","mac+Escape"],Ni.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ni.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ni.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ni.prototype._moveToPrevious],[["Home","mac+Home"],Ni.prototype._moveToBeginning],[["End","mac+End"],Ni.prototype._moveToEnd]]))}renderButton(){const t=A(this,Vn,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=c(this,Xn)._signal;t.addEventListener("click",E(this,te,fl).bind(this),{signal:e}),t.addEventListener("keydown",E(this,te,vv).bind(this),{signal:e});const s=A(this,ro,document.createElement("span"));return s.className="swatch",s.setAttribute("aria-hidden",!0),s.style.backgroundColor=c(this,bu),t.append(s),t}renderMainDropdown(){const t=A(this,ze,E(this,te,yv).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===c(this,Vn)){E(this,te,fl).call(this,t);return}const e=t.target.getAttribute("data-color");e&&E(this,te,bv).call(this,e,t)}_moveToNext(t){var e,s;if(!c(this,te,er)){E(this,te,fl).call(this,t);return}if(t.target===c(this,Vn)){(e=c(this,ze).firstChild)==null||e.focus();return}(s=t.target.nextSibling)==null||s.focus()}_moveToPrevious(t){var e,s;if(t.target===((e=c(this,ze))==null?void 0:e.firstChild)||t.target===c(this,Vn)){c(this,te,er)&&this._hideDropdownFromKeyboard();return}c(this,te,er)||E(this,te,fl).call(this,t),(s=t.target.previousSibling)==null||s.focus()}_moveToBeginning(t){var e;if(!c(this,te,er)){E(this,te,fl).call(this,t);return}(e=c(this,ze).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!c(this,te,er)){E(this,te,fl).call(this,t);return}(e=c(this,ze).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=c(this,ze))==null||t.classList.add("hidden"),(e=c(this,Rr))==null||e.abort(),A(this,Rr,null)}_hideDropdownFromKeyboard(){var t;if(!c(this,vu)){if(!c(this,te,er)){(t=c(this,Mf))==null||t.unselect();return}this.hideDropdown(),c(this,Vn).focus({preventScroll:!0,focusVisible:c(this,Rf)})}}updateColor(t){if(c(this,ro)&&(c(this,ro).style.backgroundColor=t),!c(this,ze))return;const e=c(this,Xn).highlightColors.values();for(const s of c(this,ze).children)s.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=c(this,Vn))==null||t.remove(),A(this,Vn,null),A(this,ro,null),(e=c(this,ze))==null||e.remove(),A(this,ze,null)}};Vn=new WeakMap,ro=new WeakMap,bu=new WeakMap,ze=new WeakMap,Rf=new WeakMap,vu=new WeakMap,Mf=new WeakMap,Df=new WeakMap,Rr=new WeakMap,Xn=new WeakMap,Au=new WeakMap,Of=new WeakMap,te=new WeakSet,yv=function(){const t=document.createElement("div"),e=c(this,Xn)._signal;t.addEventListener("contextmenu",Zn,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[s,r]of c(this,Xn).highlightColors){const l=document.createElement("button");l.tabIndex="0",l.role="option",l.setAttribute("data-color",r),l.title=s,l.setAttribute("data-l10n-id",c(Ni,Of)[s]);const u=document.createElement("span");l.append(u),u.className="swatch",u.style.backgroundColor=r,l.setAttribute("aria-selected",r===c(this,bu)),l.addEventListener("click",E(this,te,bv).bind(this,r),{signal:e}),t.append(l)}return t.addEventListener("keydown",E(this,te,vv).bind(this),{signal:e}),t},bv=function(t,e){e.stopPropagation(),c(this,Df).dispatch("switchannotationeditorparams",{source:this,type:c(this,Au),value:t})},vv=function(t){Ni._keyboardManager.exec(this,t)},fl=function(t){if(c(this,te,er)){this.hideDropdown();return}if(A(this,Rf,t.detail===0),c(this,Rr)||(A(this,Rr,new AbortController),window.addEventListener("pointerdown",E(this,te,GT).bind(this),{signal:c(this,Xn).combinedSignal(c(this,Rr))})),c(this,ze)){c(this,ze).classList.remove("hidden");return}const e=A(this,ze,E(this,te,yv).call(this));c(this,Vn).append(e)},GT=function(t){var e;(e=c(this,ze))!=null&&e.contains(t.target)||this.hideDropdown()},er=function(){return c(this,ze)&&!c(this,ze).classList.contains("hidden")},w(Ni,Of,null);let nm=Ni;var Su,Nf,ya,lo,_u,zi,Lf,kf,oo,Cn,en,Je,wu,ba,fi,Eu,Rn,zf,_t,Av,Pp,jT,qT,VT,Sv,gl,On,_c,XT,Bp,ed,YT,$T,KT,QT,WT;const qt=class qt extends re{constructor(e){super({...e,name:"highlightEditor"});w(this,_t);w(this,Su,null);w(this,Nf,0);w(this,ya);w(this,lo,null);w(this,_u,null);w(this,zi,null);w(this,Lf,null);w(this,kf,0);w(this,oo,null);w(this,Cn,null);w(this,en,null);w(this,Je,!1);w(this,wu,null);w(this,ba);w(this,fi,null);w(this,Eu,"");w(this,Rn);w(this,zf,"");this.color=e.color||qt._defaultColor,A(this,Rn,e.thickness||qt._defaultThickness),A(this,ba,e.opacity||qt._defaultOpacity),A(this,ya,e.boxes||null),A(this,zf,e.methodOfCreation||""),A(this,Eu,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(A(this,Je,!0),E(this,_t,Pp).call(this,e),E(this,_t,gl).call(this)):c(this,ya)&&(A(this,Su,e.anchorNode),A(this,Nf,e.anchorOffset),A(this,Lf,e.focusNode),A(this,kf,e.focusOffset),E(this,_t,Av).call(this),E(this,_t,gl).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=qt.prototype;return zt(this,"_keyboardManager",new Gf([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,Je)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:c(this,Rn),methodOfCreation:c(this,zf)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,s){var r;re.initialize(e,s),qt._defaultColor||(qt._defaultColor=((r=s.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(e,s){switch(e){case Pt.HIGHLIGHT_DEFAULT_COLOR:qt._defaultColor=s;break;case Pt.HIGHLIGHT_THICKNESS:qt._defaultThickness=s;break}}translateInPage(e,s){}get toolbarPosition(){return c(this,wu)}updateParams(e,s){switch(e){case Pt.HIGHLIGHT_COLOR:E(this,_t,jT).call(this,s);break;case Pt.HIGHLIGHT_THICKNESS:E(this,_t,qT).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[Pt.HIGHLIGHT_DEFAULT_COLOR,qt._defaultColor],[Pt.HIGHLIGHT_THICKNESS,qt._defaultThickness]]}get propertiesToUpdate(){return[[Pt.HIGHLIGHT_COLOR,this.color||qt._defaultColor],[Pt.HIGHLIGHT_THICKNESS,c(this,Rn)||qt._defaultThickness],[Pt.HIGHLIGHT_FREE,c(this,Je)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(A(this,_u,new nm({editor:this})),e.addColorPicker(c(this,_u))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(E(this,_t,ed).call(this))}getBaseTranslation(){return[0,0]}getRect(e,s){return super.getRect(e,s,E(this,_t,ed).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){E(this,_t,Sv).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,_t,gl).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var r;let s=!1;this.parent&&!e?E(this,_t,Sv).call(this):e&&(E(this,_t,gl).call(this,e),s=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),s&&this.select()}rotate(e){var l,u,h;const{drawLayer:s}=this.parent;let r;c(this,Je)?(e=(e-this.rotation+360)%360,r=E(l=qt,On,_c).call(l,c(this,Cn).box,e)):r=E(u=qt,On,_c).call(u,[this.x,this.y,this.width,this.height],e),s.updateProperties(c(this,en),{bbox:r,root:{"data-main-rotation":e}}),s.updateProperties(c(this,fi),{bbox:E(h=qt,On,_c).call(h,c(this,zi).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();c(this,Eu)&&(e.setAttribute("aria-label",c(this,Eu)),e.setAttribute("role","mark")),c(this,Je)?e.classList.add("free"):this.div.addEventListener("keydown",E(this,_t,XT).bind(this),{signal:this._uiManager._signal});const s=A(this,oo,document.createElement("div"));e.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=c(this,lo);const[r,l]=this.parentDimensions;return this.setDims(this.width*r,this.height*l),mE(this,c(this,oo),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(c(this,fi),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(c(this,fi),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:E(this,_t,Bp).call(this,!0);break;case 1:case 3:E(this,_t,Bp).call(this,!1);break}}select(){var e;super.select(),c(this,fi)&&((e=this.parent)==null||e.drawLayer.updateProperties(c(this,fi),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),c(this,fi)&&((e=this.parent)==null||e.drawLayer.updateProperties(c(this,fi),{rootClass:{selected:!1}}),c(this,Je)||E(this,_t,Bp).call(this,!1))}get _mustFixPosition(){return!c(this,Je)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(c(this,en),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(c(this,fi),{rootClass:{hidden:!e}}))}static startHighlighting(e,s,{target:r,x:l,y:u}){const{x:h,y:f,width:p,height:m}=r.getBoundingClientRect(),b=new AbortController,v=e.combinedSignal(b),S=x=>{b.abort(),E(this,On,QT).call(this,e,x)};window.addEventListener("blur",S,{signal:v}),window.addEventListener("pointerup",S,{signal:v}),window.addEventListener("pointerdown",Ce,{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Zn,{signal:v}),r.addEventListener("pointermove",E(this,On,KT).bind(this,e),{signal:v}),this._freeHighlight=new mv({x:l,y:u},[h,f,p,m],e.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,s,r){var T,R,M,D;let l=null;if(e instanceof ET){const{data:{quadPoints:N,rect:k,rotation:O,id:B,color:G,opacity:Q,popupRef:W},parent:{page:{pageNumber:nt}}}=e;l=e={annotationType:At.HIGHLIGHT,color:Array.from(G),opacity:Q,quadPoints:N,boxes:null,pageIndex:nt-1,rect:k.slice(0),rotation:O,id:B,deleted:!1,popupRef:W}}else if(e instanceof Jv){const{data:{inkLists:N,rect:k,rotation:O,id:B,color:G,borderStyle:{rawWidth:Q},popupRef:W},parent:{page:{pageNumber:nt}}}=e;l=e={annotationType:At.HIGHLIGHT,color:Array.from(G),thickness:Q,inkLists:N,boxes:null,pageIndex:nt-1,rect:k.slice(0),rotation:O,id:B,deleted:!1,popupRef:W}}const{color:u,quadPoints:h,inkLists:f,opacity:p}=e,m=await super.deserialize(e,s,r);m.color=dt.makeHexColor(...u),A(m,ba,p||1),f&&A(m,Rn,e.thickness),m.annotationElementId=e.id||null,m._initialData=l;const[b,v]=m.pageDimensions,[S,x]=m.pageTranslation;if(h){const N=A(m,ya,[]);for(let k=0;k<h.length;k+=8)N.push({x:(h[k]-S)/b,y:1-(h[k+1]-x)/v,width:(h[k+2]-h[k])/b,height:(h[k+1]-h[k+5])/v});E(T=m,_t,Av).call(T),E(R=m,_t,gl).call(R),m.rotate(m.rotation)}else if(f){A(m,Je,!0);const N=f[0],k={x:N[0]-S,y:v-(N[1]-x)},O=new mv(k,[0,0,b,v],1,c(m,Rn)/2,!0,.001);for(let Q=0,W=N.length;Q<W;Q+=2)k.x=N[Q]-S,k.y=v-(N[Q+1]-x),O.add(k);const{id:B,clipPathId:G}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:m.color,"fill-opacity":m._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:O.toSVGPath()}},!0,!0);E(M=m,_t,Pp).call(M,{highlightOutlines:O.getOutlines(),highlightId:B,clipPathId:G}),E(D=m,_t,gl).call(D),m.rotate(m.parentRotation)}return m}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const s=this.getRect(0,0),r=re._colorManager.convert(this.color),l={annotationType:At.HIGHLIGHT,color:r,opacity:c(this,ba),thickness:c(this,Rn),quadPoints:E(this,_t,YT).call(this),outlines:E(this,_t,$T).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:E(this,_t,ed).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!E(this,_t,WT).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Su=new WeakMap,Nf=new WeakMap,ya=new WeakMap,lo=new WeakMap,_u=new WeakMap,zi=new WeakMap,Lf=new WeakMap,kf=new WeakMap,oo=new WeakMap,Cn=new WeakMap,en=new WeakMap,Je=new WeakMap,wu=new WeakMap,ba=new WeakMap,fi=new WeakMap,Eu=new WeakMap,Rn=new WeakMap,zf=new WeakMap,_t=new WeakSet,Av=function(){const e=new gv(c(this,ya),.001);A(this,Cn,e.getOutlines()),[this.x,this.y,this.width,this.height]=c(this,Cn).box;const s=new gv(c(this,ya),.0025,.001,this._uiManager.direction==="ltr");A(this,zi,s.getOutlines());const{lastPoint:r}=c(this,zi);A(this,wu,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},Pp=function({highlightOutlines:e,highlightId:s,clipPathId:r}){var b,v;if(A(this,Cn,e),A(this,zi,e.getNewOutline(c(this,Rn)/2+1.5,.0025)),s>=0)A(this,en,s),A(this,lo,r),this.parent.drawLayer.finalizeDraw(s,{bbox:e.box,path:{d:e.toSVGPath()}}),A(this,fi,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:c(this,zi).box,path:{d:c(this,zi).toSVGPath()}},!0));else if(this.parent){const S=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(c(this,en),{bbox:E(b=qt,On,_c).call(b,c(this,Cn).box,(S-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(c(this,fi),{bbox:E(v=qt,On,_c).call(v,c(this,zi).box,S),path:{d:c(this,zi).toSVGPath()}})}const[u,h,f,p]=e.box;switch(this.rotation){case 0:this.x=u,this.y=h,this.width=f,this.height=p;break;case 90:{const[S,x]=this.parentDimensions;this.x=h,this.y=1-u,this.width=f*x/S,this.height=p*S/x;break}case 180:this.x=1-u,this.y=1-h,this.width=f,this.height=p;break;case 270:{const[S,x]=this.parentDimensions;this.x=1-h,this.y=u,this.width=f*x/S,this.height=p*S/x;break}}const{lastPoint:m}=c(this,zi);A(this,wu,[(m[0]-u)/f,(m[1]-h)/p])},jT=function(e){const s=(u,h)=>{var f,p;this.color=u,A(this,ba,h),(f=this.parent)==null||f.drawLayer.updateProperties(c(this,en),{root:{fill:u,"fill-opacity":h}}),(p=c(this,_u))==null||p.updateColor(u)},r=this.color,l=c(this,ba);this.addCommands({cmd:s.bind(this,e,qt._defaultOpacity),undo:s.bind(this,r,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Pt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},qT=function(e){const s=c(this,Rn),r=l=>{A(this,Rn,l),E(this,_t,VT).call(this,l)};this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Pt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},VT=function(e){if(!c(this,Je))return;E(this,_t,Pp).call(this,{highlightOutlines:c(this,Cn).getNewOutline(e/2)}),this.fixAndSetPosition();const[s,r]=this.parentDimensions;this.setDims(this.width*s,this.height*r)},Sv=function(){c(this,en)===null||!this.parent||(this.parent.drawLayer.remove(c(this,en)),A(this,en,null),this.parent.drawLayer.remove(c(this,fi)),A(this,fi,null))},gl=function(e=this.parent){c(this,en)===null&&({id:mi(this,en)._,clipPathId:mi(this,lo)._}=e.drawLayer.draw({bbox:c(this,Cn).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":c(this,ba)},rootClass:{highlight:!0,free:c(this,Je)},path:{d:c(this,Cn).toSVGPath()}},!1,!0),A(this,fi,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:c(this,Je)},bbox:c(this,zi).box,path:{d:c(this,zi).toSVGPath()}},c(this,Je))),c(this,oo)&&(c(this,oo).style.clipPath=c(this,lo)))},On=new WeakSet,_c=function([e,s,r,l],u){switch(u){case 90:return[1-s-l,e,l,r];case 180:return[1-e-r,1-s-l,r,l];case 270:return[s,1-e-r,l,r]}return[e,s,r,l]},XT=function(e){qt._keyboardManager.exec(this,e)},Bp=function(e){if(!c(this,Su))return;const s=window.getSelection();e?s.setPosition(c(this,Su),c(this,Nf)):s.setPosition(c(this,Lf),c(this,kf))},ed=function(){return c(this,Je)?this.rotation:0},YT=function(){if(c(this,Je))return null;const[e,s]=this.pageDimensions,[r,l]=this.pageTranslation,u=c(this,ya),h=new Float32Array(u.length*8);let f=0;for(const{x:p,y:m,width:b,height:v}of u){const S=p*e+r,x=(1-m)*s+l;h[f]=h[f+4]=S,h[f+1]=h[f+3]=x,h[f+2]=h[f+6]=S+b*e,h[f+5]=h[f+7]=x-v*s,f+=8}return h},$T=function(e){return c(this,Cn).serialize(e,E(this,_t,ed).call(this))},KT=function(e,s){this._freeHighlight.add(s)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},QT=function(e,s){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},WT=function(e){const{color:s}=this._initialData;return e.color.some((r,l)=>r!==s[l])},w(qt,On),J(qt,"_defaultColor",null),J(qt,"_defaultOpacity",1),J(qt,"_defaultThickness",12),J(qt,"_type","highlight"),J(qt,"_editorType",At.HIGHLIGHT),J(qt,"_freeHighlightId",-1),J(qt,"_freeHighlight",null),J(qt,"_freeHighlightClipId","");let sm=qt;var co;class ZT{constructor(){w(this,co,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,s]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,s)}updateSVGProperty(t,e){c(this,co)[t]=e}toSVGProperties(){const t=c(this,co);return A(this,co,Object.create(null)),{root:t}}reset(){A(this,co,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){ee("Not implemented")}}co=new WeakMap;var nn,Tu,je,uo,ho,Mr,Dr,Or,fo,Ut,_v,wv,Ev,id,JT,Hp,nd,wc;const rt=class rt extends re{constructor(e){super(e);w(this,Ut);w(this,nn,null);w(this,Tu);J(this,"_drawId",null);A(this,Tu,e.mustBeCommitted||!1),this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(E(this,Ut,_v).call(this,e),E(this,Ut,id).call(this))}static _mergeSVGProperties(e,s){const r=new Set(Object.keys(e));for(const[l,u]of Object.entries(s))r.has(l)?Object.assign(e[l],u):e[l]=u;return e}static getDefaultDrawingOptions(e){ee("Not implemented")}static get typesMap(){ee("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,s){const r=this.typesMap.get(e);r&&this._defaultDrawingOptions.updateProperty(r,s),this._currentParent&&(c(rt,je).updateProperty(r,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,s){const r=this.constructor.typesMap.get(e);r&&this._updateProperty(e,r,s)}static get defaultPropertiesToUpdate(){const e=[],s=this._defaultDrawingOptions;for(const[r,l]of this.typesMap)e.push([r,s[l]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:s}=this;for(const[r,l]of this.constructor.typesMap)e.push([r,s[l]]);return e}_updateProperty(e,s,r){const l=this._drawingOptions,u=l[s],h=f=>{var m;l.updateProperty(s,f);const p=c(this,nn).updateProperty(s,f);p&&E(this,Ut,nd).call(this,p),(m=this.parent)==null||m.drawLayer.updateProperties(this._drawId,l.toSVGProperties())};this.addCommands({cmd:h.bind(this,r),undo:h.bind(this,u),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,rt._mergeSVGProperties(c(this,nn).getPathResizingSVGProperties(E(this,Ut,Hp).call(this)),{bbox:E(this,Ut,wc).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,rt._mergeSVGProperties(c(this,nn).getPathResizedSVGProperties(E(this,Ut,Hp).call(this)),{bbox:E(this,Ut,wc).call(this)}))}_onTranslating(e,s){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:E(this,Ut,wc).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,rt._mergeSVGProperties(c(this,nn).getPathTranslatedSVGProperties(E(this,Ut,Hp).call(this),this.parentDimensions),{bbox:E(this,Ut,wc).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,c(this,Tu)&&(A(this,Tu,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){E(this,Ut,Ev).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,Ut,id).call(this),E(this,Ut,nd).call(this,c(this,nn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var r;let s=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),E(this,Ut,Ev).call(this)):e&&(this._uiManager.addShouldRescale(this),E(this,Ut,id).call(this,e),s=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(e),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,rt._mergeSVGProperties({bbox:E(this,Ut,wc).call(this)},c(this,nn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&E(this,Ut,nd).call(this,c(this,nn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,s;this._isCopy&&(e=this.x,s=this.y);const r=super.render();r.classList.add("draw");const l=document.createElement("div");r.append(l),l.setAttribute("aria-hidden","true"),l.className="internal";const[u,h]=this.parentDimensions;return this.setDims(this.width*u,this.height*h),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,s),r}static createDrawerInstance(e,s,r,l,u){ee("Not implemented")}static startDrawing(e,s,r,l){var R;const{target:u,offsetX:h,offsetY:f,pointerId:p,pointerType:m}=l;if(c(rt,Dr)&&c(rt,Dr)!==m)return;const{viewport:{rotation:b}}=e,{width:v,height:S}=u.getBoundingClientRect(),x=A(rt,uo,new AbortController),T=e.combinedSignal(x);if(c(rt,Mr)||A(rt,Mr,p),c(rt,Dr)??A(rt,Dr,m),window.addEventListener("pointerup",M=>{var D;c(rt,Mr)===M.pointerId?this._endDraw(M):(D=c(rt,Or))==null||D.delete(M.pointerId)},{signal:T}),window.addEventListener("pointercancel",M=>{var D;c(rt,Mr)===M.pointerId?this._currentParent.endDrawingSession():(D=c(rt,Or))==null||D.delete(M.pointerId)},{signal:T}),window.addEventListener("pointerdown",M=>{c(rt,Dr)===M.pointerType&&((c(rt,Or)||A(rt,Or,new Set)).add(M.pointerId),c(rt,je).isCancellable()&&(c(rt,je).removeLastElement(),c(rt,je).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:T}),window.addEventListener("contextmenu",Zn,{signal:T}),u.addEventListener("pointermove",this._drawMove.bind(this),{signal:T}),u.addEventListener("touchmove",M=>{M.timeStamp===c(rt,fo)&&Ce(M)},{signal:T}),e.toggleDrawing(),(R=s._editorUndoBar)==null||R.hide(),c(rt,je)){e.drawLayer.updateProperties(this._currentDrawId,c(rt,je).startNew(h,f,v,S,b));return}s.updateUIForDefaultProperties(this),A(rt,je,this.createDrawerInstance(h,f,v,S,b)),A(rt,ho,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(c(rt,ho).toSVGProperties(),c(rt,je).defaultSVGProperties),!0,!1)}static _drawMove(e){var u;if(A(rt,fo,-1),!c(rt,je))return;const{offsetX:s,offsetY:r,pointerId:l}=e;if(c(rt,Mr)===l){if(((u=c(rt,Or))==null?void 0:u.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,c(rt,je).add(s,r)),A(rt,fo,e.timeStamp),Ce(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,A(rt,je,null),A(rt,ho,null),A(rt,Dr,null),A(rt,fo,NaN)),c(rt,uo)&&(c(rt,uo).abort(),A(rt,uo,null),A(rt,Mr,NaN),A(rt,Or,null))}static _endDraw(e){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===s.div&&s.drawLayer.updateProperties(this._currentDrawId,c(rt,je).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const r=c(rt,je),l=this._currentDrawId,u=r.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(l,r.setLastElement(u))},undo:()=>{s.drawLayer.updateProperties(l,r.removeLastElement())},mustExec:!1,type:Pt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(Pt.DRAW_STEP),!c(rt,je).isEmpty()){const{pageDimensions:[r,l],scale:u}=s,h=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:c(rt,je).getOutlines(r*u,l*u,u,this._INNER_MARGIN),drawingOptions:c(rt,ho),mustBeCommitted:!e});return this._cleanup(!0),h}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,s,r,l,u,h){ee("Not implemented")}static async deserialize(e,s,r){var b,v;const{rawDims:{pageWidth:l,pageHeight:u,pageX:h,pageY:f}}=s.viewport,p=this.deserializeDraw(h,f,l,u,this._INNER_MARGIN,e),m=await super.deserialize(e,s,r);return m.createDrawingOptions(e),E(b=m,Ut,_v).call(b,{drawOutlines:p}),E(v=m,Ut,id).call(v),m.onScaleChanging(),m.rotate(),m}serializeDraw(e){const[s,r]=this.pageTranslation,[l,u]=this.pageDimensions;return c(this,nn).serialize([s,r,l,u],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};nn=new WeakMap,Tu=new WeakMap,je=new WeakMap,uo=new WeakMap,ho=new WeakMap,Mr=new WeakMap,Dr=new WeakMap,Or=new WeakMap,fo=new WeakMap,Ut=new WeakSet,_v=function({drawOutlines:e,drawId:s,drawingOptions:r}){A(this,nn,e),this._drawingOptions||(this._drawingOptions=r),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,e.defaultProperties)):this._drawId=E(this,Ut,wv).call(this,e,this.parent),E(this,Ut,nd).call(this,e.box)},wv=function(e,s){const{id:r}=s.drawLayer.draw(rt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return r},Ev=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},id=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=E(this,Ut,wv).call(this,c(this,nn),e)}},JT=function([e,s,r,l]){const{parentDimensions:[u,h],rotation:f}=this;switch(f){case 90:return[s,1-e,r*(h/u),l*(u/h)];case 180:return[1-e,1-s,r,l];case 270:return[1-s,e,r*(h/u),l*(u/h)];default:return[e,s,r,l]}},Hp=function(){const{x:e,y:s,width:r,height:l,parentDimensions:[u,h],rotation:f}=this;switch(f){case 90:return[1-s,e,r*(u/h),l*(h/u)];case 180:return[1-e,1-s,r,l];case 270:return[s,1-e,r*(u/h),l*(h/u)];default:return[e,s,r,l]}},nd=function(e){if([this.x,this.y,this.width,this.height]=E(this,Ut,JT).call(this,e),this.div){this.fixAndSetPosition();const[s,r]=this.parentDimensions;this.setDims(this.width*s,this.height*r)}this._onResized()},wc=function(){const{x:e,y:s,width:r,height:l,rotation:u,parentRotation:h,parentDimensions:[f,p]}=this;switch((u*4+h)/90){case 1:return[1-s-l,e,l,r];case 2:return[1-e-r,1-s-l,r,l];case 3:return[s,1-e-r,l,r];case 4:return[e,s-r*(f/p),l*(p/f),r*(f/p)];case 5:return[1-s,e,r*(f/p),l*(p/f)];case 6:return[1-e-l*(p/f),1-s,l*(p/f),r*(f/p)];case 7:return[s-r*(f/p),1-e-l*(p/f),r*(f/p),l*(p/f)];case 8:return[e-r,s-l,r,l];case 9:return[1-s,e-r,l,r];case 10:return[1-e,1-s,r,l];case 11:return[s-l,1-e,l,r];case 12:return[e-l*(p/f),s,l*(p/f),r*(f/p)];case 13:return[1-s-r*(f/p),e-l*(p/f),r*(f/p),l*(p/f)];case 14:return[1-e,1-s-r*(f/p),l*(p/f),r*(f/p)];case 15:return[s,1-e,r*(f/p),l*(p/f)];default:return[e,s,r,l]}},J(rt,"_currentDrawId",-1),J(rt,"_currentParent",null),w(rt,je,null),w(rt,uo,null),w(rt,ho,null),w(rt,Mr,NaN),w(rt,Dr,null),w(rt,Or,null),w(rt,fo,NaN),J(rt,"_INNER_MARGIN",3);let am=rt;var Ss,qe,Ve,go,xu,vi,ti,Mn,po,mo,yo,Cu,Up;class $D{constructor(t,e,s,r,l,u){w(this,Cu);w(this,Ss,new Float64Array(6));w(this,qe);w(this,Ve);w(this,go);w(this,xu);w(this,vi);w(this,ti,"");w(this,Mn,0);w(this,po,new Vf);w(this,mo);w(this,yo);A(this,mo,s),A(this,yo,r),A(this,go,l),A(this,xu,u),[t,e]=E(this,Cu,Up).call(this,t,e);const h=A(this,qe,[NaN,NaN,NaN,NaN,t,e]);A(this,vi,[t,e]),A(this,Ve,[{line:h,points:c(this,vi)}]),c(this,Ss).set(h,0)}updateProperty(t,e){t==="stroke-width"&&A(this,xu,e)}isEmpty(){return!c(this,Ve)||c(this,Ve).length===0}isCancellable(){return c(this,vi).length<=10}add(t,e){[t,e]=E(this,Cu,Up).call(this,t,e);const[s,r,l,u]=c(this,Ss).subarray(2,6),h=t-l,f=e-u;return Math.hypot(c(this,mo)*h,c(this,yo)*f)<=2?null:(c(this,vi).push(t,e),isNaN(s)?(c(this,Ss).set([l,u,t,e],2),c(this,qe).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(c(this,Ss)[0])&&c(this,qe).splice(6,6),c(this,Ss).set([s,r,l,u,t,e],0),c(this,qe).push(...at.createBezierPoints(s,r,l,u,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const s=this.add(t,e);return s||(c(this,vi).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,s,r,l){A(this,mo,s),A(this,yo,r),A(this,go,l),[t,e]=E(this,Cu,Up).call(this,t,e);const u=A(this,qe,[NaN,NaN,NaN,NaN,t,e]);A(this,vi,[t,e]);const h=c(this,Ve).at(-1);return h&&(h.line=new Float32Array(h.line),h.points=new Float32Array(h.points)),c(this,Ve).push({line:u,points:c(this,vi)}),c(this,Ss).set(u,0),A(this,Mn,0),this.toSVGPath(),null}getLastElement(){return c(this,Ve).at(-1)}setLastElement(t){return c(this,Ve)?(c(this,Ve).push(t),A(this,qe,t.line),A(this,vi,t.points),A(this,Mn,0),{path:{d:this.toSVGPath()}}):c(this,po).setLastElement(t)}removeLastElement(){if(!c(this,Ve))return c(this,po).removeLastElement();c(this,Ve).pop(),A(this,ti,"");for(let t=0,e=c(this,Ve).length;t<e;t++){const{line:s,points:r}=c(this,Ve)[t];A(this,qe,s),A(this,vi,r),A(this,Mn,0),this.toSVGPath()}return{path:{d:c(this,ti)}}}toSVGPath(){const t=at.svgRound(c(this,qe)[4]),e=at.svgRound(c(this,qe)[5]);if(c(this,vi).length===2)return A(this,ti,`${c(this,ti)} M ${t} ${e} Z`),c(this,ti);if(c(this,vi).length<=6){const r=c(this,ti).lastIndexOf("M");A(this,ti,`${c(this,ti).slice(0,r)} M ${t} ${e}`),A(this,Mn,6)}if(c(this,vi).length===4){const r=at.svgRound(c(this,qe)[10]),l=at.svgRound(c(this,qe)[11]);return A(this,ti,`${c(this,ti)} L ${r} ${l}`),A(this,Mn,12),c(this,ti)}const s=[];c(this,Mn)===0&&(s.push(`M ${t} ${e}`),A(this,Mn,6));for(let r=c(this,Mn),l=c(this,qe).length;r<l;r+=6){const[u,h,f,p,m,b]=c(this,qe).slice(r,r+6).map(at.svgRound);s.push(`C${u} ${h} ${f} ${p} ${m} ${b}`)}return A(this,ti,c(this,ti)+s.join(" ")),A(this,Mn,c(this,qe).length),c(this,ti)}getOutlines(t,e,s,r){const l=c(this,Ve).at(-1);return l.line=new Float32Array(l.line),l.points=new Float32Array(l.points),c(this,po).build(c(this,Ve),t,e,s,c(this,go),c(this,xu),r),A(this,Ss,null),A(this,qe,null),A(this,Ve,null),A(this,ti,null),c(this,po)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Ss=new WeakMap,qe=new WeakMap,Ve=new WeakMap,go=new WeakMap,xu=new WeakMap,vi=new WeakMap,ti=new WeakMap,Mn=new WeakMap,po=new WeakMap,mo=new WeakMap,yo=new WeakMap,Cu=new WeakSet,Up=function(t,e){return at._normalizePoint(t,e,c(this,mo),c(this,yo),c(this,go))};var Ai,Pf,Bf,sn,_s,ws,Ru,Mu,bo,ni,Xs,tx,ex,ix;class Vf extends at{constructor(){super(...arguments);w(this,ni);w(this,Ai);w(this,Pf,0);w(this,Bf);w(this,sn);w(this,_s);w(this,ws);w(this,Ru);w(this,Mu);w(this,bo)}build(e,s,r,l,u,h,f){A(this,_s,s),A(this,ws,r),A(this,Ru,l),A(this,Mu,u),A(this,bo,h),A(this,Bf,f??0),A(this,sn,e),E(this,ni,ex).call(this)}get thickness(){return c(this,bo)}setLastElement(e){return c(this,sn).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return c(this,sn).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:s}of c(this,sn)){if(e.push(`M${at.svgRound(s[4])} ${at.svgRound(s[5])}`),s.length===6){e.push("Z");continue}if(s.length===12&&isNaN(s[6])){e.push(`L${at.svgRound(s[10])} ${at.svgRound(s[11])}`);continue}for(let r=6,l=s.length;r<l;r+=6){const[u,h,f,p,m,b]=s.subarray(r,r+6).map(at.svgRound);e.push(`C${u} ${h} ${f} ${p} ${m} ${b}`)}}return e.join("")}serialize([e,s,r,l],u){const h=[],f=[],[p,m,b,v]=E(this,ni,tx).call(this);let S,x,T,R,M,D,N,k,O;switch(c(this,Mu)){case 0:O=at._rescale,S=e,x=s+l,T=r,R=-l,M=e+p*r,D=s+(1-m-v)*l,N=e+(p+b)*r,k=s+(1-m)*l;break;case 90:O=at._rescaleAndSwap,S=e,x=s,T=r,R=l,M=e+m*r,D=s+p*l,N=e+(m+v)*r,k=s+(p+b)*l;break;case 180:O=at._rescale,S=e+r,x=s,T=-r,R=l,M=e+(1-p-b)*r,D=s+m*l,N=e+(1-p)*r,k=s+(m+v)*l;break;case 270:O=at._rescaleAndSwap,S=e+r,x=s+l,T=-r,R=-l,M=e+(1-m-v)*r,D=s+(1-p-b)*l,N=e+(1-m)*r,k=s+(1-p)*l;break}for(const{line:B,points:G}of c(this,sn))h.push(O(B,S,x,T,R,u?new Array(B.length):null)),f.push(O(G,S,x,T,R,u?new Array(G.length):null));return{lines:h,points:f,rect:[M,D,N,k]}}static deserialize(e,s,r,l,u,{paths:{lines:h,points:f},rotation:p,thickness:m}){const b=[];let v,S,x,T,R;switch(p){case 0:R=at._rescale,v=-e/r,S=s/l+1,x=1/r,T=-1/l;break;case 90:R=at._rescaleAndSwap,v=-s/l,S=-e/r,x=1/l,T=1/r;break;case 180:R=at._rescale,v=e/r+1,S=-s/l,x=-1/r,T=1/l;break;case 270:R=at._rescaleAndSwap,v=s/l+1,S=e/r+1,x=-1/l,T=-1/r;break}if(!h){h=[];for(const D of f){const N=D.length;if(N===2){h.push(new Float32Array([NaN,NaN,NaN,NaN,D[0],D[1]]));continue}if(N===4){h.push(new Float32Array([NaN,NaN,NaN,NaN,D[0],D[1],NaN,NaN,NaN,NaN,D[2],D[3]]));continue}const k=new Float32Array(3*(N-2));h.push(k);let[O,B,G,Q]=D.subarray(0,4);k.set([NaN,NaN,NaN,NaN,O,B],0);for(let W=4;W<N;W+=2){const nt=D[W],et=D[W+1];k.set(at.createBezierPoints(O,B,G,Q,nt,et),(W-2)*3),[O,B,G,Q]=[G,Q,nt,et]}}}for(let D=0,N=h.length;D<N;D++)b.push({line:R(h[D].map(k=>k??NaN),v,S,x,T),points:R(f[D].map(k=>k??NaN),v,S,x,T)});const M=new this.prototype.constructor;return M.build(b,r,l,1,p,m,u),M}get box(){return c(this,Ai)}updateProperty(e,s){return e==="stroke-width"?E(this,ni,ix).call(this,s):null}updateParentDimensions([e,s],r){const[l,u]=E(this,ni,Xs).call(this);A(this,_s,e),A(this,ws,s),A(this,Ru,r);const[h,f]=E(this,ni,Xs).call(this),p=h-l,m=f-u,b=c(this,Ai);return b[0]-=p,b[1]-=m,b[2]+=2*p,b[3]+=2*m,b}updateRotation(e){return A(this,Pf,e),{path:{transform:this.rotationTransform}}}get viewBox(){return c(this,Ai).map(at.svgRound).join(" ")}get defaultProperties(){const[e,s]=c(this,Ai);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${at.svgRound(e)} ${at.svgRound(s)}`}}}get rotationTransform(){const[,,e,s]=c(this,Ai);let r=0,l=0,u=0,h=0,f=0,p=0;switch(c(this,Pf)){case 90:l=s/e,u=-e/s,f=e;break;case 180:r=-1,h=-1,f=e,p=s;break;case 270:l=-s/e,u=e/s,p=s;break;default:return""}return`matrix(${r} ${l} ${u} ${h} ${at.svgRound(f)} ${at.svgRound(p)})`}getPathResizingSVGProperties([e,s,r,l]){const[u,h]=E(this,ni,Xs).call(this),[f,p,m,b]=c(this,Ai);if(Math.abs(m-u)<=at.PRECISION||Math.abs(b-h)<=at.PRECISION){const R=e+r/2-(f+m/2),M=s+l/2-(p+b/2);return{path:{"transform-origin":`${at.svgRound(e)} ${at.svgRound(s)}`,transform:`${this.rotationTransform} translate(${R} ${M})`}}}const v=(r-2*u)/(m-2*u),S=(l-2*h)/(b-2*h),x=m/r,T=b/l;return{path:{"transform-origin":`${at.svgRound(f)} ${at.svgRound(p)}`,transform:`${this.rotationTransform} scale(${x} ${T}) translate(${at.svgRound(u)} ${at.svgRound(h)}) scale(${v} ${S}) translate(${at.svgRound(-u)} ${at.svgRound(-h)})`}}}getPathResizedSVGProperties([e,s,r,l]){const[u,h]=E(this,ni,Xs).call(this),f=c(this,Ai),[p,m,b,v]=f;if(f[0]=e,f[1]=s,f[2]=r,f[3]=l,Math.abs(b-u)<=at.PRECISION||Math.abs(v-h)<=at.PRECISION){const M=e+r/2-(p+b/2),D=s+l/2-(m+v/2);for(const{line:N,points:k}of c(this,sn))at._translate(N,M,D,N),at._translate(k,M,D,k);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${at.svgRound(e)} ${at.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const S=(r-2*u)/(b-2*u),x=(l-2*h)/(v-2*h),T=-S*(p+u)+e+u,R=-x*(m+h)+s+h;if(S!==1||x!==1||T!==0||R!==0)for(const{line:M,points:D}of c(this,sn))at._rescale(M,T,R,S,x,M),at._rescale(D,T,R,S,x,D);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${at.svgRound(e)} ${at.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,s],r){const[l,u]=r,h=c(this,Ai),f=e-h[0],p=s-h[1];if(c(this,_s)===l&&c(this,ws)===u)for(const{line:m,points:b}of c(this,sn))at._translate(m,f,p,m),at._translate(b,f,p,b);else{const m=c(this,_s)/l,b=c(this,ws)/u;A(this,_s,l),A(this,ws,u);for(const{line:v,points:S}of c(this,sn))at._rescale(v,f,p,m,b,v),at._rescale(S,f,p,m,b,S);h[2]*=m,h[3]*=b}return h[0]=e,h[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${at.svgRound(e)} ${at.svgRound(s)}`}}}get defaultSVGProperties(){const e=c(this,Ai);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${at.svgRound(e[0])} ${at.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}Ai=new WeakMap,Pf=new WeakMap,Bf=new WeakMap,sn=new WeakMap,_s=new WeakMap,ws=new WeakMap,Ru=new WeakMap,Mu=new WeakMap,bo=new WeakMap,ni=new WeakSet,Xs=function(e=c(this,bo)){const s=c(this,Bf)+e/2*c(this,Ru);return c(this,Mu)%180===0?[s/c(this,_s),s/c(this,ws)]:[s/c(this,ws),s/c(this,_s)]},tx=function(){const[e,s,r,l]=c(this,Ai),[u,h]=E(this,ni,Xs).call(this,0);return[e+u,s+h,r-2*u,l-2*h]},ex=function(){const e=A(this,Ai,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:l}of c(this,sn)){if(l.length<=12){for(let f=4,p=l.length;f<p;f+=6)dt.pointBoundingBox(l[f],l[f+1],e);continue}let u=l[4],h=l[5];for(let f=6,p=l.length;f<p;f+=6){const[m,b,v,S,x,T]=l.subarray(f,f+6);dt.bezierBoundingBox(u,h,m,b,v,S,x,T,e),u=x,h=T}}const[s,r]=E(this,ni,Xs).call(this);e[0]=wi(e[0]-s,0,1),e[1]=wi(e[1]-r,0,1),e[2]=wi(e[2]+s,0,1),e[3]=wi(e[3]+r,0,1),e[2]-=e[0],e[3]-=e[1]},ix=function(e){const[s,r]=E(this,ni,Xs).call(this);A(this,bo,e);const[l,u]=E(this,ni,Xs).call(this),[h,f]=[l-s,u-r],p=c(this,Ai);return p[0]-=h,p[1]-=f,p[2]+=2*h,p[3]+=2*f,p};class zm extends ZT{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:re._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new zm(this._viewParameters);return t.updateAll(this),t}}var wm,nx;const xc=class xc extends am{constructor(e){super({...e,name:"inkEditor"});w(this,wm);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,s){re.initialize(e,s),this._defaultDrawingOptions=new zm(s.viewParameters)}static getDefaultDrawingOptions(e){const s=this._defaultDrawingOptions.clone();return s.updateProperties(e),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return zt(this,"typesMap",new Map([[Pt.INK_THICKNESS,"stroke-width"],[Pt.INK_COLOR,"stroke"],[Pt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,s,r,l,u){return new $D(e,s,r,l,u,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,s,r,l,u,h){return Vf.deserialize(e,s,r,l,u,h)}static async deserialize(e,s,r){let l=null;if(e instanceof Jv){const{data:{inkLists:h,rect:f,rotation:p,id:m,color:b,opacity:v,borderStyle:{rawWidth:S},popupRef:x},parent:{page:{pageNumber:T}}}=e;l=e={annotationType:At.INK,color:Array.from(b),thickness:S,opacity:v,paths:{points:h},boxes:null,pageIndex:T-1,rect:f.slice(0),rotation:p,id:m,deleted:!1,popupRef:x}}const u=await super.deserialize(e,s,r);return u.annotationElementId=e.id||null,u._initialData=l,u}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:s,parent:r}=this;s.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(e,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:s,opacity:r}){this._drawingOptions=xc.getDefaultDrawingOptions({stroke:dt.makeHexColor(...e),"stroke-width":s,"stroke-opacity":r})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:r,rect:l}=this.serializeDraw(e),{_drawingOptions:{stroke:u,"stroke-opacity":h,"stroke-width":f}}=this,p={annotationType:At.INK,color:re._colorManager.convert(u),opacity:h,thickness:f,paths:{lines:s,points:r},pageIndex:this.pageIndex,rect:l,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(p.isCopy=!0,p):this.annotationElementId&&!E(this,wm,nx).call(this,p)?null:(p.id=this.annotationElementId,p)}renderAnnotationElement(e){const{points:s,rect:r}=this.serializeDraw(!1);return e.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:s}),null}};wm=new WeakSet,nx=function(e){const{color:s,thickness:r,opacity:l,pageIndex:u}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((h,f)=>h!==s[f])||e.thickness!==r||e.opacity!==l||e.pageIndex!==u},J(xc,"_type","ink"),J(xc,"_editorType",At.INK),J(xc,"_defaultDrawingOptions",null);let Tv=xc;class xv extends Vf{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const gp=8,Uh=3;var vo,Xt,Cv,Yn,sx,ax,Rv,Ip,rx,lx,ox,Mv,Dv,cx;class Ea{static extractContoursFromText(t,{fontFamily:e,fontStyle:s,fontWeight:r},l,u,h,f){let p=new OffscreenCanvas(1,1),m=p.getContext("2d",{alpha:!1});const b=200,v=m.font=`${s} ${r} ${b}px ${e}`,{actualBoundingBoxLeft:S,actualBoundingBoxRight:x,actualBoundingBoxAscent:T,actualBoundingBoxDescent:R,fontBoundingBoxAscent:M,fontBoundingBoxDescent:D,width:N}=m.measureText(t),k=1.5,O=Math.ceil(Math.max(Math.abs(S)+Math.abs(x)||0,N)*k),B=Math.ceil(Math.max(Math.abs(T)+Math.abs(R)||b,Math.abs(M)+Math.abs(D)||b)*k);p=new OffscreenCanvas(O,B),m=p.getContext("2d",{alpha:!0,willReadFrequently:!0}),m.font=v,m.filter="grayscale(1)",m.fillStyle="white",m.fillRect(0,0,O,B),m.fillStyle="black",m.fillText(t,O*(k-1)/2,B*(3-k)/2);const G=E(this,Xt,Mv).call(this,m.getImageData(0,0,O,B).data),Q=E(this,Xt,ox).call(this,G),W=E(this,Xt,Dv).call(this,Q),nt=E(this,Xt,Rv).call(this,G,O,B,W);return this.processDrawnLines({lines:{curves:nt,width:O,height:B},pageWidth:l,pageHeight:u,rotation:h,innerMargin:f,mustSmooth:!0,areContours:!0})}static process(t,e,s,r,l){const[u,h,f]=E(this,Xt,cx).call(this,t),[p,m]=E(this,Xt,lx).call(this,u,h,f,Math.hypot(h,f)*c(this,vo).sigmaSFactor,c(this,vo).sigmaR,c(this,vo).kernelSize),b=E(this,Xt,Dv).call(this,m),v=E(this,Xt,Rv).call(this,p,h,f,b);return this.processDrawnLines({lines:{curves:v,width:h,height:f},pageWidth:e,pageHeight:s,rotation:r,innerMargin:l,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:s,rotation:r,innerMargin:l,mustSmooth:u,areContours:h}){r%180!==0&&([e,s]=[s,e]);const{curves:f,width:p,height:m}=t,b=t.thickness??0,v=[],S=Math.min(e/p,s/m),x=S/e,T=S/s,R=[];for(const{points:D}of f){const N=u?E(this,Xt,rx).call(this,D):D;if(!N)continue;R.push(N);const k=N.length,O=new Float32Array(k),B=new Float32Array(3*(k===2?2:k-2));if(v.push({line:B,points:O}),k===2){O[0]=N[0]*x,O[1]=N[1]*T,B.set([NaN,NaN,NaN,NaN,O[0],O[1]],0);continue}let[G,Q,W,nt]=N;G*=x,Q*=T,W*=x,nt*=T,O.set([G,Q,W,nt],0),B.set([NaN,NaN,NaN,NaN,G,Q],0);for(let et=4;et<k;et+=2){const yt=O[et]=N[et]*x,Lt=O[et+1]=N[et+1]*T;B.set(at.createBezierPoints(G,Q,W,nt,yt,Lt),(et-2)*3),[G,Q,W,nt]=[W,nt,yt,Lt]}}if(v.length===0)return null;const M=h?new xv:new Vf;return M.build(v,e,s,1,r,h?0:b,l),{outline:M,newCurves:R,areContours:h,thickness:b,width:p,height:m}}static async compressSignature({outlines:t,areContours:e,thickness:s,width:r,height:l}){let u=1/0,h=-1/0,f=0;for(const N of t){f+=N.length;for(let k=2,O=N.length;k<O;k++){const B=N[k]-N[k-2];u=Math.min(u,B),h=Math.max(h,B)}}let p;u>=-128&&h<=127?p=Int8Array:u>=-32768&&h<=32767?p=Int16Array:p=Int32Array;const m=t.length,b=gp+Uh*m,v=new Uint32Array(b);let S=0;v[S++]=b*Uint32Array.BYTES_PER_ELEMENT+(f-2*m)*p.BYTES_PER_ELEMENT,v[S++]=0,v[S++]=r,v[S++]=l,v[S++]=e?0:1,v[S++]=Math.max(0,Math.floor(s??0)),v[S++]=m,v[S++]=p.BYTES_PER_ELEMENT;for(const N of t)v[S++]=N.length-2,v[S++]=N[0],v[S++]=N[1];const x=new CompressionStream("deflate-raw"),T=x.writable.getWriter();await T.ready,T.write(v);const R=p.prototype.constructor;for(const N of t){const k=new R(N.length-2);for(let O=2,B=N.length;O<B;O++)k[O-2]=N[O]-N[O-2];T.write(k)}T.close();const M=await new Response(x.readable).arrayBuffer(),D=new Uint8Array(M);return oE(D)}static async decompressSignature(t){try{const e=b2(t),{readable:s,writable:r}=new DecompressionStream("deflate-raw"),l=r.getWriter();await l.ready,l.write(e).then(async()=>{await l.ready,await l.close()}).catch(()=>{});let u=null,h=0;for await(const N of s)u||(u=new Uint8Array(new Uint32Array(N.buffer,0,4)[0])),u.set(N,h),h+=N.length;const f=new Uint32Array(u.buffer,0,u.length>>2),p=f[1];if(p!==0)throw new Error(`Invalid version: ${p}`);const m=f[2],b=f[3],v=f[4]===0,S=f[5],x=f[6],T=f[7],R=[],M=(gp+Uh*x)*Uint32Array.BYTES_PER_ELEMENT;let D;switch(T){case Int8Array.BYTES_PER_ELEMENT:D=new Int8Array(u.buffer,M);break;case Int16Array.BYTES_PER_ELEMENT:D=new Int16Array(u.buffer,M);break;case Int32Array.BYTES_PER_ELEMENT:D=new Int32Array(u.buffer,M);break}h=0;for(let N=0;N<x;N++){const k=f[Uh*N+gp],O=new Float32Array(k+2);R.push(O);for(let B=0;B<Uh-1;B++)O[B]=f[Uh*N+gp+B+1];for(let B=0;B<k;B++)O[B+2]=O[B]+D[h++]}return{areContours:v,thickness:S,outlines:R,width:m,height:b}}catch(e){return St(`decompressSignature: ${e}`),null}}}vo=new WeakMap,Xt=new WeakSet,Cv=function(t,e,s,r){return s-=t,r-=e,s===0?r>0?0:4:s===1?r+6:2-r},Yn=new WeakMap,sx=function(t,e,s,r,l,u,h){const f=E(this,Xt,Cv).call(this,s,r,l,u);for(let p=0;p<8;p++){const m=(-p+f-h+16)%8,b=c(this,Yn)[2*m],v=c(this,Yn)[2*m+1];if(t[(s+b)*e+(r+v)]!==0)return m}return-1},ax=function(t,e,s,r,l,u,h){const f=E(this,Xt,Cv).call(this,s,r,l,u);for(let p=0;p<8;p++){const m=(p+f+h+16)%8,b=c(this,Yn)[2*m],v=c(this,Yn)[2*m+1];if(t[(s+b)*e+(r+v)]!==0)return m}return-1},Rv=function(t,e,s,r){const l=t.length,u=new Int32Array(l);for(let m=0;m<l;m++)u[m]=t[m]<=r?1:0;for(let m=1;m<s-1;m++)u[m*e]=u[m*e+e-1]=0;for(let m=0;m<e;m++)u[m]=u[e*s-1-m]=0;let h=1,f;const p=[];for(let m=1;m<s-1;m++){f=1;for(let b=1;b<e-1;b++){const v=m*e+b,S=u[v];if(S===0)continue;let x=m,T=b;if(S===1&&u[v-1]===0)h+=1,T-=1;else if(S>=1&&u[v+1]===0)h+=1,T+=1,S>1&&(f=S);else{S!==1&&(f=Math.abs(S));continue}const R=[b,m],M=T===b+1,D={isHole:M,points:R,id:h,parent:0};p.push(D);let N;for(const et of p)if(et.id===f){N=et;break}N?N.isHole?D.parent=M?N.parent:f:D.parent=M?f:N.parent:D.parent=M?f:0;const k=E(this,Xt,sx).call(this,u,e,m,b,x,T,0);if(k===-1){u[v]=-h,u[v]!==1&&(f=Math.abs(u[v]));continue}let O=c(this,Yn)[2*k],B=c(this,Yn)[2*k+1];const G=m+O,Q=b+B;x=G,T=Q;let W=m,nt=b;for(;;){const et=E(this,Xt,ax).call(this,u,e,W,nt,x,T,1);O=c(this,Yn)[2*et],B=c(this,Yn)[2*et+1];const yt=W+O,Lt=nt+B;R.push(Lt,yt);const vt=W*e+nt;if(u[vt+1]===0?u[vt]=-h:u[vt]===1&&(u[vt]=h),yt===m&&Lt===b&&W===G&&nt===Q){u[v]!==1&&(f=Math.abs(u[v]));break}else x=W,T=nt,W=yt,nt=Lt}}}return p},Ip=function(t,e,s,r){if(s-e<=4){for(let G=e;G<s-2;G+=2)r.push(t[G],t[G+1]);return}const l=t[e],u=t[e+1],h=t[s-4]-l,f=t[s-3]-u,p=Math.hypot(h,f),m=h/p,b=f/p,v=m*u-b*l,S=f/h,x=1/p,T=Math.atan(S),R=Math.cos(T),M=Math.sin(T),D=x*(Math.abs(R)+Math.abs(M)),N=x*(1-D+D**2),k=Math.max(Math.atan(Math.abs(M+R)*N),Math.atan(Math.abs(M-R)*N));let O=0,B=e;for(let G=e+2;G<s-2;G+=2){const Q=Math.abs(v-m*t[G+1]+b*t[G]);Q>O&&(B=G,O=Q)}O>(p*k)**2?(E(this,Xt,Ip).call(this,t,e,B+2,r),E(this,Xt,Ip).call(this,t,B,s,r)):r.push(l,u)},rx=function(t){const e=[],s=t.length;return E(this,Xt,Ip).call(this,t,0,s,e),e.push(t[s-2],t[s-1]),e.length<=4?null:e},lx=function(t,e,s,r,l,u){const h=new Float32Array(u**2),f=-2*r**2,p=u>>1;for(let T=0;T<u;T++){const R=(T-p)**2;for(let M=0;M<u;M++)h[T*u+M]=Math.exp((R+(M-p)**2)/f)}const m=new Float32Array(256),b=-2*l**2;for(let T=0;T<256;T++)m[T]=Math.exp(T**2/b);const v=t.length,S=new Uint8Array(v),x=new Uint32Array(256);for(let T=0;T<s;T++)for(let R=0;R<e;R++){const M=T*e+R,D=t[M];let N=0,k=0;for(let B=0;B<u;B++){const G=T+B-p;if(!(G<0||G>=s))for(let Q=0;Q<u;Q++){const W=R+Q-p;if(W<0||W>=e)continue;const nt=t[G*e+W],et=h[B*u+Q]*m[Math.abs(nt-D)];N+=nt*et,k+=et}}const O=S[M]=Math.round(N/k);x[O]++}return[S,x]},ox=function(t){const e=new Uint32Array(256);for(const s of t)e[s]++;return e},Mv=function(t){const e=t.length,s=new Uint8ClampedArray(e>>2);let r=-1/0,l=1/0;for(let h=0,f=s.length;h<f;h++){if(t[(h<<2)+3]===0){r=s[h]=255;continue}const m=s[h]=t[h<<2];m>r&&(r=m),m<l&&(l=m)}const u=255/(r-l);for(let h=0;h<e;h++)s[h]=(s[h]-l)*u;return s},Dv=function(t){let e,s=-1/0,r=-1/0;const l=t.findIndex(f=>f!==0);let u=l,h=l;for(e=l;e<256;e++){const f=t[e];f>s&&(e-u>r&&(r=e-u,h=e-1),s=f,u=e)}for(e=h-1;e>=0&&!(t[e]>t[e+1]);e--);return e},cx=function(t){const e=t,{width:s,height:r}=t,{maxDim:l}=c(this,vo);let u=s,h=r;if(s>l||r>l){let v=s,S=r,x=Math.log2(Math.max(s,r)/l);const T=Math.floor(x);x=x===T?T-1:T;for(let M=0;M<x;M++){u=Math.ceil(v/2),h=Math.ceil(S/2);const D=new OffscreenCanvas(u,h);D.getContext("2d").drawImage(t,0,0,v,S,0,0,u,h),v=u,S=h,t!==e&&t.close(),t=D.transferToImageBitmap()}const R=Math.min(l/u,l/h);u=Math.round(u*R),h=Math.round(h*R)}const p=new OffscreenCanvas(u,h).getContext("2d",{willReadFrequently:!0});p.filter="grayscale(1)",p.drawImage(t,0,0,t.width,t.height,0,0,u,h);const m=p.getImageData(0,0,u,h).data;return[E(this,Xt,Mv).call(this,m),u,h]},w(Ea,Xt),w(Ea,vo,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),w(Ea,Yn,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class tA extends ZT{constructor(){super(),super.updateProperties({fill:re._defaultLineColor,"stroke-width":0})}clone(){const t=new tA;return t.updateAll(this),t}}class eA extends zm{constructor(t){super(t),super.updateProperties({stroke:re._defaultLineColor,"stroke-width":1})}clone(){const t=new eA(this._viewParameters);return t.updateAll(this),t}}var Nr,an,Lr,kr;const Xi=class Xi extends am{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});w(this,Nr,!1);w(this,an,null);w(this,Lr,null);w(this,kr,null);this._willKeepAspectRatio=!0,A(this,Lr,e.signatureData||null),A(this,an,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,s){re.initialize(e,s),this._defaultDrawingOptions=new tA,this._defaultDrawnSignatureOptions=new eA(s.viewParameters)}static getDefaultDrawingOptions(e){const s=this._defaultDrawingOptions.clone();return s.updateProperties(e),s}static get supportMultipleDrawings(){return!1}static get typesMap(){return zt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!c(this,an)}}static computeTelemetryFinalData(e){const s=e.get("hasDescription");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,s;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,e=this.x,s=this.y),super.render(),this._drawId===null)if(c(this,Lr)){const{lines:l,mustSmooth:u,areContours:h,description:f,uuid:p,heightInPage:m}=c(this,Lr),{rawDims:{pageWidth:b,pageHeight:v},rotation:S}=this.parent.viewport,x=Ea.processDrawnLines({lines:l,pageWidth:b,pageHeight:v,rotation:S,innerMargin:Xi._INNER_MARGIN,mustSmooth:u,areContours:h});this.addSignature(x,m,f,p)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return r&&(this._isCopy=!0,this._moveAfterPaste(e,s)),this.div}setUuid(e){A(this,kr,e),this.addEditToolbar()}getUuid(){return c(this,kr)}get description(){return c(this,an)}set description(e){A(this,an,e),super.addEditToolbar().then(s=>{s==null||s.updateEditSignatureButton(e)})}getSignaturePreview(){const{newCurves:e,areContours:s,thickness:r,width:l,height:u}=c(this,Lr),h=Math.max(l,u),f=Ea.processDrawnLines({lines:{curves:e.map(p=>({points:p})),thickness:r,width:l,height:u},pageWidth:h,pageHeight:h,rotation:0,innerMargin:0,mustSmooth:!1,areContours:s});return{areContours:s,outline:f.outline}}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.signatureManager&&c(this,an)!==null&&(await e.addEditSignatureButton(this._uiManager.signatureManager,c(this,kr),c(this,an)),e.show()),e):null}addSignature(e,s,r,l){const{x:u,y:h}=this,{outline:f}=A(this,Lr,e);A(this,Nr,f instanceof xv),A(this,an,r),this.div.setAttribute("data-l10n-args",JSON.stringify({description:r}));let p;c(this,Nr)?p=Xi.getDefaultDrawingOptions():(p=Xi._defaultDrawnSignatureOptions.clone(),p.updateProperties({"stroke-width":f.thickness})),this._addOutlines({drawOutlines:f,drawingOptions:p});const[m,b]=this.parentDimensions,[,v]=this.pageDimensions;let S=s/v;S=S>=1?.5:S,this.width*=S/this.height,this.width>=1&&(S*=.9/this.width,this.width=.9),this.height=S,this.setDims(m*this.width,b*this.height),this.x=u,this.y=h,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(l),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!l,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:s,pageHeight:r},rotation:l}=this.parent.viewport;return Ea.process(e,s,r,l,Xi._INNER_MARGIN)}getFromText(e,s){const{rawDims:{pageWidth:r,pageHeight:l},rotation:u}=this.parent.viewport;return Ea.extractContoursFromText(e,s,r,l,u,Xi._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:s,pageHeight:r},rotation:l}=this.parent.viewport;return Ea.processDrawnLines({lines:e,pageWidth:s,pageHeight:r,rotation:l,innerMargin:Xi._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:s}){e?this._drawingOptions=Xi.getDefaultDrawingOptions():(this._drawingOptions=Xi._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":s}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:s,points:r,rect:l}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":u}}=this,h={annotationType:At.SIGNATURE,isSignature:!0,areContours:c(this,Nr),color:[0,0,0],thickness:c(this,Nr)?0:u,pageIndex:this.pageIndex,rect:l,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(h.paths={lines:s,points:r},h.uuid=c(this,kr),h.isCopy=!0):h.lines=s,c(this,an)&&(h.accessibilityData={type:"Figure",alt:c(this,an)}),h}static deserializeDraw(e,s,r,l,u,h){return h.areContours?xv.deserialize(e,s,r,l,u,h):Vf.deserialize(e,s,r,l,u,h)}static async deserialize(e,s,r){var u;const l=await super.deserialize(e,s,r);return A(l,Nr,e.areContours),A(l,an,((u=e.accessibilityData)==null?void 0:u.alt)||""),A(l,kr,e.uuid),l}};Nr=new WeakMap,an=new WeakMap,Lr=new WeakMap,kr=new WeakMap,J(Xi,"_type","signature"),J(Xi,"_editorType",At.SIGNATURE),J(Xi,"_defaultDrawingOptions",null);let Ov=Xi;var ue,Xe,zr,va,Pr,Du,Aa,Ao,Es,rn,Ou,It,sd,ad,Fp,Gp,jp,Lv,qp,ux;class Nv extends re{constructor(e){super({...e,name:"stampEditor"});w(this,It);w(this,ue,null);w(this,Xe,null);w(this,zr,null);w(this,va,null);w(this,Pr,null);w(this,Du,"");w(this,Aa,null);w(this,Ao,!1);w(this,Es,null);w(this,rn,!1);w(this,Ou,!1);A(this,va,e.bitmapUrl),A(this,Pr,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,s){re.initialize(e,s)}static isHandlingMimeForPasting(e){return T0.includes(e)}static paste(e,s){s.pasteEditor({mode:At.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const s=e.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(e=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:l,width:u,height:h}=e||this.copyCanvas(null,null,!0).imageData,f=await r.guess({name:"altText",request:{data:l,width:u,height:h,channels:l.length/(u*h)}});if(!f)throw new Error("No response from the AI service.");if(f.error)throw new Error("Error from the AI service.");if(f.cancel)return null;if(!f.output)throw new Error("No valid response from the AI service.");const p=f.output;return await this.setGuessedAltText(p),s&&!this.hasAltTextData()&&(this.altTextData={alt:p,decorative:!1}),p}remove(){var e;c(this,Xe)&&(A(this,ue,null),this._uiManager.imageManager.deleteId(c(this,Xe)),(e=c(this,Aa))==null||e.remove(),A(this,Aa,null),c(this,Es)&&(clearTimeout(c(this,Es)),A(this,Es,null))),super.remove()}rebuild(){if(!this.parent){c(this,Xe)&&E(this,It,Fp).call(this);return}super.rebuild(),this.div!==null&&(c(this,Xe)&&c(this,Aa)===null&&E(this,It,Fp).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(c(this,zr)||c(this,ue)||c(this,va)||c(this,Pr)||c(this,Xe)||c(this,Ao))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,s;return this._isCopy&&(e=this.x,s=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),c(this,Ao)||(c(this,ue)?E(this,It,Gp).call(this):E(this,It,Fp).call(this)),this._isCopy&&this._moveAfterPaste(e,s),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,s){const{id:r,bitmap:l}=this._uiManager.imageManager.getFromCanvas(e,s);s.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(A(this,Xe,r),l&&A(this,ue,l),A(this,Ao,!1),E(this,It,Gp).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;c(this,Es)!==null&&clearTimeout(c(this,Es)),A(this,Es,setTimeout(()=>{A(this,Es,null),E(this,It,Lv).call(this)},200))}copyCanvas(e,s,r=!1){var S;e||(e=224);const{width:l,height:u}=c(this,ue),h=new Cs;let f=c(this,ue),p=l,m=u,b=null;if(s){if(l>s||u>s){const Q=Math.min(s/l,s/u);p=Math.floor(l*Q),m=Math.floor(u*Q)}b=document.createElement("canvas");const x=b.width=Math.ceil(p*h.sx),T=b.height=Math.ceil(m*h.sy);c(this,rn)||(f=E(this,It,jp).call(this,x,T));const R=b.getContext("2d");R.filter=this._uiManager.hcmFilter;let M="white",D="#cfcfd8";this._uiManager.hcmFilter!=="none"?D="black":(S=window.matchMedia)!=null&&S.call(window,"(prefers-color-scheme: dark)").matches&&(M="#8f8f9d",D="#42414d");const N=15,k=N*h.sx,O=N*h.sy,B=new OffscreenCanvas(k*2,O*2),G=B.getContext("2d");G.fillStyle=M,G.fillRect(0,0,k*2,O*2),G.fillStyle=D,G.fillRect(0,0,k,O),G.fillRect(k,O,k,O),R.fillStyle=R.createPattern(B,"repeat"),R.fillRect(0,0,x,T),R.drawImage(f,0,0,f.width,f.height,0,0,x,T)}let v=null;if(r){let x,T;if(h.symmetric&&f.width<e&&f.height<e)x=f.width,T=f.height;else if(f=c(this,ue),l>e||u>e){const D=Math.min(e/l,e/u);x=Math.floor(l*D),T=Math.floor(u*D),c(this,rn)||(f=E(this,It,jp).call(this,x,T))}const M=new OffscreenCanvas(x,T).getContext("2d",{willReadFrequently:!0});M.drawImage(f,0,0,f.width,f.height,0,0,x,T),v={width:x,height:T,data:M.getImageData(0,0,x,T).data}}return{canvas:b,width:p,height:m,imageData:v}}static async deserialize(e,s,r){var R;let l=null,u=!1;if(e instanceof TT){const{data:{rect:M,rotation:D,id:N,structParent:k,popupRef:O},container:B,parent:{page:{pageNumber:G}},canvas:Q}=e;let W,nt;Q?(delete e.canvas,{id:W,bitmap:nt}=r.imageManager.getFromCanvas(B.id,Q),Q.remove()):(u=!0,e._hasNoCanvas=!0);const et=((R=await s._structTree.getAriaAttributes(`${Vv}${N}`))==null?void 0:R.get("aria-label"))||"";l=e={annotationType:At.STAMP,bitmapId:W,bitmap:nt,pageIndex:G-1,rect:M.slice(0),rotation:D,id:N,deleted:!1,accessibilityData:{decorative:!1,altText:et},isSvg:!1,structParent:k,popupRef:O}}const h=await super.deserialize(e,s,r),{rect:f,bitmap:p,bitmapUrl:m,bitmapId:b,isSvg:v,accessibilityData:S}=e;u?(r.addMissingCanvas(e.id,h),A(h,Ao,!0)):b&&r.imageManager.isValidId(b)?(A(h,Xe,b),p&&A(h,ue,p)):A(h,va,m),A(h,rn,v);const[x,T]=h.pageDimensions;return h.width=(f[2]-f[0])/x,h.height=(f[3]-f[1])/T,h.annotationElementId=e.id||null,S&&(h.altTextData=S),h._initialData=l,A(h,Ou,!!l),h}serialize(e=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:At.STAMP,bitmapId:c(this,Xe),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:c(this,rn),structTreeParentId:this._structTreeParentId};if(e)return r.bitmapUrl=E(this,It,qp).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:l,altText:u}=this.serializeAltText(!1);if(!l&&u&&(r.accessibilityData={type:"Figure",alt:u}),this.annotationElementId){const f=E(this,It,ux).call(this,r);if(f.isSame)return null;f.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,s===null)return r;s.stamps||(s.stamps=new Map);const h=c(this,rn)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!s.stamps.has(c(this,Xe)))s.stamps.set(c(this,Xe),{area:h,serialized:r}),r.bitmap=E(this,It,qp).call(this,!1);else if(c(this,rn)){const f=s.stamps.get(c(this,Xe));h>f.area&&(f.area=h,f.serialized.bitmap.close(),f.serialized.bitmap=E(this,It,qp).call(this,!1))}return r}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}ue=new WeakMap,Xe=new WeakMap,zr=new WeakMap,va=new WeakMap,Pr=new WeakMap,Du=new WeakMap,Aa=new WeakMap,Ao=new WeakMap,Es=new WeakMap,rn=new WeakMap,Ou=new WeakMap,It=new WeakSet,sd=function(e,s=!1){if(!e){this.remove();return}A(this,ue,e.bitmap),s||(A(this,Xe,e.id),A(this,rn,e.isSvg)),e.file&&A(this,Du,e.file.name),E(this,It,Gp).call(this)},ad=function(){if(A(this,zr,null),this._uiManager.enableWaiting(!1),!!c(this,Aa)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,ue)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,ue)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Fp=function(){if(c(this,Xe)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,Xe)).then(r=>E(this,It,sd).call(this,r,!0)).finally(()=>E(this,It,ad).call(this));return}if(c(this,va)){const r=c(this,va);A(this,va,null),this._uiManager.enableWaiting(!0),A(this,zr,this._uiManager.imageManager.getFromUrl(r).then(l=>E(this,It,sd).call(this,l)).finally(()=>E(this,It,ad).call(this)));return}if(c(this,Pr)){const r=c(this,Pr);A(this,Pr,null),this._uiManager.enableWaiting(!0),A(this,zr,this._uiManager.imageManager.getFromFile(r).then(l=>E(this,It,sd).call(this,l)).finally(()=>E(this,It,ad).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=T0.join(",");const s=this._uiManager._signal;A(this,zr,new Promise(r=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const l=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),E(this,It,sd).call(this,l)}r()},{signal:s}),e.addEventListener("cancel",()=>{this.remove(),r()},{signal:s})}).finally(()=>E(this,It,ad).call(this))),e.click()},Gp=function(){var b;const{div:e}=this;let{width:s,height:r}=c(this,ue);const[l,u]=this.pageDimensions,h=.75;if(this.width)s=this.width*l,r=this.height*u;else if(s>h*l||r>h*u){const v=Math.min(h*l/s,h*u/r);s*=v,r*=v}const[f,p]=this.parentDimensions;this.setDims(s*f/l,r*p/u),this._uiManager.enableWaiting(!1);const m=A(this,Aa,document.createElement("canvas"));m.setAttribute("role","img"),this.addContainer(m),this.width=s/l,this.height=r/u,(b=this._initialOptions)!=null&&b.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),E(this,It,Lv).call(this),c(this,Ou)||(this.parent.addUndoableEditor(this),A(this,Ou,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,Du)&&this.div.setAttribute("aria-description",c(this,Du))},jp=function(e,s){const{width:r,height:l}=c(this,ue);let u=r,h=l,f=c(this,ue);for(;u>2*e||h>2*s;){const p=u,m=h;u>2*e&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2)),h>2*s&&(h=h>=16384?Math.floor(h/2)-1:Math.ceil(h/2));const b=new OffscreenCanvas(u,h);b.getContext("2d").drawImage(f,0,0,p,m,0,0,u,h),f=b.transferToImageBitmap()}return f},Lv=function(){const[e,s]=this.parentDimensions,{width:r,height:l}=this,u=new Cs,h=Math.ceil(r*e*u.sx),f=Math.ceil(l*s*u.sy),p=c(this,Aa);if(!p||p.width===h&&p.height===f)return;p.width=h,p.height=f;const m=c(this,rn)?c(this,ue):E(this,It,jp).call(this,h,f),b=p.getContext("2d");b.filter=this._uiManager.hcmFilter,b.drawImage(m,0,0,m.width,m.height,0,0,h,f)},qp=function(e){if(e){if(c(this,rn)){const l=this._uiManager.imageManager.getSvgUrl(c(this,Xe));if(l)return l}const s=document.createElement("canvas");return{width:s.width,height:s.height}=c(this,ue),s.getContext("2d").drawImage(c(this,ue),0,0),s.toDataURL()}if(c(this,rn)){const[s,r]=this.pageDimensions,l=Math.round(this.width*s*Gr.PDF_TO_CSS_UNITS),u=Math.round(this.height*r*Gr.PDF_TO_CSS_UNITS),h=new OffscreenCanvas(l,u);return h.getContext("2d").drawImage(c(this,ue),0,0,c(this,ue).width,c(this,ue).height,0,0,l,u),h.transferToImageBitmap()}return structuredClone(c(this,ue))},ux=function(e){var h;const{pageIndex:s,accessibilityData:{altText:r}}=this._initialData,l=e.pageIndex===s,u=(((h=e.accessibilityData)==null?void 0:h.alt)||"")===r;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&l&&u,isSameAltText:u}},J(Nv,"_type","stamp"),J(Nv,"_editorType",At.STAMP);var So,Nu,Ts,Br,Sa,Dn,Hr,Lu,_o,$n,_a,gi,wa,ut,Ur,he,hx,cs,zv,Pv,Vp;const Pn=class Pn{constructor({uiManager:t,pageIndex:e,div:s,structTreeLayer:r,accessibilityManager:l,annotationLayer:u,drawLayer:h,textLayer:f,viewport:p,l10n:m}){w(this,he);w(this,So);w(this,Nu,!1);w(this,Ts,null);w(this,Br,null);w(this,Sa,null);w(this,Dn,new Map);w(this,Hr,!1);w(this,Lu,!1);w(this,_o,!1);w(this,$n,null);w(this,_a,null);w(this,gi,null);w(this,wa,null);w(this,ut);const b=[...c(Pn,Ur).values()];if(!Pn._initialized){Pn._initialized=!0;for(const v of b)v.initialize(m,t)}t.registerEditorTypes(b),A(this,ut,t),this.pageIndex=e,this.div=s,A(this,So,l),A(this,Ts,u),this.viewport=p,A(this,gi,f),this.drawLayer=h,this._structTree=r,c(this,ut).addLayer(this)}get isEmpty(){return c(this,Dn).size===0}get isInvisible(){return this.isEmpty&&c(this,ut).getMode()===At.NONE}updateToolbar(t){c(this,ut).updateToolbar(t)}updateMode(t=c(this,ut).getMode()){switch(E(this,he,Vp).call(this),t){case At.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case At.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case At.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const s of c(Pn,Ur).values())e.toggle(`${s._type}Editing`,t===s._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=c(this,gi))==null?void 0:e.div)}setEditingState(t){c(this,ut).setEditingState(t)}addCommands(t){c(this,ut).addCommands(t)}cleanUndoStack(t){c(this,ut).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=c(this,Ts))==null||e.div.classList.toggle("disabled",!t)}async enable(){A(this,_o,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const s of c(this,Dn).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(c(this,ut).removeChangedExistingAnnotation(s),t.add(s.annotationElementId));if(!c(this,Ts)){A(this,_o,!1);return}const e=c(this,Ts).getEditableAnnotations();for(const s of e){if(s.hide(),c(this,ut).isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const r=await this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}A(this,_o,!1)}disable(){var r;A(this,Lu,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const l of c(this,Dn).values())if(l.disableEditing(),!!l.annotationElementId){if(l.serialize()!==null){t.set(l.annotationElementId,l);continue}else e.set(l.annotationElementId,l);(r=this.getEditableAnnotation(l.annotationElementId))==null||r.show(),l.remove()}if(c(this,Ts)){const l=c(this,Ts).getEditableAnnotations();for(const u of l){const{id:h}=u.data;if(c(this,ut).isDeletedAnnotationElement(h))continue;let f=e.get(h);if(f){f.resetAnnotationElement(u),f.show(!1),u.show();continue}f=t.get(h),f&&(c(this,ut).addChangedExistingAnnotation(f),f.renderAnnotationElement(u)&&f.show(!1)),u.show()}}E(this,he,Vp).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const l of c(Pn,Ur).values())s.remove(`${l._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),A(this,Lu,!1)}getEditableAnnotation(t){var e;return((e=c(this,Ts))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){c(this,ut).getActive()!==t&&c(this,ut).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=c(this,gi))!=null&&t.div&&!c(this,wa)){A(this,wa,new AbortController);const e=c(this,ut).combinedSignal(c(this,wa));c(this,gi).div.addEventListener("pointerdown",E(this,he,hx).bind(this),{signal:e}),c(this,gi).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=c(this,gi))!=null&&t.div&&c(this,wa)&&(c(this,wa).abort(),A(this,wa,null),c(this,gi).div.classList.remove("highlighting"))}enableClick(){if(c(this,Br))return;A(this,Br,new AbortController);const t=c(this,ut).combinedSignal(c(this,Br));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=c(this,Br))==null||t.abort(),A(this,Br,null)}attach(t){c(this,Dn).set(t.id,t);const{annotationElementId:e}=t;e&&c(this,ut).isDeletedAnnotationElement(e)&&c(this,ut).removeDeletedAnnotationElement(t)}detach(t){var e;c(this,Dn).delete(t.id),(e=c(this,So))==null||e.removePointerInTextLayer(t.contentDiv),!c(this,Lu)&&t.annotationElementId&&c(this,ut).addDeletedAnnotationElement(t)}remove(t){this.detach(t),c(this,ut).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(c(this,ut).addDeletedAnnotationElement(t.annotationElementId),re.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),c(this,ut).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!c(this,_o)),c(this,ut).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var s;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!c(this,Sa)&&(t._focusEventsAllowed=!1,A(this,Sa,setTimeout(()=>{A(this,Sa,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:c(this,ut)._signal}),e.focus())},0))),t._structTreeParentId=(s=c(this,So))==null?void 0:s.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:e,undo:s,mustExec:!1})}getNextId(){return c(this,ut).getId()}combinedSignal(t){return c(this,ut).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=c(this,he,cs))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await c(this,ut).updateMode(t.mode);const{offsetX:s,offsetY:r}=E(this,he,Pv).call(this),l=this.getNextId(),u=E(this,he,zv).call(this,{parent:this,id:l,x:s,y:r,uiManager:c(this,ut),isCentered:!0,...e});u&&this.add(u)}async deserialize(t){var e;return await((e=c(Pn,Ur).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,c(this,ut)))||null}createAndAddNewEditor(t,e,s={}){const r=this.getNextId(),l=E(this,he,zv).call(this,{parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:c(this,ut),isCentered:e,...s});return l&&this.add(l),l}addNewEditor(t={}){this.createAndAddNewEditor(E(this,he,Pv).call(this),!0,t)}setSelected(t){c(this,ut).setSelected(t)}toggleSelected(t){c(this,ut).toggleSelected(t)}unselect(t){c(this,ut).unselect(t)}pointerup(t){var r;const{isMac:e}=ai.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!c(this,Hr)||(A(this,Hr,!1),(r=c(this,he,cs))!=null&&r.isDrawer&&c(this,he,cs).supportMultipleDrawings))return;if(!c(this,Nu)){A(this,Nu,!0);return}const s=c(this,ut).getMode();if(s===At.STAMP||s===At.SIGNATURE){c(this,ut).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var r;if(c(this,ut).getMode()===At.HIGHLIGHT&&this.enableTextSelection(),c(this,Hr)){A(this,Hr,!1);return}const{isMac:e}=ai.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(A(this,Hr,!0),(r=c(this,he,cs))!=null&&r.isDrawer){this.startDrawingSession(t);return}const s=c(this,ut).getActive();A(this,Nu,!s||s.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),c(this,$n)){c(this,he,cs).startDrawing(this,c(this,ut),!1,t);return}c(this,ut).setCurrentDrawingSession(this),A(this,$n,new AbortController);const e=c(this,ut).combinedSignal(c(this,$n));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(A(this,_a,null),this.commitOrRemove())},{signal:e}),c(this,he,cs).startDrawing(this,c(this,ut),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&A(this,_a,e);return}c(this,_a)&&setTimeout(()=>{var e;(e=c(this,_a))==null||e.focus(),A(this,_a,null)},0)}endDrawingSession(t=!1){return c(this,$n)?(c(this,ut).setCurrentDrawingSession(null),c(this,$n).abort(),A(this,$n,null),A(this,_a,null),c(this,he,cs).endDrawing(t)):null}findNewParent(t,e,s){const r=c(this,ut).findParent(e,s);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return c(this,$n)?(this.endDrawingSession(),!0):!1}onScaleChanging(){c(this,$n)&&c(this,he,cs).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=c(this,ut).getActive())==null?void 0:t.parent)===this&&(c(this,ut).commitOrRemove(),c(this,ut).setActiveEditor(null)),c(this,Sa)&&(clearTimeout(c(this,Sa)),A(this,Sa,null));for(const s of c(this,Dn).values())(e=c(this,So))==null||e.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,c(this,Dn).clear(),c(this,ut).removeLayer(this)}render({viewport:t}){this.viewport=t,xo(this.div,t);for(const e of c(this,ut).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){c(this,ut).commitOrRemove(),E(this,he,Vp).call(this);const e=this.viewport.rotation,s=t.rotation;if(this.viewport=t,xo(this.div,{rotation:s}),e!==s)for(const r of c(this,Dn).values())r.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return c(this,ut).viewParameters.realScale}};So=new WeakMap,Nu=new WeakMap,Ts=new WeakMap,Br=new WeakMap,Sa=new WeakMap,Dn=new WeakMap,Hr=new WeakMap,Lu=new WeakMap,_o=new WeakMap,$n=new WeakMap,_a=new WeakMap,gi=new WeakMap,wa=new WeakMap,ut=new WeakMap,Ur=new WeakMap,he=new WeakSet,hx=function(t){c(this,ut).unselectAll();const{target:e}=t;if(e===c(this,gi).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&c(this,gi).div.contains(e)){const{isMac:s}=ai.platform;if(t.button!==0||t.ctrlKey&&s)return;c(this,ut).showAllEditors("highlight",!0,!0),c(this,gi).div.classList.add("free"),this.toggleDrawing(),sm.startHighlighting(this,c(this,ut).direction==="ltr",{target:c(this,gi).div,x:t.x,y:t.y}),c(this,gi).div.addEventListener("pointerup",()=>{c(this,gi).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:c(this,ut)._signal}),t.preventDefault()}},cs=function(){return c(Pn,Ur).get(c(this,ut).getMode())},zv=function(t){const e=c(this,he,cs);return e?new e.prototype.constructor(t):null},Pv=function(){const{x:t,y:e,width:s,height:r}=this.div.getBoundingClientRect(),l=Math.max(0,t),u=Math.max(0,e),h=Math.min(window.innerWidth,t+s),f=Math.min(window.innerHeight,e+r),p=(l+h)/2-t,m=(u+f)/2-e,[b,v]=this.viewport.rotation%180===0?[p,m]:[m,p];return{offsetX:b,offsetY:v}},Vp=function(){for(const t of c(this,Dn).values())t.isEmpty()&&t.remove()},J(Pn,"_initialized",!1),w(Pn,Ur,new Map([dv,Tv,Nv,sm,Ov].map(t=>[t._editorType,t])));let kv=Pn;var Kn,Si,wo,Hf,Em,dx,Rs,Hv,fx,Uv;const Le=class Le{constructor({pageIndex:t}){w(this,Rs);w(this,Kn,null);w(this,Si,new Map);w(this,wo,new Map);this.pageIndex=t}setParent(t){if(!c(this,Kn)){A(this,Kn,t);return}if(c(this,Kn)!==t){if(c(this,Si).size>0)for(const e of c(this,Si).values())e.remove(),t.append(e);A(this,Kn,t)}}static get _svgFactory(){return zt(this,"_svgFactory",new em)}draw(t,e=!1,s=!1){const r=mi(Le,Hf)._++,l=E(this,Rs,Hv).call(this),u=Le._svgFactory.createElement("defs");l.append(u);const h=Le._svgFactory.createElement("path");u.append(h);const f=`path_p${this.pageIndex}_${r}`;h.setAttribute("id",f),h.setAttribute("vector-effect","non-scaling-stroke"),e&&c(this,wo).set(r,h);const p=s?E(this,Rs,fx).call(this,u,f):null,m=Le._svgFactory.createElement("use");return l.append(m),m.setAttribute("href",`#${f}`),this.updateProperties(l,t),c(this,Si).set(r,l),{id:r,clipPathId:`url(#${p})`}}drawOutline(t,e){const s=mi(Le,Hf)._++,r=E(this,Rs,Hv).call(this),l=Le._svgFactory.createElement("defs");r.append(l);const u=Le._svgFactory.createElement("path");l.append(u);const h=`path_p${this.pageIndex}_${s}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke");let f;if(e){const b=Le._svgFactory.createElement("mask");l.append(b),f=`mask_p${this.pageIndex}_${s}`,b.setAttribute("id",f),b.setAttribute("maskUnits","objectBoundingBox");const v=Le._svgFactory.createElement("rect");b.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const S=Le._svgFactory.createElement("use");b.append(S),S.setAttribute("href",`#${h}`),S.setAttribute("stroke","none"),S.setAttribute("fill","black"),S.setAttribute("fill-rule","nonzero"),S.classList.add("mask")}const p=Le._svgFactory.createElement("use");r.append(p),p.setAttribute("href",`#${h}`),f&&p.setAttribute("mask",`url(#${f})`);const m=p.cloneNode();return r.append(m),p.classList.add("mainOutline"),m.classList.add("secondaryOutline"),this.updateProperties(r,t),c(this,Si).set(s,r),s}finalizeDraw(t,e){c(this,wo).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var f;if(!e)return;const{root:s,bbox:r,rootClass:l,path:u}=e,h=typeof t=="number"?c(this,Si).get(t):t;if(h){if(s&&E(this,Rs,Uv).call(this,h,s),r&&E(f=Le,Em,dx).call(f,h,r),l){const{classList:p}=h;for(const[m,b]of Object.entries(l))p.toggle(m,b)}if(u){const m=h.firstChild.firstChild;E(this,Rs,Uv).call(this,m,u)}}}updateParent(t,e){if(e===this)return;const s=c(this,Si).get(t);s&&(c(e,Kn).append(s),c(this,Si).delete(t),c(e,Si).set(t,s))}remove(t){c(this,wo).delete(t),c(this,Kn)!==null&&(c(this,Si).get(t).remove(),c(this,Si).delete(t))}destroy(){A(this,Kn,null);for(const t of c(this,Si).values())t.remove();c(this,Si).clear(),c(this,wo).clear()}};Kn=new WeakMap,Si=new WeakMap,wo=new WeakMap,Hf=new WeakMap,Em=new WeakSet,dx=function(t,[e,s,r,l]){const{style:u}=t;u.top=`${100*s}%`,u.left=`${100*e}%`,u.width=`${100*r}%`,u.height=`${100*l}%`},Rs=new WeakSet,Hv=function(){const t=Le._svgFactory.create(1,1,!0);return c(this,Kn).append(t),t.setAttribute("aria-hidden",!0),t},fx=function(t,e){const s=Le._svgFactory.createElement("clipPath");t.append(s);const r=`clip_${e}`;s.setAttribute("id",r),s.setAttribute("clipPathUnits","objectBoundingBox");const l=Le._svgFactory.createElement("use");return s.append(l),l.setAttribute("href",`#${e}`),l.classList.add("clip"),r},Uv=function(t,e){for(const[s,r]of Object.entries(e))r===null?t.removeAttribute(s):t.setAttribute(s,r)},w(Le,Em),w(Le,Hf,0);let Bv=Le;globalThis._pdfjsTestingUtils={HighlightOutliner:gv};globalThis.pdfjsLib={AbortException:Fr,AnnotationEditorLayer:kv,AnnotationEditorParamsType:Pt,AnnotationEditorType:At,AnnotationEditorUIManager:Co,AnnotationLayer:cv,AnnotationMode:ir,AnnotationType:xe,build:CD,ColorPicker:nm,createValidAbsoluteUrl:sE,DOMSVGFactory:em,DrawLayer:Bv,FeatureTest:ai,fetchData:If,getDocument:cT,getFilenameFromUrl:v2,getPdfFilenameFromUrl:A2,getUuid:lE,getXfaPageViewport:_2,GlobalWorkerOptions:xs,ImageKind:pp,InvalidPDFException:w0,isDataScheme:Lm,isPdfFile:Yv,isValidExplicitDest:L2,MathClamp:wi,noContextMenu:Zn,normalizeUnicode:m2,OPS:Wp,OutputScale:Cs,PasswordResponses:l2,PDFDataRangeTransport:uT,PDFDateString:$v,PDFWorker:ud,PermissionFlag:r2,PixelsPerInch:Gr,RenderingCancelledException:Xv,ResponseException:Zp,setLayerDimensions:xo,shadow:zt,SignatureExtractor:Ea,stopEvent:Ce,SupportedImageMimeTypes:T0,TextLayer:od,TouchManager:tm,updateUrlHash:aE,Util:dt,VerbosityLevel:Dm,version:xD,XfaLayer:fT};const KD="/pdf_to_base64/pdf.worker-2ru0a0LU.mjs",QD=(d,t)=>{const e=Ht.useCallback((l,u)=>{const h=d.current[t];if(!h)return{x:0,y:0};const f=h.getBoundingClientRect(),p=h.width/f.width,m=h.height/f.height;return{x:(l-f.left)*p,y:(u-f.top)*m}},[d,t]),s=Ht.useCallback((l,u,h)=>{const f=d.current[t];if(!f||!h)return{left:0,top:0,width:0,height:0};const p=f.getBoundingClientRect(),m=Math.min(h.x,(l-p.left)*(f.width/p.width)),b=Math.min(h.y,(u-p.top)*(f.height/p.height)),v=Math.abs((l-p.left)*(f.width/p.width)-h.x),S=Math.abs((u-p.top)*(f.height/p.height)-h.y);return{left:m*p.width/f.width+p.left,top:b*p.height/f.height+p.top,width:v*p.width/f.width,height:S*p.height/f.height}},[d,t]),r=Ht.useCallback((l,u)=>{if(!l||!u)return null;const h=Math.min(l.x,u.x),f=Math.min(l.y,u.y),p=Math.abs(u.x-l.x),m=Math.abs(u.y-l.y);return{x:h,y:f,width:p,height:m,pageIndex:t}},[t]);return{getAdjustedCoordinates:e,updateDisplayCoords:s,getSelectionData:r}},WD=({onSelectArea:d,disabled:t,canvasRef:e,pageIndex:s})=>{const[r,l]=Ht.useState(null),[u,h]=Ht.useState(null),[f,p]=Ht.useState(!1),[m,b]=Ht.useState({left:0,top:0,width:0,height:0}),{getAdjustedCoordinates:v,updateDisplayCoords:S,getSelectionData:x}=QD(e,s),T=D=>{if(t)return;const{x:N,y:k}=v(D.clientX,D.clientY);l({x:N,y:k}),h({x:N,y:k}),p(!0)},R=D=>{if(!f)return;const{x:N,y:k}=v(D.clientX,D.clientY);h({x:N,y:k}),b(S(D.clientX,D.clientY,r))},M=()=>{if(!f||!r||!u)return;const D=x(r,u);D&&D.width>10&&D.height>10&&d(D),p(!1),l(null),h(null),b({left:0,top:0,width:0,height:0})};return Ht.useEffect(()=>{const D=()=>{f&&M()};return window.addEventListener("mouseup",D),()=>window.removeEventListener("mouseup",D)},[f,r,u]),Mt.jsxs(Mt.Fragment,{children:[Mt.jsx("div",{className:`absolute inset-0 ${t?"cursor-not-allowed":"cursor-crosshair"}`,onMouseDown:T,onMouseMove:R}),f&&Mt.jsx("div",{className:"fixed border-2 border-red-500 bg-red-500 bg-opacity-10 pointer-events-none",style:{left:`${m.left}px`,top:`${m.top}px`,width:`${m.width}px`,height:`${m.height}px`}})]})};xs.workerSrc=KD;const ZD=({pdfData:d})=>{const t=Fv(),[e,s]=Ht.useState(null),[r,l]=Ht.useState(!1),[u,h]=Ht.useState([]),f=Ht.useRef([]),p=Ht.useRef([]),m=Ht.useRef(null),b=Ht.useRef(!0),v=()=>{p.current.forEach(R=>{R&&!R.cancelled&&R.cancel()}),p.current=[],m.current&&(m.current.destroy(),m.current=null)};Ht.useEffect(()=>(b.current=!0,()=>{b.current=!1,v()}),[]),Ht.useEffect(()=>{if(!d)return;const R=async()=>{await S()},M=setTimeout(()=>R(),50);return()=>{v(),clearTimeout(M),f.current=[]}},[d]);const S=async()=>{if(b.current){l(!0);try{v();const M=await cT({url:d}).promise;m.current=M;const D=M.numPages,N=[];for(let k=1;k<=D;k++){const O=await M.getPage(k),B=O.getViewport({scale:1.5});N.push({page:O,viewport:B})}h(N),f.current=new Array(N.length).fill(null),setTimeout(()=>{N.forEach((k,O)=>{x(k,O)})},50),b.current&&s(null)}catch(R){b.current&&R.name!=="RenderingCancelledException"&&(console.error("PDF rendering error:",R),s("Ошибка загрузки PDF"+R.message))}finally{l(!1)}}},x=async(R,M)=>{const D=f.current[M];if(!D)return;const k=R.page.getViewport({scale:1.5});D.height=k.height,D.width=k.width;const O=D.getContext("2d");O.clearRect(0,0,D.width,D.height);try{const B=R.page.render({canvasContext:O,viewport:R.viewport});p.current.push(B),await B.promise}catch(B){B.name!=="RenderingCancelledException"&&console.error(`Error rendering page ${M+1}:`,B)}},T=async(R,M)=>{const D=f.current[M];if(!D||R.width<=0||R.height<=0){console.error("Invalid selection parameters");return}try{const N=document.createElement("canvas");N.width=Math.floor(R.width),N.height=Math.floor(R.height);const k=N.getContext("2d");k.fillStyle="white",k.fillRect(0,0,N.width,N.height),k.drawImage(D,Math.floor(R.x),Math.floor(R.y),Math.floor(R.width),Math.floor(R.height),0,0,Math.floor(R.width),Math.floor(R.height));const O=N.toDataURL("image/jpeg",.8);N.width>0&&N.height>0&&O.length>1e3?t(WM({base64:O,coordinates:R,dimensions:{width:N.width,height:N.height}})):console.error("Invalid fragment data:",{width:N.width,height:N.height,base64Length:O.length})}catch(N){console.error("Error creating fragment:",N)}};return Mt.jsxs("div",{className:"pdf-renderer relative",children:[r&&Mt.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-70 flex items-center justify-center",children:Mt.jsx("div",{className:"text-blue-500",children:"Загрузка PDF..."})}),e&&Mt.jsx("div",{className:"text-red-500 mb-2",children:e}),Mt.jsx("div",{className:"relative overflow-y-auto max-h-[80vh]",children:u.map((R,M)=>Mt.jsxs("div",{className:"relative mb-4",children:[Mt.jsx("canvas",{ref:D=>f.current[M]=D,className:"border border-gray-300 w-full block my-0 mx-auto"}),Mt.jsx(WD,{onSelectArea:D=>T(D,M),disabled:r,canvasRef:f,pageIndex:M})]},M))})]})},JD=()=>{var l,u;const d=Fv(),{currentFragment:t,confirmedFragment:e}=p0(h=>h.pdf),s=h=>typeof h!="string"?!1:/^data:image\/(png|jpeg|jpg);base64,[a-zA-Z0-9+/]+={0,2}$/.test(h),r=()=>{t&&(d(ZM()),d(JM()))};return console.log("Base64 validation:",{isString:typeof(e==null?void 0:e.base64)=="string",isImage:(l=e==null?void 0:e.base64)==null?void 0:l.startsWith("data:image/"),isValid:s(e==null?void 0:e.base64),length:(u=e==null?void 0:e.base64)==null?void 0:u.length}),Mt.jsxs("div",{className:"flex flex-col gap-4",children:[Mt.jsx("div",{className:"border p-4",children:t!=null&&t.base64?Mt.jsx("img",{src:t.base64,alt:"Current Fragment",className:"max-w-full h-auto"}):Mt.jsx("p",{children:"Выделите фрагмент в PDF"})}),Mt.jsx("button",{onClick:r,disabled:!t,className:"bg-green-500 text-white px-4 py-2 rounded disabled:bg-gray-300",children:"Применить фрагмент"})]})};function tO(){const d=p0(e=>e.pdf.pdfUrl),t=p0(e=>e.pdf.confirmedFragment);return Mt.jsxs("div",{className:"container mx-auto p-4",children:[Mt.jsxs("div",{className:"mb-6",children:[Mt.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Загрузка PDF: ColibriC5.pdf (для копирования)"}),Mt.jsx(s2,{})]}),Mt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[Mt.jsx("div",{className:"border border-gray-300 rounded-lg p-4",children:d?Mt.jsx(ZD,{pdfData:d}):Mt.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:"Загрузите PDF файл"})}),Mt.jsxs("div",{className:"border border-gray-300 rounded-lg p-4",children:[Mt.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Предпросмотр:"}),Mt.jsx(JD,{}),Mt.jsx("h2",{className:"text-lg font-semibold mt-4 mb-2",children:"Подтвержденный фрагмент:"}),t?Mt.jsx("img",{src:t.base64,alt:"Confirmed",className:"mt-2"}):Mt.jsx("div",{children:"Нет подтвержденного фрагмента"})]})]})]})}YR.createRoot(document.getElementById("root")).render(Mt.jsx(Ht.StrictMode,{children:Mt.jsx(oM,{store:i2,children:Mt.jsx(tO,{})})}));
